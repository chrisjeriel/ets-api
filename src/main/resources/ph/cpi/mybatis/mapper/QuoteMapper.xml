<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ph.cpi.mybatis.mapper.QuoteMapper">
	
	<resultMap type="java.util.Map" id="sampleMap">
		<result property="insuredName" column="insured_name"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.AlopSample" id="alopMapSample">
	    <result property="alopId" 			column="ALOP_ID"/> 
		<result property="insuredId" 		column="INS_ID"/> 
		<result property="insuredName" 		column="INSURED_NAME"/> 
		<result property="insuredDesc" 		column="INSURED_DESC_ALOP"/> 
		<result property="address" 			column="ADDRESS"/> 
		<result property="insuredBusiness" 	column="INS_BUSINESS"/> 
		<result property="annSi" 			column="ANN_SI"/> 
		<result property="maxIndemPdSi" 	column="MAX_INDEM_PD_SI"/> 
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="maxIndemPd" 		column="MAX_INDEM_PD"/> 
		<result property="indemFromDate" 	column="INDEM_FROM_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="timeExc" 			column="TIME_EXC_ALOP"/> 
		<result property="repInterval" 		column="REP_INTERVAL"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="retrieveQuoteListingMap">
		<result property="quotationNo" 		column="QUOTATION_NO"/>
		<result property="quoteId" 			column="QUOTE_ID"/>
		<result property="cessionDesc" 		column="CESSION_DESCRIPTION"/>
		<result property="lineClassCdDesc" 	column="CLASS_DESCRIPTION"/>
		<result property="status" 			column="STATUS"/>
		<result property="cedingName" 		column="CEDING_NAME"/>
		<result property="principalName" 	column="PRINCIPAL_NAME"/>
		<result property="contractorName" 	column="CONTRACTOR_NAME"/>
		<result property="insuredDesc" 		column="INSURED_DESC"/>
		<result property="policyNo" 		column="POLICY_NO"/>
		<result property="currencyCd" 		column="CURRENCY_CD"/>
		<result property="reasonCd"			column="REASON_CD"/>
		<result property="reasonDesc"		column="DESCRIPTION"/>		
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqBy" 			column="REQ_BY"/>
		<result property="createUser" 		column="CREATE_USER"/>
		
		<association property="project" 	resultMap="assocProject"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationOc" id="retrieveQuoteListingOcMap">
		<result property="openQuotationNo" 	column="OPEN_QUOTATION_NO"/>
		<result property="cessionId" 		column="CESSION_ID"/>
		<result property="cessionDesc" 		column="CESSION_DESCRIPTION"/>
		<result property="lineClassCd" 		column="LINE_CLASS_CD"/>
		<result property="lineClassCdDesc" 	column="CLASS_DESCRIPTION"/>
		<result property="status" 			column="STATUS"/>
		<result property="cedingId" 		column="CEDING_ID"/>
		<result property="cedingName" 		column="CEDING_NAME"/>
		<result property="prinId" 			column="PRIN_ID"/>
		<result property="principalName" 	column="PRINCIPAL_NAME"/>
		<result property="contractorId" 	column="CONTRACTOR_ID"/>
		<result property="contractorName" 	column="CONTRACTOR_NAME"/>
		<result property="insuredDesc" 		column="INSURED_DESC"/>
		<result property="openPolicyNo" 	column="OPEN_POLICY_NO"/>
		<result property="currencyCd" 		column="CURRENCY_CD"/>
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqBy" 			column="REQ_BY"/>
		<result property="createUser" 		column="CREATE_USER"/>
		
		<association property="projectOc" 	resultMap="assocProjectOc"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="retrieveQuoteOptionMap">
		<result property="quoteId" 			column="QUOTE_ID"/>
		<result property="quotationNo" 		column="QUOTATION_NO"/>
		<association property="optionsList" resultMap="assocOptions"/>
		<!-- <association property="otherRatesList" 	resultMap="assocOtherRates"/>	 -->
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Project" id="assocProject">
		<result property="riskId" 			column="RISK_ID"/>
		<result property="riskName" 		column="RISK_NAME"/>
		<result property="objectDesc" 		column="OBJECT_DESCRIPTION"/>
		<result property="site" 			column="SITE"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.ProjectOc" id="assocProjectOc">
		<result property="riskName" 		column="RISK_NAME"/>
		<result property="objectDesc" 		column="OBJECT_DESCRIPTION"/>
		<result property="site" 			column="SITE"/>
	</resultMap>

	<resultMap type="ph.cpi.rest.api.model.quote.HoldCover" id="holdCoverMap">
		<result property = "holdCoverId"         column = "HOLD_COV_ID"/>
		<result property = "holdCoverNo"         column = "HOLD_COV_NO"/>
		<result property = "lineCd"              column = "LINE_CD"/>
		<result property = "lineCdDesc"          column = "DESCRIPTION"/>
		<result property = "holdCoverYear"       column = "HOLD_COV_YEAR"/>
		<result property = "holdCoverSeqNo"      column = "HOLD_COV_SEQ_NO"/>
		<result property = "holdCoverRevNo"      column = "HOLD_COV_REV_NO"/>
		<result property = "periodFrom"          column = "PERIOD_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "periodTo"            column = "PERIOD_TO" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "compRefHoldCovNo"    column = "COMP_REF_HOLD_COV_NO"/>
		<result property = "status"              column = "STATUS"/>
		<result property = "reqBy"               column = "REQ_BY"/>
		<result property = "reqDate"             column = "REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "preparedBy"          column = "PREPARED_BY"/>
		<result property = "approvedBy"          column = "APPROVED_BY"/>
		<result property = "createUser"          column = "CREATE_USER"/>
		<result property = "createDate"          column = "CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "updateUser"          column = "UPDATE_USER"/>
		<result property = "updateDate"          column = "UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationGeneralInfoOc" id="quotationOcMap">
		<result property    ="quoteIdOc"            column  ="QUOTE_ID_OC"/>
		<result property    ="openQuotationNo"      column  ="OC_QUOTE_NO"/>
		<result property    ="lineCd"               column  ="LINE_CD"/>
		<result property    ="lineCdDesc"           column  ="LINE_DESCRIPTION"/>
		<result property    ="year"                 column  ="YEAR"/>
		<result property    ="seqNo"                column  ="SEQ_NO"/>
		<result property    ="revNo"                column  ="REV_NO"/>
		<result property    ="cedingId"             column  ="CEDING_ID"/>
		<result property    ="cessionId"            column  ="CESSION_ID"/>
		<result property    ="cessionDesc"          column  ="DESCRIPTION"/>
		<result property    ="cedingName"           column  ="CEDING_NAME"/>
		<result property    ="lineClassCd"          column  ="LINE_CLASS_CD"/>
		<result property    ="lineClassDesc"        column  ="LINE_CLASS_DESCRIPTION"/>
		<result property    ="refPolNo"             column  ="REF_POL_NO"/>
		<result property    ="policyIdOc"           column  ="POLICY_ID_OC"/>
		<result property    ="openPolicyNo"         column  ="OPEN_POLICY_NO"/>
		<result property    ="prinId"               column  ="PRIN_ID"/>
		<result property    ="principalName"        column  ="PRINCIPAL_NAME"/>
		<result property    ="contractorId"         column  ="CONTRACTOR_ID"/>
		<result property    ="contractorName"        column  ="CONTRACTOR_NAME"/>
		<result property    ="insuredDesc"          column  ="INSURED_DESC"/>
		<result property    ="status"               column  ="STATUS"/>
		<result property    ="reinsurerId"          column  ="REINSURER_ID"/>
		<result property    ="reinsurerName"        column  ="CEDING_NAME"/>
		<result property    ="intmId"               column  ="INTM_ID"/>
		<result property    ="intmName"             column  ="INTM_NAME"/>
		<result property    ="issueDate"            column  ="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="expiryDate"           column  ="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="reqBy"                column  ="REQ_BY"/>
		<result property    ="reqDate"              column  ="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="reqMode"              column  ="REQ_MODE"/>
		<result property    ="currencyCd"           column  ="CURRENCY_CD"/>
		<result property    ="currencyRt"           column  ="CURRENCY_RT"/>
		<result property    ="govtTag"              column  ="GOVT_TAG"/>
		<result property    ="indicativeTag"        column  ="INDICATIVE_TAG"/>
		<result property    ="preparedBy"           column  ="PREPARED_BY"/>
		<result property    ="approvedBy"           column  ="APPROVED_BY"/>
		<result property    ="printedBy"            column  ="PRINTED_BY"/>
		<result property    ="printDate"            column  ="PRINT_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="openingParag"         column  ="OPENING_PARAG"/>
		<result property    ="closingParag"         column  ="CLOSING_PARAG"/>
		<result property    ="reasonCd"             column  ="REASON_CD"/>
		<result property    ="reasonDesc"           column  ="ETS_DESCRIPTION"/>
		<result property    ="createUser"           column  ="GEN_INFO_OC_CREATE_USER"/>
		<result property    ="createDate"           column  ="GEN_INFO_OC_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="updateUser"           column  ="GEN_INFO_OC_UPDATE_USER"/>
		<result property    ="updateDate"           column  ="GEN_INFO_OC_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property = "projectOc"		resultMap = "projectOcMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Project" id="projectMap">
		<result property = "riskName"			column	=	"RISK_NAME"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.ProjectOc" id="projectOcMap">
		<result property    ="projId"               column  ="PROJ_ID"/>
		<result property    ="projDesc"             column  ="PROJ_DESC"/>
		<result property    ="riskId"               column  ="RISK_ID"/>
		<result property    ="maxSi"                column  ="MAX_SI"/>
		<result property    ="pctShare"             column  ="PCT_SHARE"/>
		<result property    ="totalValue"           column  ="TOTAL_VALUE"/>
		<result property    ="objectId"             column  ="OBJECT_ID"/>
		<result property    ="site"                 column  ="SITE"/>
		<result property    ="duration"             column  ="DURATION"/>
		<result property    ="testing"              column  ="TESTING"/>
		<result property    ="createUser"           column  ="CREATE_USER"/>
		<result property    ="createDate"           column  ="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property    ="updateUser"           column  ="UPDATE_USER"/>
		<result property    ="updateDate"           column  ="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property="coverageOc"			resultMap="coverageOcMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationMap">
		<result property 		= "quoteId" 		column		= "QUOTE_ID" />
		<result property 		= "quotationNo" 	column		= "QUOTE_NO" /> <!-- CHANGED FROM QUOTATION_NO -->
		<result property 		= "cedingName" 		column		= "CEDING_NAME" />
		<result property 		= "insuredDesc" 	column		= "INSURED_DESC" />
		<association property 	= "holdCover" 		resultMap 	= "holdCoverMap"/>
		<association property 	= "project"			resultMap 	= "projectMap"/>
        <association property="alop" resultMap="alopMap" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationListingMap">
		<result property 		= "quotationNo"		column		= "QUOTE_NO"/>
		<result property 		= "quoteId"			column		= "QUOTE_ID"/>
		<result property 		= "cedingName"		column		= "CEDING_NAME"/>
		<result property 		= "insuredDesc"		column		= "INSURED_DESC"/>
		<association property 	= "holdCover" 		resultMap 	= "holdCoverListingMap"/>
		<association property 	= "project"			resultMap 	= "projectMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.HoldCover" id="holdCoverListingMap">
		<result property = "holdCoverId"         column = "HOLD_COV_ID"/>
		<result property = "holdCoverNo"         column = "HOLD_COV_NO"/>
		<result property = "lineCd"              column = "LINE_CD"/>
		<result property = "lineCdDesc"          column = "DESCRIPTION"/>
		<result property = "holdCoverYear"       column = "HOLD_COV_YEAR"/>
		<result property = "holdCoverSeqNo"      column = "HOLD_COV_SEQ_NO"/>
		<result property = "holdCoverRevNo"      column = "HOLD_COV_REV_NO"/>
		<result property = "periodFrom"          column = "PERIOD_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "periodTo"            column = "PERIOD_TO" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "compRefHoldCovNo"    column = "COMP_REF_HOLD_COV_NO"/>
		<result property = "status"              column = "STATUS"/>
		<result property = "reqBy"               column = "REQ_BY"/>
		<result property = "reqDate"             column = "REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "preparedBy"          column = "PREPARED_BY"/>
		<result property = "approvedBy"          column = "APPROVED_BY"/>
		<result property = "createUser"          column = "CREATE_USER"/>
		<result property = "createDate"          column = "CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "updateUser"          column = "UPDATE_USER"/>
	</resultMap>
	
	
	<resultMap type="ph.cpi.rest.api.model.quote.Options" id="assocOptions">
		<result property="optionId" 		column="OPTION_ID"/>
		<result property="optionRt" 		column="OPTION_RT"/>
		<result property="condition" 		column="CONDITION"/>
		<result property="commRtQuota" 		column="COMM_RT_QUOTA"/>
		<result property="commRtSurplus" 	column="COMM_RT_SURPLUS"/>
		<result property="commRtFac" 		column="COMM_RT_FAC"/>
		<result property="createUser" 		column="OPTIONS_CREATE_USER"/>
		<result property="createDate" 		column="OPTIONS_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" 		column="OPTIONS_UPDATE_USER"/>
		<result property="updateDate" 		column="OPTIONS_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		
		<association property="deductiblesList" resultMap="assocDeductibles"/>
		<association property="otherRatesList" 	resultMap="assocOtherRates"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Deductibles" id="assocDeductibles">
		<result property="deductibleCd" 	column="DEDUCTIBLE_CD"/>
		<result property="deductibleTitle" 	column="DEDUCTIBLE_TITLE"/>
		<result property="coverCd" 			column="COVER_CD"/>
		<result property="endtCd" 			column="ENDT_CD"/>
		<result property="sumInsured" 		column="SUM_INSURED"/>
		<result property="deductibleRt" 	column="DEDUCTIBLE_RT"/>
		<result property="deductibleAmt" 	column="DEDUCTIBLE_AMT"/>
		<result property="deductibleTxt" 	column="DEDUCTIBLE_TXT"/>
		<result property="createUser" 		column="DEDUCTIBLES_CREATE_USER"/>
		<result property="createDate" 		column="DEDUCTIBLES_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" 		column="DEDUCTIBLES_UPDATE_USER"/>
		<result property="updateDate" 		column="DEDUCTIBLES_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.OtherRates" id="assocOtherRates">
		<result property="bulletNo" 		column="BULLET_NO"/>
		<result property="changeTag" 			column="CHANGE_TAG"/>
		<result property="section" 			column="SECTION"/>
		<result property="coverCd" 			column="COVER_CD"/>
		<result property="coverCdDesc" 		column="DESCRIPTION"/>
		<result property="rate" 			column="RATE"/>
		<result property="amount" 			column="AMOUNT"/>
		<result property="createUser" 		column="OTHER_RATES_CREATE_USER"/>
		<result property="createDate" 		column="OTHER_RATES_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" 		column="OTHER_RATES_UPDATE_USER"/>
		<result property="updateDate" 		column="OTHER_RATES_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	

	<resultMap type="ph.cpi.rest.api.model.quote.Endorsements" id="quoteEndorsementsMap">
		<result property="quoteId" 			column="QUOTE_ID"/> 
		<result property="quotationNo" 		column="QUOTATION_NO"/> 
		<result property="optionId" 		column="OPTION_ID"/> 
		<result property="endtCd" 			column="ENDT_CD"/> 
		<result property="endtTitle" 		column="ENDT_TITLE"/> 
		<result property="description" 		column="ENDT_DESCRIPTION"/> 
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationGeneralInfo" id="quoteGenInfoMap">
		<result property="quoteId" 			column="QUOTE_ID"/> 
		<result property="quotationNo" 		column="QUOTATION_NO"/> 
		<result property="lineCd" 			column="LINE_CD"/> 
		<result property="lineCdDesc" 		column="DESCRIPTION_LINE"/>  
		<result property="quoteYear" 		column="QUOTE_YEAR"/> 
		<result property="quoteSeqNo" 		column="QUOTE_SEQ_NO"/> 
		<result property="quoteRevNo" 		column="QUOTE_REV_NO"/> 
		<result property="cedingId" 		column="CEDING_ID"/> 
		<result property="cedingName" 		column="CEDING_NAME"/> 
		<result property="cessionId" 		column="CESSION_ID"/> 
		<result property="cessionDesc" 		column="DESCRIPTION_TYPE_OF_CESSION"/> 
		<result property="lineClassCd" 		column="LINE_CLASS_CD"/> 
		<result property="lineClassDesc" 	column="DESCRIPTION_LINE_CLASS"/> 
		<result property="principalId" 		column="PRIN_ID"/>
		<result property="principalName" 	column="PRINCIPAL_NAME"/> 
		<result property="contractorId" 	column="CONTRACTOR_ID"/> 
		<result property="contractorName" 	column="CONTRACTOR_NAME"/> 
		<result property="insuredDesc" 		column="INSURED_DESC"/>
		<result property="policyId" 		column="POLICY_ID"/> 
		<result property="policyNo" 		column="POLICY_NO"/> 
		<result property="status" 			column="STATUS"/> 
		<result property="statusDesc" 		column="DESCRIPTION_STATUS"/> 
		<result property="reinsurerId" 		column="REINSURER_ID"/>
		<result property="reinsurerName" 	column="CEDING_NAME_REINSURER"/> 
		<result property="intmId" 			column="INTM_ID"/> 
		<result property="intmName" 		column="INTM_NAME"/> 
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="reqBy" 			column="REQ_BY" /> 
		<result property="reqDate" 			column="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="reqMode" 			column="REQ_MODE"/> 
		<result property="mbiRefNo" 		column="MBI_REF_NO"/> 
		<result property="currencyCd" 		column="CURRENCY_CD"/> 
		<result property="currencyRt" 		column="CURRENCY_RT"/> 
		<result property="govtTag" 			column="GOVT_TAG"/> 
		<result property="indicativeTag" 	column="INDICATIVE_TAG"/> 
		<result property="openCoverTag" 	column="OPEN_COVER_TAG"/> 
		<result property="ocQuoted" 		column="QUOTE_ID_OC"/> 
		<result property="openQuotationNo" 	column="QUOTATION_NO_OC"/> 
		<result property="declarationTag" 	column="DECLARATION_TAG"/>
		<result property="preparedBy" 		column="PREPARED_BY"/>  
		<result property="approvedBy" 		column="APPROVED_BY"/>
		<result property="printedBy" 		column="PRINTED_BY"/>
		<result property="printDate" 		column="PRINT_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>  
		<result property="openingParag" 	column="OPENING_PARAG"/>
		<result property="closingParag" 	column="CLOSING_PARAG"/>
		<result property="reasonCd" 		column="REASON_CD"/>
		<result property="reasonDesc" 		column="DESCRIPTION_REASON"/>
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.EndorsementsOc" id="quoteEndorsementsOcMap">
		<result property="quoteId" 			column="QUOTE_ID"/> 
		<result property="quotationNo" 		column="QUOTATION_NO"/> 
		<result property="projId" 			column="PROJ_ID"/> 
		<result property="projDesc" 		column="PROJ_DESC"/> 	 
		<result property="endtCd" 			column="ENDT_CD"/> 
		<result property="endtTitle" 		column="ENDT_TITLE"/> 
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Project" id="quoteProjectMap">
		<result property="quoteId" 			column="QUOTE_ID"/> 
		<result property="projId" 			column="PROJ_ID"/> 
		<result property="projDesc" 		column="PROJ_DESC"/> 
		<result property="riskId" 			column="RISK_ID"/> 
		<result property="riskName" 		column="RISK_NAME"/>
		<result property="regionCd" 		column="REGION_CD"/>
		<result property="regionDesc" 		column="REGION_DESC"/>
		<result property="provinceCd" 		column="PROVINCE_CD"/>
		<result property="provinceDesc"		column="PROVINCE_DESC"/>
		<result property="cityCd"	 		column="CITY_CD"/>
		<result property="cityDesc"	 		column="CITY_DESC"/>
		<result property="districtCd" 		column="DISTRICT_CD"/>
		<result property="districtDesc"		column="DISTRICT_DESC"/>
		<result property="blockCd"	 		column="BLOCK_CD"/>
		<result property="blockDesc"		column="BLOCK_DESC"/>
		<result property="latitude"	 		column="LATITUDE"/>
		<result property="longitude" 		column="LONGITUDE"/>		
		<result property="totalSi" 			column="TOTAL_SI"/>  
		<result property="pctShare" 		column="PCT_SHARE"/>
		<result property="totalValue" 		column="TOTAL_VALUE"/>  	 
		<result property="objectId" 		column="OBJECT_ID"/>
		<result property="objectDesc" 		column="DESCRIPTION"/>
		<result property="site" 			column="SITE"/>
		<result property="duration" 		column="DURATION"/>
		<result property="testing" 			column="TESTING"/>
		<result property="ipl" 				column="IPL"/>
		<result property="timeExc" 			column="TIME_EXC"/>
		<result property="noClaimPd" 		column="NO_CLAIM_PD"/>        
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.ProjectOc" id="quoteProjectOcMap">
		<result property="quoteIdOc" 	    column="QUOTE_ID_OC"/>
		<result property="openQuotationNo" 	column="OPEN_QUOTATION_NO"/> 
		<result property="projId" 			column="PROJ_ID"/> 
		<result property="projDesc" 		column="PROJ_DESC"/> 
		<result property="riskId" 			column="RISK_ID"/> 
		<result property="riskName" 		column="RISK_NAME"/>
		<result property="regionCd" 		column="REGION_CD"/>
		<result property="regionDesc" 		column="REGION_DESC"/>
		<result property="provinceCd" 		column="PROVINCE_CD"/>
		<result property="provinceDesc"		column="PROVINCE_DESC"/>
		<result property="cityCd"	 		column="CITY_CD"/>
		<result property="cityDesc"	 		column="CITY_DESC"/>
		<result property="districtCd" 		column="DISTRICT_CD"/>
		<result property="districtDesc"		column="DISTRICT_DESC"/>
		<result property="blockCd"	 		column="BLOCK_CD"/>
		<result property="blockDesc"		column="BLOCK_DESC"/>
		<result property="latitude"	 		column="LATITUDE"/>
		<result property="longitude" 		column="LONGITUDE"/>		
		<result property="maxSi" 			column="MAX_SI"/>  
		<result property="pctShare" 		column="PCT_SHARE"/>
		<result property="totalValue" 		column="TOTAL_VALUE"/>  	 
		<result property="objectId" 		column="OBJECT_ID"/>
		<result property="objectDesc" 		column="DESCRIPTION"/>
		<result property="site" 			column="SITE"/>
		<result property="duration" 		column="DURATION"/>
		<result property="testing" 			column="TESTING"/>     
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveQuoteProject" resultMap="quoteProjectMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_ETC.retrieve_quote_project(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},'','','',''))
	</select>
	<select id="retrieveQuoteProjectOc" resultMap="quoteProjectOcMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_NDC.ret_quo_proj_oc(#{quoteIdOc,jdbcType=VARCHAR},#{openQuotationNo,jdbcType=VARCHAR},'','','',''))
	</select>
	
	<select id="retrieveQuoteEndorsementsOc" resultMap="quoteEndorsementsOcMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_ETC.retrieve_quote_endorsements_Oc(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},'','','',''))
	</select>
	
	<select id="retrieveQuoteEndorsements" resultMap="quoteEndorsementsMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_ETC.retrieve_quote_endorsements(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},'','','',''))
					WHERE OPTION_ID = NVL(#{optionId,jdbcType=VARCHAR},OPTION_ID)
	</select>
	
	<select id="retrieveQuoteGeneralInfo" resultMap="quoteGenInfoMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_ETC.retrieve_quote_gen_info(#{quoteId,jdbcType=VARCHAR },#{quotationNo,jdbcType=VARCHAR},'','','',''))
	</select>

	<select id="retrieveQuoteAlopSample" resultMap="quotation" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG.retrieve_quote_alop(#{quoteId},#{quotationNo}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationMapAttachment">
        <result property="quoteId" 		column="QUOTE_ID"/>
        <result property="quotationNo" 	column="QUOTATION_NO"/>
        <association property="attachmentsList" resultMap="attachmentMap"></association>
	</resultMap>

	<resultMap type="ph.cpi.rest.api.model.quote.Attachment" id="attachmentMap">
        <result property="fileNo"  		column="FILE_NO"/> 
        <result property="fileName"  	column="FILE_NAME"/>
        <result property="description"  column="DESCRIPTION"/>
        <result property="createUser"  	column="CREATE_USER"/>
     	<result property="createDate"  	column="CREATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
        <result property="updateUser"  	column="UPDATE_USER"/>
        <result property="updateDate"  	column="UPDATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
	</resultMap>
	
	<select id="retrieveQuoteAttachment" resultMap="quotationMapAttachment" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_EJVA.retrieve_quote_attachment(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR}, null, null ,null, null))
	</select>
	
	<select id="retrieveQuoteListing" resultMap="retrieveQuoteListingMap" parameterType="java.util.Map">
		<!-- SELECT * FROM ETS_QUOTE_PKG_MBM.retrieve_quote_listing(#{quotationNo},#{cessionDesc},#{lineClassCdDesc},#{status},#{cedingName},#{principalName},#{contractorName},#{insuredDesc},#{riskName},#{objectDesc},#{site},#{policyNo},#{currencyCd},#{issueDate},#{expiryDate},#{reqBy},#{createUser},#{position},#{count},#{sortKey},#{order}) -->
		SELECT * FROM TABLE(ETS_QUOTE_PKG_MBM.retrieve_quote_listing(#{quotationNo},#{cessionDesc},#{lineClassCdDesc},#{status},#{cedingName},#{principalName},#{contractorName},#{insuredDesc},#{riskName},#{objectDesc},#{site},#{policyNo},#{currencyCd},#{issueDate},#{expiryDate},#{reqBy},#{createUser},'','','',''))
	</select>

	<resultMap type="ph.cpi.rest.api.model.quote.SectionCovers" id="sectionCovers">
	
		<result property="section" column="SECTION" />
		<result property="coverCd" column="COVER_CD" />
		<result property="coverCdAbbr" column="COVER_CD_ABBR" />
		<result property="bulletNo" column="BULLET_NO" />
		<result property="sumInsured" column="SUM_INSURED" />
		<result property="addSi" column="ADD_SI" />
		<result property="createUser" column="SEC_CREATE_USER" />
		<result property="createDate" column="SEC_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="SEC_UPDATE_USER" />
		<result property="updateDate" column="SEC_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Coverage" id="coverage">
		<result property="sectionISi" column="SECTION_I_SI"/>
		<result property="sectionIISi" column="SECTION_II_SI"/>
		<result property="sectionIIISi" column="SECTION_III_SI"/>
		<result property="totalSi" column="TOTAL_SI"/>
		<result property="currencyCd" column="CURRENCY_CD"/>
		<result property="currencyRt" column="CURRENCY_RT"/>
		<result property="remarks" column="REMARKS"/>
		 <result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="sectionCovers" resultMap="sectionCovers"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Project" id="project">
		<result property="projId" column="PROJ_ID"/>
		<result property="projDesc" column="PROJ_DESC"/>
		<result property="riskId" column="RISK_ID"/>
		<result property="riskName" column="RISK_NAME"/>
		<result property="totalSi" column="PROJECT_TOTAL_SI"/>
		<result property="pctShare" column="PCT_SHARE"/>
		<result property="totalValue" column="TOTAL_VALUE"/>
		<result property="objectId" column="OBJECT_ID"/>
		<result property="objectDesc" column="OBJECT_DESCRIPTION"/>
		<result property="site" column="SITE"/>
		<result property="duration" column="DURATION"/>
		<result property="testing" column="TESTING"/>
		<result property="ipl" column="IPL"/>
		<result property="timeExc" column="PROJECT_TIME_EXC"/>
		<result property="noClaimPd" column="NO_CLAIM_PD"/>
		<result property="createUser" column="PROJECT_CREATE_USER"/>
		<result property="createDate" column="PROJECT_CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="PROJECT_UPDATE_USER"/>
		<result property="updateDate" column="PROJECT_UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="coverage" resultMap="coverage"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotation">
		<result property="quoteId" column="QUOTE_ID"/>
		<result property="quoteName" column="QUOTE_NAME"/>
		<result property="lineCd" column="LINE_CD"/>
		<result property="lineCdDesc" column="LINE_DESCRIPTION"/>
		<result property="quoteYear" column="QUOTE_YEAR"/>
		<result property="quoteSeqNo" column="QUOTE_SEQ_NO"/>
		<result property="quoteRevNo" column="QUOTE_REV_NO"/>
		<result property="cedingId" column="QUOTE_CEDING_ID"/>
		<result property="cedingName" column="CEDING_NAME"/>
		<result property="cessionId" column="CESSION_ID"/>
		<result property="cessionDesc" column="CESSION_DESCRIPTION"/>
		<result property="lineClassCd" column="LINE_CLASS_CD"/>
		<result property="lineClassDesc" column="LINE_CLASS_DESC"/>
		<result property="principalId" column="PRIN_ID"/>
		<result property="principalName" column="PRINCIPAL_NAME"/>
		<result property="contractorId" column="CONTRACTOR_ID"/>
		<result property="contactorName" column="CONTRACTOR_NAME"/>
		<result property="insuredDesc" column="INSURED_DESC"/>
		<result property="policyId" column="POLICY_ID"/>
		<result property="policyNo" column="POL_NO"/>
		<result property="status" column="STATUS"/>
		<result property="reinsurerId" column="REINSURER_ID"/>
		<result property="reinsurerName" column="REINSURER_NAME"/>
		<result property="intmId" column="INTM_ID"/>
		<result property="intmName" column="INTM_NAME"/>
		<result property="issueDate" column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="expiryDate" column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqBy" column="REQ_BY"/>
		<result property="reqDate" column="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqMode" column="REQ_MODE"/>
		<result property="mbiRefNo" column="MBI_REF_NO"/>
		<result property="currencyCd" column="CURRENCY_CD"/>
		<result property="currencyRt" column="CURRENCY_RT"/>
		<result property="govtTag" column="GOVT_TAG"/>
		<result property="indicativeTag" column="INDICATIVE_TAG"/>
		<result property="openCoverTag" column="OPEN_COVER_TAG"/>
		<result property="ocQuoteId" column="OC_QUOTE_ID"/>
		<result property="openCoverQuotationNo" column="OC_QUOTE_NO"/>
		<result property="declarationTag" column="DECLARATION_TAG"/>
		<result property="preparedBy" column="PREPARED_BY"/>
		<result property="approvedBy" column="APPROVED_BY"/>
		<result property="printedBy" column="PRINTED_BY"/>
		<result property="printDate" column="PRINT_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="openingParag" column="OPENING_PARAG"/>
		<result property="closingParag" column="CLOSING_PARAG"/>
		<result property="reasonCd" column="REASON_CD"/>
		<result property="reasonDesc" column="REF_CODE_DESCRIPTION"/>
		<result property="createUser" column="QUOTE_CREATE_USER"/>
		<result property="createDate" column="QUOTE_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="QUOTE_UPDATE_USER"/>
		<result property="updateDate" column="QUOTE_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="project" resultMap="project"></association>
		<association property="attachmentsList" resultMap="attachment"></association>
		<association property="competitionsList" resultMap="competition"></association>
		<association property="alop" resultMap="alopMap"></association>
		<association property="otherRatesList" resultMap="otherRates"></association>
		<association property="optionsList" resultMap="options"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationOc" id="quotationOcForAttachmentMap">
		<result property="quoteIdOc"		column="QUOTE_ID_OC"/>
		<result property="openQuotationNo"	column="QUOTE_NO_OC"/>
		<association property="attachmentOc"  resultMap="attachmentOcMap" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.AttachmentOc" id="attachmentOcMap">
		<result property="fileNo"			column="FILE_NO"/>
		<result property="fileName"			column="FILE_NAME"/>
		<result property="description"		column="DESCRIPTION"/>
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<select id="retrieveQuoteAttachmentOc" resultMap="quotationOcForAttachmentMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_NDC.retrieve_quote_attachment_oc(#{quoteIdOc, jdbcType=VARCHAR}, 
																		 #{openQuotationNo, jdbcType=VARCHAR},
																		 #{position, jdbcType=VARCHAR}, 
																		 #{count, jdbcType=VARCHAR}, 
																		 #{sortKey, jdbcType=VARCHAR}, 
																		 #{order, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationForCompetitionMap">
		 <result property="quoteId"				 column="QUOTE_ID"/>
		 <result property="quotationNo"			 column="QUOTE_NO"/>
		 <association property="competitionsList"	 resultMap="competitionMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Competition" id="competitionMap">
		 <result property="quoteId"			 	 column="QUOTE_ID"/>
		 <result property="adviceNo"			 column="ADVICE_NO"/>
		 <result property="cedingId"			 column="CEDING_ID"/>
		 <result property="cedingName"			 column="CEDING_NAME"/>
		 <result property="cedingRepId"		 	 column="CEDING_REP_ID"/>
		 <result property="cedingRepName"		 column="CEDING_REP_NAME"/>
		 <result property="position"		 	 column="POSITION"/>
		 <result property="option"			 	 column="OPTN"/>
		 <result property="wordings"			 column="WORDINGS"/>
		 <result property="createUser"		 	 column="CREATE_USER"/>
		 <result property="createDate"		 	 column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		 <result property="updateUser"		 	 column="UPDATE_USER"/>
		 <result property="updateDate"		 	 column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<select id="retrieveQuoteCompetition" resultMap="quotationForCompetitionMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_NDC.retrieve_quote_competition(#{quoteId, jdbcType=VARCHAR}, 
																	   #{quotationNo, jdbcType=VARCHAR}, 
																	   #{position, jdbcType=VARCHAR}, 
																	   #{count, jdbcType=VARCHAR}, 
																	   #{sortKey, jdbcType=VARCHAR}, 
																	   #{order, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationOc" id="quotationOcForCoverageMap">
		<result property="quoteIdOc"		column="QUOTE_ID_OC"/>
		<result property="openQuotationNo"	column="QUOTE_NO_OC"/>
		<association property="projectOc"  resultMap="projectOcMap" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.CoverageOc" id="coverageOcMap">
		<result property="riskId"			column="RISK_ID"/>
		<result property="maxSi"			column="MAX_SI"/>
		<result property="currencyCd"		column="CURRENCY_CD"/>
		<result property="currencyRt"		column="CURRENCY_RT"/>
		<result property="pctShare"			column="PCT_SHARE"/>
		<result property="pctPml"			column="PCT_PML"/>
		<result property="totalValue"		column="TOTAL_VALUE"/>
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<select id="retrieveQuoteCoverageOc" resultMap="quotationOcForCoverageMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_NDC.retrieve_quote_coverage_oc(#{quoteIdOc, jdbcType=VARCHAR}, 
																	   #{openQuotationNo, jdbcType=VARCHAR},
																	   #{position, jdbcType=VARCHAR}, 
																	   #{count, jdbcType=VARCHAR}, 
																	   #{sortKey, jdbcType=VARCHAR}, 
																	   #{order, jdbcType=VARCHAR}))
	</select>
	
	<select id="retrieveQuoteCoverage" resultMap="quotation" parameterType="java.util.Map">
		SELECT * FROM TABLE(ETS_QUOTE_PKG_PCPCR.retrieve_quote_coverage(#{quoteId, jdbcType=VARCHAR},#{quotationNo, jdbcType=VARCHAR},'',1,'',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Attachment" id="attachment">
		<result property="fileNo" column="FILE_NO" />
		<result property="fileName" column="FILE_NAME" />
		<result property="description" column="DESCRIPTION" />
		<result property="createUser" column="ATT_CREATE_USER" />
		<result property="createDate" column="ATT_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="ATT_UPDATE_USER" />
		<result property="updateDate" column="ATT_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.EndorsementsOc" id="endorsementsOc">
		<result property="endtCd" column="ENDT_CD"/>
		<result property="endtTitle" column="ENDT_TITLE"/>
		<result property="remarks" column="REMARKS"/>
		<result property="createUser" column="ENDT_CREATE_USER"/>
		<result property="createDate" column="ENDT_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="ENDT_UPDATE_USER"/>
		<result property="updateDate" column="ENDT_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.CoverageOc" id="coverageOc">
		<result property="riskId" column="COV_RISK_ID"/>
		<result property="maxSi" column="COV_MAX_SI"/>
		<result property="currencyCd" column="COVERRAGE_CURRENCY_CD"/>
		<result property="currencyRt" column="COVERAGE_CURRENCY_RT"/>
		<result property="pctShare" column="COV_PCT_SHARE"/>
		<result property="pctPml" column="PCT_PML"/>
		<result property="totalValue" column="COV_TOTAL_VALUE"/>
		<result property="createUser" column="COV_CREATE_USER"/>
		<result property="createDate" column="COV_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="COV_UPDATE_USER"/>
		<result property="updateDate" column="COV_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.ProjectOc" id="projectOc">
		<result property="projId" column="PROJ_ID"/>
		<result property="projDesc" column="PROJ_DESC"/>
		<result property="riskId" column="PROJ_RISK_ID"/>
		<result property="maxSi" column="PROJ_MAX_SI"/>
		<result property="pctShare" column="PROJ_PCT_SHARE"/>
		<result property="totalValue" column="PROJ_TOTAL_VALUE"/>
		<result property="objectId" column="OBJECT_ID"/>
		<result property="site" column="SITE"/>
		<result property="duration" column="DURATION"/>
		<result property="testing" column="TESTING"/>
		<result property="createUser" column="PRJ_CREATE_USER"/>
		<result property="createDate" column="PRJ_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="PRJ_UPDATE_USER"/>
		<result property="updateDate" column="PRJ_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="coverageOc" resultMap="coverageOc"></association>
		<association property="endorsementsOc" resultMap="endorsementsOc"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.QuotationOc" id="quotationOc">
		<result property="quoteIdOc" column="QUOTE_ID_OC"/>
		<result property="openQuotationNo" column="QUOTE_NO"/>
		<result property="lineCd" column="LINE_CD"/>
		<result property="lineCdDesc" column="LINE_CD_DESCRIPTION"/>
		<result property="year" column="YEAR"/>
		<result property="seqNo" column="SEQ_NO"/>
		<result property="sevNo" column="REV_NO"/>
		<result property="cedingId" column="CEDING_ID"/>
		<result property="cessionId" column="CESSION_ID"/>
		<result property="cedingName" column="CEDING_NAME"/>
		<result property="lineClassCd" column="LINE_CLASS_CD"/>
		<result property="lineClassDesc" column="LINE_CLASS_DESC"/>
		<result property="refPolNo" column="REF_POL_NO"/>
		<result property="policyIdOc" column="POLICY_ID_OC"/>
		<result property="openPolicyNo" column="POLICY_NO"/>
		<result property="prinId" column="PRIN_ID"/>
		<result property="principalName" column="PRINCIPAL_NAME"/>
		<result property="contractorId" column="CONTRACTOR_ID"/>
		<result property="contractorName" column="CONTRACTOR_NAME"/>
		<result property="insuredDesc" column="INSURED_DESC"/>
		<result property="status" column="STATUS"/>
		<result property="reinsurerId" column="REINSURER_ID"/>
		<result property="reinsurerName" column="REINSURER_NAME"/>
		<result property="intmId" column="INTM_ID"/>
		<result property="intmName" column="INTM_NAME"/>
		<result property="issueDate" column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="expiryDate" column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqBy" column="REQ_BY"/>
		<result property="reqDate" column="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="reqMode" column="REQ_MODE"/>
		<result property="currencyCd" column="QUOTE_CURRENCY_CD"/>
		<result property="currencyRt" column="QUOTE_CURRENCY_RT"/>
		<result property="govtTag" column="GOVT_TAG"/>
		<result property="indicativeTag" column="INDICATIVE_TAG"/>
		<result property="preparedBy" column="PREPARED_BY"/>
		<result property="approvedBy" column="APPROVED_BY"/>
		<result property="printedBy" column="PRINTED_BY"/>
		<result property="printDate" column="PRINT_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="openingParag" column="OPENING_PARAG"/>
		<result property="closingParag" column="CLOSING_PARAG"/>
		<result property="reasonCd" column="REASON_CD"/>
		<result property="reasonDesc" column="REASON_DESCRIPTION"/>
		<result property="createUser" column="QUO_CREATE_USER"/>
		<result property="createDate" column="QUO_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="QUO_UPDATE_USER"/>
		<result property="updateDate" column="QUO_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="attachment" resultMap="attachment"></association>
	</resultMap>
	
	<select id="retrieveQuoteDetailsOc" resultMap="quotationOc" parameterType="java.util.Map">
		SELECT * FROM TABLE(ETS_QUOTE_PKG_PCPCR.retrieve_quote_details_oc(#{openQuotationNo, jdbcType=VARCHAR},#{quoteIdOc, jdbcType=VARCHAR},'',1,'',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Competition" id="competition">
		<result property="adviceNo" column="ADVICE_NO"/>
		<result property="cedingId" column="COMP_CEDING_ID"/>
		<result property="cedingRepId" column="CEDING_REP_ID"/>
		<result property="option" column="OPTN"/>
		<result property="wordings" column="WORDINGS"/>
		<result property="createUser" column="COMP_CREATE_USER"/>
		<result property="createDate" column="COMP_CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="COMP_UPDATE_USER"/>
		<result property="updateDate" column="COMP_UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>


	<select id="retrieveQuoteHoldCover" resultMap="quotationMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_JAP.retrieve_quote_hold_cover(#{holdCoverId},#{holdCoverNo},null,null,null,null))
	</select>
	
	<select id="retrieveQuoteGeneralInfoOc" resultMap="quotationOcMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_JAP.retrieve_quote_gen_info_oc(#{quoteIdOc},#{openQuotationNo},null,null,null,null))
	</select>
	
	<select id="retrieveQuoteHoldCoverListing" resultMap="quotationListingMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_JAP.retrieve_quote_hold_cover_list(#{quotationNo},
																		      #{status},
																		      #{cedingName},
																		      #{holdCoverNo},
																		      #{riskName},
																		      #{insuredDesc},
																			  #{periodFrom},
																			  #{periodTo},
																			  #{compRefHoldCovNo},
																			  #{reqBy},
																			  #{reqDate},
																			  #{expiringInDays},
																			  '',
																			  '',
																			  '',
																			  ''))
			<!-- SELECT * FROM TABLE(ETS_QUOTE_PKG_JAP.retrieve_quote_hold_cover_list(#{quotationNo, jdbcType=VARCHAR},
																		      #{status},
																		      #{cedingName, jdbcType=VARCHAR},
																		      #{holdCoverNo, jdbcType=VARCHAR},
																		      #{riskName, jdbcType=VARCHAR},
																		      #{insuredDesc, jdbcType=VARCHAR},
																			  #{periodFrom, jdbcType=DATE},
																			  #{periodTo, jdbcType=DATE},
																			  #{compRefHoldCovNo},
																			  #{reqBy},
																			  #{reqDate, jdbcType=DATE},
																			  #{expiringInDays},
																			  '',
																			  '',
																			  '',
																			  '')) -->
			<!-- SELECT * FROM TABLE(ETS_QUOTE_PKG_JAP_SPL.retrieve_quote_hold_cover_list(
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'', 
																						'')) -->
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.quote.AlopItem" id="alopItem">
		<result property="itemNo" column="ITEM_NO"/>
		<result property="quantity" column="QUANTITY"/>
		<result property="description" column="ALOP_ITEM_DESCRIPTION"/>
		<result property="importance" column="IMPORTANCE"/>
		<result property="lossMin" column="LOSS_MIN"/>
		<result property="createUser" column="ALOP_ITEM_CREATE_USER"/>
		<result property="createDate" column="ALOP_ITEM_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="ALOP_ITEM_UPDATE_USER"/>
		<result property="updateDate" column="ALOP_ITEM_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Alop" id="alopMap">
		<result property="alopId" column="ALOP_ID"/>
		<result property="insuredId" column="INS_ID"/>
		<result property="insuredName" column="INSURED_NAME"/>
		<result property="insuredDesc" column="INSURED_DESC_ALOP"/>
		<result property="address" column="ADDRESS"/>
		<result property="insuredBusiness" column="INS_BUSINESS"/>
		<association property="alopDetails" resultMap="alopDetailsMap"></association>
		<association property="alopItemList" resultMap="alopItemMap"></association>
        <!-- <association property="alopItem" resultMap="alopItemMap"></association> -->
	</resultMap>
		
	<resultMap type="ph.cpi.rest.api.model.quote.AlopDetails" id="alopDetailsMap">
		<result property="annSi" column="ANN_SI"/>
		<result property="maxIndemPdSi" column="MAX_INDEM_PD_SI"/>
		<result property="issueDate" column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="expiryDate" column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="maxIndemPd" column="MAX_INDEM_PD"/>
		<result property="indemFromDate" column="INDEM_FROM_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="timeExc" column="TIME_EXC"/>
		<result property="repInterval" column="REP_INTERVAL"/>
		<result property="createUser" column="CREATE_USER_ALOP"/>
		<result property="createDate" column="CREATE_DATE_ALOP" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER_ALOP"/>
		<result property="updateDate" column="UPDATE_DATE_ALOP" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="optionId"   column="OPTION_ID"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.OtherRates" id="otherRates">
		<result property="coverCd" column="OTHER_RATES_COVER_CD"/>
		<result property="coverCdDesc" column="SECTION_COVERS_DESCRIPTION"/>
		<result property="rate" column="RATE"/>
		<result property="amount" column="AMOUNT"/>
		<result property="createUser" column="OTHER_RATES_CREATE_USER"/>
		<result property="createDate" column="OTHER_RATES_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="OTHER_RATES_UPDATE_USER"/>
		<result property="updateDate" column="OTHER_RATES_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Endorsments" id="endorsments">
		<result property="endtCd" column="ENDT_CD"/>
		<result property="endtTitle" column="ENDT_TITLE"/>
		<result property="remarks" column="ENDT_REMARKS"/>
		<result property="createUser" column="ENDT_CREATE_USER"/>
		<result property="createDate" column="ENDT_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="ENDT_UPDATE_USER"/>
		<result property="updateDate" column="ENDT_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Deductibles" id="deductiblesM">
		<result property="deductibleCd" column="DEDUCTIBLE_CD"/>
		<result property="deductibleTitle" column="DEDUCTIBLE_TITLE"/>
		<result property="deductibleRt" column="DEDUCTIBLE_RT"/>
		<result property="deductibleAmt" column="DEDUCTIBLE_AMT"/>
		<result property="deductibleTxt" column="DEDUCTIBLE_TXT"/>
		<result property="createUser" column="DEDUCTIBLES_CREATE_USER"/>
		<result property="createDate" column="DEDUCTIBLES_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="DEDUCTIBLES_UPDATE_USER"/>
		<result property="updateDate" column="DEDUCTIBLES_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.quote.Options" id="options">
		<result property="optionId" column="OPTION_ID"/>
		<result property="optioRt" column="OPTION_RT"/>
		<result property="condition" column="CONDITION"/>
		<result property="commRtQuota" column="COMM_RT_QUOTA"/>
		<result property="commRtSurplus" column="COMM_RT_SURPLUS"/>
		<result property="commRtFac" column="COMM_RT_FAC"/>
		<result property="createUser" column="OPTIONS_CREATE_USER"/>
		<result property="createDate" column="OPTIONS_CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="OPTIONS_UPDATE_USER"/>
		<result property="updateDate" column="OPTIONS_UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<association property="endorsments" resultMap="endorsments"></association>
		<association property="deductiblesList" resultMap="deductiblesM"></association>
	</resultMap>
	
	<select id="retrieveQuoteDetails" resultMap="quotation" parameterType="java.util.Map">
		SELECT * FROM TABLE(ETS_QUOTE_PKG_PCPCR.retrieve_quote_details(#{quoteId, jdbcType=VARCHAR},#{quotationNo, jdbcType=VARCHAR},'',1,'',''))
	</select>
	
	<select id="retrieveQuoteListingOc" resultMap="retrieveQuoteListingOcMap" parameterType="java.util.Map">
		<!-- SELECT * FROM ETS_QUOTE_PKG_MBM.retrieve_quote_listing_oc(#{quotationNo},#{cessionDesc},#{lineClassCdDesc},#{status},#{cedingName},#{principalName},#{contractorName},#{insuredDesc},#{riskName},#{objectDesc},#{site},#{policyNo},#{currencyCd},#{issueDate},#{expiryDate},#{reqBy},#{createUser},#{position},#{count},#{sortKey},#{order}) -->
		SELECT * FROM TABLE(ETS_QUOTE_PKG_MBM.retrieve_quote_listing_oc(#{quotationNo},#{cessionDesc},#{lineClassCdDesc},#{status},#{cedingName},#{principalName},#{contractorName},#{insuredDesc},#{riskName},#{objectDesc},#{site},#{policyNo},#{currencyCd},#{issueDate},#{expiryDate},#{reqBy},#{createUser},null,null,null,null))
	</select>
	
	<select id="retrieveQuoteOption" resultMap="retrieveQuoteOptionMap" parameterType="java.util.Map">
		<!-- SELECT * FROM TABLE(ETS_QUOTE_PKG_MBM.retrieve_quote_option(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},null,null,null,null)) -->
		SELECT * FROM TABLE(ETS_QUOTE_PKG_MBM.retrieve_quote_option(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},null,null,null,null))
	</select>
	
<!-- 	<resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationMap">
        <result property="quoteId" 		column="QUOTE_ID"/>
        <result property="quotationNo" 	column="QUOTATION_NO"/>
        <association property="alop" resultMap="alopMap"></association>
	</resultMap> --> <!-- REMOVED DUPLICATE ID-->
	
<!-- 	<resultMap type="ph.cpi.rest.api.model.quote.Alop" id="alopMap">
        <result property="alopId" column="ALOP_ID"/>
        <association property="alopItem" resultMap="alopItemMap"></association>
	</resultMap> --> <!-- REMOVED DUPLICATE ID -->
	
	<resultMap type="ph.cpi.rest.api.model.quote.AlopItem" id="alopItemMap">
        <result property="itemNo" 		column="ITEM_NO"/>
        <result property="quantity" 	column="QUANTITY"/>
        <result property="description" 	column="DESCRIPTION"/>
        <result property="importance" 	column="IMPORTANCE"/>
        <result property="lossMin" 		column="LOSS_MIN"/>
        <result property="createUser" 	column="CREATE_USER"/>
        <result property="createDate" 	column="CREATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
        <result property="updateUser" 	column="UPDATE_USER"/>
        <result property="updateDate" 	column="UPDATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	
        
    <select id="retrieveQuoteAlopItem" resultMap="quotation" parameterType="java.util.Map">
            SELECT * FROM TABLE(ETS_QUOTE_PKG_EJVA.retrieve_quote_alop_item(#{quoteId, jdbcType=VARCHAR},#{quotationNo, jdbcType=VARCHAR},'',0,'',''))
    </select>
    
    
    <!-- <resultMap type="ph.cpi.rest.api.model.quote.Quotation" id="quotationMapAlop">
        <result property="quoteId" 		column="QUOTE_ID"/>
        <result property="quotationNo" 	column="QUOTATION_NO"/>
        <association property="alop" resultMap="AlopMap"></association>
	</resultMap>
	
	
      <resultMap type="ph.cpi.rest.api.model.quote.Alop" id="AlopMap">
    	<result property="alopId" 			column="ALOP_ID"/>
		<result property="insuredId" 		column="INS_ID"/>
		<result property="insuredName" 		column="INSURED_NAME"/>
		<result property="insuredDesc" 		column="INSURED_DESC"/>
		<result property="address" 			column="ADDRESS"/>
		<result property="insuredBusiness" 	column="INS_BUSINESS"/>
		<result property="annSi" 			column="ANN_SI"/>
		<result property="maxIndemPdSi" 	column="MAX_INDEM_PD_SI"/>
		<result property="issueDate" 		column="ISSUE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="expiryDate" 		column="EXPIRY_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="maxIndemPd" 		column="MAX_INDEM_PD"/>
		<result property="indemFromDate" 	column="INDEM_FROM_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="timeExc" 			column="TIME_EXC"/>
		<result property="repInterval" 		column="REP_INTERVAL"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER" />
		<result property="updateDate" 		column="UPDATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
    	<result property="optionId" 		column="OPTION_ID"/>
    </resultMap>  -->
    
    <!-- <resultMap type="AliasSaveQuoteEndorsements" id="aliasEndorsements">
		<result property="endtCd" 			column="ENDT_CD"/> 
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
    </resultMap> -->
    
    <select id="retrieveQuoteAlop" resultMap="quotation" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG_EJVA.retrieve_quote_alop(#{quoteId, jdbcType=VARCHAR},#{quotationNo, jdbcType=VARCHAR},null,null,null,null))
    </select>
  

	<update id="saveQuoteAttachmentMap" parameterType="java.util.Map">
		BEGIN
		   <foreach collection="saveAttachmentsList" item="attachment">
		   	   ETS_QUOTE_PKG_PCPCR.save_quote_attachment
			   (#{quoteId},#{attachment.fileNo, jdbcType=VARCHAR},#{attachment.fileName},#{attachment.description},#{attachment.createUser},
			   CAST(to_timestamp(#{attachment.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),#{attachment.updateUser},
			   CAST(to_timestamp(#{attachment.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			   
		   </foreach>
		   <foreach collection="deleteAttachmentsList" item="attachment">
		   		ETS_QUOTE_PKG_PCPCR.delete_quote_attachment(#{quoteId},#{attachment.fileNo, jdbcType=VARCHAR});
		   </foreach>
		END;
	</update>
	
	<update id="saveQuoteAlopMap" parameterType="java.util.Map">
		BEGIN
		   <foreach collection="alopDetails" item="alopDetails">
		   	   ETS_QUOTE_PKG_PCPCR.save_quote_alop(#{quoteId},#{alopDetails.optionId, jdbcType=VARCHAR},#{alopId, jdbcType=VARCHAR},#{insuredId},#{insuredDesc},#{address},#{insuredBusiness},#{alopDetails.annSi},#{alopDetails.maxIndemPdSi},
			   CAST(to_timestamp(#{alopDetails.issueDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			   CAST(to_timestamp(#{alopDetails.expiryDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),#{alopDetails.maxIndemPd},
			   CAST(to_timestamp(#{alopDetails.indemFromDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),#{alopDetails.timeExc},#{alopDetails.repInterval},#{alopDetails.createUser},
			   CAST(to_timestamp(#{alopDetails.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),#{alopDetails.updateUser},
			   CAST(to_timestamp(#{alopDetails.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
		   </foreach>
		END;
	</update>
	
	<update id="saveQuoteAloItempMap" parameterType="java.util.Map">
		BEGIN
			<foreach collection="saveAlopItemsList" item="alopItem">
		    	ETS_QUOTE_PKG_PCPCR.save_quote_alopItem
		    	(#{quoteId},#{alopId},#{alopItem.itemNo, jdbcType=VARCHAR},#{alopItem.quantity},
		    	#{alopItem.description},#{alopItem.importance, jdbcType=VARCHAR},#{alopItem.lossMin, jdbcType=VARCHAR},
		    	#{alopItem.createUser},
		    	CAST(to_timestamp(#{alopItem.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
		    	#{alopItem.updateUser},CAST(to_timestamp(#{alopItem.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
			</foreach>
			<foreach collection="deleteAlopItemsList" item="alopItem">
				BEGIN
    				ETS_QUOTE_PKG_PCPCR.delete_quote_alop_item(#{quoteId},#{alopId},#{alopItem.itemNo, jdbcType=VARCHAR});
				END;
			</foreach>
		END;
	</update>
	
	<update id="saveQuoteGeneralInfo" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			ETS_QUOTE_PKG_MBM.save_quote_general_info(
				#{quotationNo, mode=OUT, jdbcType=VARCHAR},
				#{outQuoteId, mode=OUT, jdbcType=INTEGER},
				#{savingType},
				#{quoteId, jdbcType=INTEGER},#{lineCd},#{quoteYear, jdbcType=INTEGER},#{quoteSeqNo, jdbcType=INTEGER},
				#{quoteRevNo, jdbcType=INTEGER},#{cedingId, jdbcType=INTEGER},#{cessionId, jdbcType=INTEGER},#{lineClassCd},
				#{prinId, jdbcType=INTEGER},#{contractorId, jdbcType=INTEGER},#{insuredDesc},#{policyId, jdbcType=INTEGER},
				#{status},#{reinsurerId, jdbcType=INTEGER},#{intmId, jdbcType=INTEGER},
				CAST(to_timestamp(#{issueDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				CAST(to_timestamp(#{expiryDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{reqBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{reqDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{reqMode, jdbcType=VARCHAR},
				#{mbiRefNo, jdbcType=INTEGER},#{currencyCd},#{currencyRt, jdbcType=FLOAT},#{govtTag},#{indicativeTag},
				#{openCoverTag},#{declarationTag},#{preparedBy, jdbcType=VARCHAR},#{approvedBy, jdbcType=VARCHAR},#{printedBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{printDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{openingParag, jdbcType=VARCHAR},#{closingParag, jdbcType=VARCHAR},#{createUser},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{projId, jdbcType=INTEGER},#{projDesc},#{riskId, jdbcType=INTEGER},
				#{totalSi, jdbcType=DECIMAL},#{pctShare, jdbcType=FLOAT},#{totalValue, jdbcType=DECIMAL},#{objectId, jdbcType=INTEGER},
				#{site},#{duration, jdbcType=VARCHAR},#{testing, jdbcType=VARCHAR},#{ipl, jdbcType=INTEGER},#{timeExc, jdbcType=INTEGER},#{noClaimPd, jdbcType=INTEGER},
				#{prjCreateUser},
				CAST(to_timestamp(#{prjCreateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{prjUpdateUser},
				CAST(to_timestamp(#{prjUpdateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>

	<update id="saveQuoteAttachmentOcMap" parameterType="java.util.Map">
		BEGIN
		   <foreach collection="saveAttachmentsOcList" item="attachmentOc">
		   	   ETS_QUOTE_PKG_NDC.save_quote_attachment_oc
			   (#{quoteIdOc},#{attachmentOc.fileNo},#{attachmentOc.fileName},#{attachmentOc.description},#{attachmentOc.createUser},
			   CAST(to_timestamp(#{attachmentOc.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{attachmentOc.updateUser},
			   CAST(to_timestamp(#{attachmentOc.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		    </foreach>
		    <foreach collection="deleteAttachmentsOcList" item="attachment">
		   		ETS_QUOTE_PKG_NDC.delete_quote_attachment_oc(#{quoteIdOc},#{attachment.fileNo, jdbcType=VARCHAR});
		   </foreach>
		END;
	</update>
	
	<update id="saveQuoteCoverageMap" parameterType="java.util.Map">
		BEGIN
			   ETS_QUOTE_PKG_EJVA.save_quote_coverage(#{quoteId},#{projId},#{riskId},#{sectionISi},#{sectionIISi},#{sectionIIISi},#{totalSi},#{currencyCd},#{currencyRt},#{remarks},#{createUser},
			   CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{updateUser},
			   SYSDATE);
			   
		   <foreach collection="deleteSectionCovers" item="sectioncovers">
		   	   ETS_QUOTE_PKG_EJVA.delete_quote_coverage(#{quoteId,jdbcType=INTEGER},#{projId,jdbcType=INTEGER},#{riskId,jdbcType=INTEGER},#{sectioncovers.lineCd},#{sectioncovers.section},#{sectioncovers.coverCd});
		   </foreach>
		   
		   <foreach collection="saveSectionCovers" item="sectioncovers">
		   	   ETS_QUOTE_PKG_EJVA.save_quote_section_covers
			   (#{quoteId},#{projId},#{riskId},#{sectioncovers.lineCd},#{sectioncovers.section},#{sectioncovers.coverCd},#{sectioncovers.bulletNo},#{sectioncovers.sumInsured},
			   #{sectioncovers.addSi},#{sectioncovers.createUser},
			   CAST(to_timestamp(#{sectioncovers.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{sectioncovers.updateUser},
			   SYSDATE);
		   </foreach>
		   
		END;
	</update>
	
	<update id="saveQuoteCompetitionMap" parameterType="java.util.Map">
		BEGIN
			<foreach collection="competitionsList" item="competition">
		   	  
				   ETS_QUOTE_PKG_NDC.save_quote_competition(#{competition.quoteId},#{competition.adviceNo},#{competition.cedingId},#{competition.cedingRepId},#{competition.option},#{competition.wordings},#{competition.createUser},
				   CAST(to_timestamp(#{competition.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{competition.updateUser},
				   CAST(to_timestamp(#{competition.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
			  
		    </foreach>
	    END;
		<!-- BEGIN
		   ETS_QUOTE_PKG_NDC.save_quote_competition(#{quoteId},#{adviceNo},#{cedingId},#{cedingRepId},#{option},#{wordings},#{createUser},
		   CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{updateUser},
		   CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		END; -->
	</update>
	
	<update id="saveQuoteCoverageOcMap" parameterType="java.util.Map">
		BEGIN
		   ETS_QUOTE_PKG_EJVA.save_quote_coverage_oc(#{quoteIdOc},#{projId},#{riskId},#{maxSi},#{currencyCd},#{currencyRt},#{pctShare},#{pctPml},#{totalValue},#{createUser},
		   CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{updateUser},
		   CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		END;
	</update> 
	
	<update id="saveQuoteHoldCover" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			ETS_QUOTE_PKG_JAP.save_quote_hold_cover(
				#{holdCoverNo,mode=OUT,jdbcType=VARCHAR},
				#{quoteId,jdbcType=INTEGER},#{holdCoverId,jdbcType=INTEGER},#{lineCd,jdbcType=VARCHAR},
				#{holdCoverYear,jdbcType=VARCHAR},#{holdCoverSeqNo,jdbcType=VARCHAR},
				#{holdCoverRevNo,jdbcType=VARCHAR},
				CAST(to_timestamp(#{periodFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				CAST(to_timestamp(#{periodTo}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{compRefHoldCovNo,jdbcType=VARCHAR},#{status,jdbcType=VARCHAR},
				#{reqBy,jdbcType=VARCHAR},
				CAST(to_timestamp(#{reqDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{preparedBy,jdbcType=VARCHAR},
				#{approvedBy,jdbcType=VARCHAR},#{createUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>

	<!-- <update id="saveQuoteOptionMap" parameterType="java.util.Map">
		BEGIN
		   <foreach collection="deductibles" item="deductibles">
		   	   ETS_QUOTE_PKG_ETC.save_quote_option
			   (#{quoteId},
			   #{optionId},
			   #{optionRt},
			   #{condition},
			   #{commRtQuota},
			   #{commRtSurplus},
			   #{commRtFac},
			   #{createUser},
			   CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
			   #{updateUser},
			   CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
			   #{deductibles.deductibleTitle},
			   #{deductibles.deductibleRt},
			   #{deductibles.deductibleAmt},
			   #{deductibles.deductibleTxt},
			   #{deductibles.createUser},
			   CAST(to_timestamp(#{deductibles.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
			   #{deductibles.updateUser},
			   CAST(to_timestamp(#{deductibles.updateDate},'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		   </foreach>
		END;
	</update> -->
	
	<update id="saveQuoteOptionMap" parameterType="java.util.Map">
		BEGIN
			<foreach collection="deleteQuoteOptionsList" item="quoteOption">
		   		ETS_QUOTE_PKG_ETC.delete_quote_option(#{quoteId},#{quoteOption.optionId,jdbcType=VARCHAR});
		   </foreach>
		   <foreach collection="saveQuoteOptionsList" item="quoteOption">
		   	   ETS_QUOTE_PKG_ETC.save_q_option(#{quoteId},#{quoteOption.optionId,jdbcType=VARCHAR},#{quoteOption.optionRt},
		   	   #{quoteOption.condition,jdbcType=VARCHAR},#{quoteOption.commRtQuota},#{quoteOption.commRtSurplus},
		   	   #{quoteOption.commRtFac},#{quoteOption.createUser},
		   	   CAST(to_timestamp(#{quoteOption.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
		   	   #{quoteOption.updateUser},CAST(to_timestamp(#{quoteOption.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		   </foreach>
		END;
	</update>
	
	<update id="saveQuoteDeductiblesMap" parameterType="java.util.Map">
		BEGIN
			<foreach collection="deleteDeductibleList" item="deductible">
		   		ETS_QUOTE_PKG_ETC.delete_q_deductible(#{quoteId},#{optionId},#{deductible.coverCd},#{deductible.endtCd},#{deductible.deductibleCd,jdbcType=VARCHAR});
		   </foreach>
			<foreach collection="saveDeductibleList" item="deductible">
			   		ETS_QUOTE_PKG_ETC.save_q_deductible(
			   			#{quoteId},#{optionId},#{deductible.coverCd},#{deductible.endtCd},#{deductible.deductibleCd},#{deductible.deductibleRt},#{deductible.deductibleAmt,jdbcType=VARCHAR},#{deductible.deductibleTxt},#{deductible.createUser},CAST(to_timestamp(#{deductible.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{deductible.updateUser},CAST(to_timestamp(#{deductible.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
			   		);
			</foreach>
	   END;
	</update>
	
	
	
	<update id="saveQuoteEndorsements" parameterType="java.util.Map">
		BEGIN
			<foreach collection="saveEndorsements" item="endo">
				ETS_QUOTE_PKG_JAP.save_quote_endorsements(
					#{quoteId,jdbcType=INTEGER},#{optionId,jdbcType=INTEGER},#{endo.endtCd,jdbcType=INTEGER},
					#{endo.remarks,jdbcType=VARCHAR},#{endo.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{endo.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
					#{endo.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{endo.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
				);
			</foreach>
			<foreach collection="deleteEndorsements" item="endo">
				ETS_QUOTE_PKG_JAP.delete_quote_endorsements(#{quoteId,jdbcType=INTEGER},#{optionId,jdbcType=INTEGER},#{endo.endtCd,jdbcType=INTEGER});
			</foreach>
		END;
	</update>
	
	<update id="saveQuoteEndorsementsOc" parameterType="java.util.Map">
		BEGIN
			<foreach collection="saveEndorsementsOc" item="endoOc">
				ETS_QUOTE_PKG_JAP.save_quote_endorsements_oc(
					#{quoteIdOc,jdbcType=INTEGER},#{endoOc.endtCd,jdbcType=INTEGER},
					#{endoOc.remarks,jdbcType=VARCHAR},#{endoOc.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{endoOc.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
					#{endoOc.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{endoOc.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
				);
			</foreach>
			<foreach collection="deleteEndorsementsOc" item="endoOc">
				ETS_QUOTE_PKG_JAP.delete_quote_endorsements_oc(#{quoteIdOc,jdbcType=INTEGER},#{endoOc.endtCd,jdbcType=INTEGER});
			</foreach>
		END;
	</update>
	
	<update id="saveQuoteOtherRatesMap" parameterType="java.util.Map">
		BEGIN
		<foreach collection="deleteOtherRates" item="otherRates">
		 	ETS_QUOTE_PKG_ETC.delete_quote_other_rates(
		 		#{quoteId,jdbcType=INTEGER},
				#{otherRates.coverCd,jdbcType=VARCHAR}
		 	);
		 </foreach>
		 <foreach collection="otherRates" item="otherRates">
			ETS_QUOTE_PKG_ETC.save_q_other_rates(
				#{quoteId,jdbcType=INTEGER},
				#{otherRates.coverCd,jdbcType=VARCHAR},
				#{otherRates.rate,jdbcType=VARCHAR},
				#{otherRates.amount,jdbcType=VARCHAR},
				#{otherRates.createUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{otherRates.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
				#{otherRates.updateUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{otherRates.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
			);
		 </foreach>
		END;
	</update> 
	
	<update id="saveQuoteChangeQuoteStatusMap" parameterType="java.util.Map">
		BEGIN
		 <foreach collection="quoteList" item="quote">
		 	ETS_QUOTE_PKG_EJVA.save_quote_change_quote_status(
		 		#{quote.quoteId},#{status},#{reasonCd}
		 	);
		 </foreach>
		END;
	</update> 
	
	<update id="saveQuoteGeneralInfoOc" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			ETS_QUOTE_PKG_MBM.save_quote_general_info_oc(
				#{openQuotationNo, mode=OUT, jdbcType=VARCHAR},
				#{outQuoteIdOc, mode=OUT, jdbcType=INTEGER},
				#{quoteIdOc, jdbcType=INTEGER},
				#{lineCd},
				#{year, jdbcType=INTEGER},
				#{seqNo, jdbcType=INTEGER},
				#{revNo, jdbcType=INTEGER},
				#{cedingId, jdbcType=INTEGER},
				#{cessionId, jdbcType=INTEGER},
				#{lineClassCd},
				#{refPolNo, jdbcType=VARCHAR},
				#{policyIdOc, jdbcType=VARCHAR},
				#{prinId, jdbcType=INTEGER},
				#{contractorId, jdbcType=INTEGER},
				#{insuredDesc},
				#{status},
				#{reinsurerId, jdbcType=INTEGER},
				#{intmId, jdbcType=INTEGER},
				CAST(to_timestamp(#{issueDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				CAST(to_timestamp(#{expiryDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{reqBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{reqDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{reqMode, jdbcType=VARCHAR},
				#{currencyCd},
				#{currencyRt, jdbcType=FLOAT},
				#{govtTag},
				#{indicativeTag},
				#{preparedBy, jdbcType=VARCHAR},
				#{approvedBy, jdbcType=VARCHAR},
				#{printedBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{printDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{openingParag, jdbcType=VARCHAR},
				#{closingParag, jdbcType=VARCHAR},
				#{reasonCd},
				#{createUser},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{projId, jdbcType=INTEGER},
				#{projDesc},
				#{riskId, jdbcType=INTEGER},
				#{maxSi, jdbcType=DECIMAL},
				#{pctShare, jdbcType=FLOAT},
				#{totalValue, jdbcType=DECIMAL},
				#{objectId, jdbcType=INTEGER},
				#{site},
				#{duration, jdbcType=VARCHAR},
				#{testing, jdbcType=VARCHAR},
				#{prjCreateUser},
				CAST(to_timestamp(#{prjCreateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{prjUpdateUser},
				CAST(to_timestamp(#{prjUpdateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="saveQuoteOptionsAll" parameterType="java.util.Map">
		DECLARE
			v_option_id QUOTE_OTHER_RATES.OPTION_ID%TYPE;
		BEGIN
		   <foreach collection="deleteQuoteOptionsList" item="quoteOption">
		   		ETS_QUOTE_PKG_ETC.delete_quote_option(#{quoteId},#{quoteOption.optionId,jdbcType=VARCHAR});
		   </foreach>
		   <foreach collection="saveQuoteOptionsList" item="quoteOption">
		   	   ETS_QUOTE_PKG_ETC.save_q_option(#{quoteId},#{quoteOption.optionId,jdbcType=VARCHAR},#{quoteOption.optionRt},
		   	   #{quoteOption.condition,jdbcType=VARCHAR},#{quoteOption.commRtQuota},#{quoteOption.commRtSurplus},
		   	   #{quoteOption.commRtFac},#{quoteOption.createUser},
		   	   CAST(to_timestamp(#{quoteOption.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
		   	   #{quoteOption.updateUser},CAST(to_timestamp(#{quoteOption.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		   </foreach>
		   
		   <!-- <foreach collection="deleteDeductibleList" item="deductible">
		   		ETS_QUOTE_PKG_ETC.delete_quote_deductibles(#{quoteId},#{deductible.optionId},#{deductible.deductibleCd,jdbcType=VARCHAR});
		   </foreach>
		   <foreach collection="saveDeductibleList" item="deductible">
			   		ETS_QUOTE_PKG_ETC.save_q_deductible(
			   			#{quoteId},#{deductible.optionId},#{deductible.deductibleCd},#{deductible.deductibleRt},#{deductible.deductibleAmt,jdbcType=VARCHAR},#{deductible.deductibleTxt},#{deductible.createUser},CAST(to_timestamp(#{deductible.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),#{deductible.updateUser},CAST(to_timestamp(#{deductible.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
			   		);
		   </foreach>
		   
		   <foreach collection="deleteOtherRates" item="otherRates">
		 	ETS_QUOTE_PKG_ETC.delete_quote_other_rates(
		 		#{quoteId,jdbcType=INTEGER},
				#{otherRates.coverCd,jdbcType=VARCHAR}
		 	);
		 </foreach> -->
		 <foreach collection="otherRates" item="otherRates">
			ETS_QUOTE_PKG_ETC.save_q_other_rates(
				#{quoteId,jdbcType=INTEGER},
				#{otherRates.optionId,jdbcType=INTEGER},
				#{otherRates.section},
				#{otherRates.coverCd,jdbcType=VARCHAR},
				#{otherRates.bulletNo},
				#{otherRates.amount,jdbcType=VARCHAR},
				#{otherRates.changeTag},
				#{otherRates.rate,jdbcType=VARCHAR},
				#{otherRates.createUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{otherRates.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
				#{otherRates.updateUser,jdbcType=VARCHAR},
				CAST(to_timestamp(#{otherRates.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
			);
		 </foreach>
		 
		 <foreach collection="newOptions" item="quoteOption">
		 	   v_option_id := #{quoteOption.optionId , jdbcType=VARCHAR};
		   	   ETS_QUOTE_PKG_ETC.save_q_option(#{quoteId},v_option_id,#{quoteOption.optionRt},
		   	   #{quoteOption.condition,jdbcType=VARCHAR},#{quoteOption.commRtQuota},#{quoteOption.commRtSurplus},
		   	   #{quoteOption.commRtFac},#{quoteOption.createUser},
		   	   CAST(to_timestamp(#{quoteOption.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
		   	   #{quoteOption.updateUser},CAST(to_timestamp(#{quoteOption.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE));
		   	   
		   	   <foreach collection="quoteOption.otherRatesList" item="otherRates">
					ETS_QUOTE_PKG_ETC.save_q_other_rates(
						#{quoteId,jdbcType=INTEGER},
						v_option_id,
						#{otherRates.section},
						#{otherRates.coverCd,jdbcType=VARCHAR},
						#{otherRates.bulletNo},
						#{otherRates.amount,jdbcType=VARCHAR},
						#{otherRates.changeTag},
						#{otherRates.rate,jdbcType=VARCHAR},
						#{otherRates.createUser,jdbcType=VARCHAR},
						CAST(to_timestamp(#{otherRates.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
						#{otherRates.updateUser,jdbcType=VARCHAR},
						CAST(to_timestamp(#{otherRates.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
					);
		   	   </foreach>
		 </foreach>
		END;
	</update>
	

	<update id="copyEndorsementMap" parameterType="java.util.Map">
	BEGIN
		<foreach collection="toOptionNo" item="copy">
				ETS_QUOTE_PKG_MBM.copy_quote_endorsements(
				#{copyingType},#{fromOptionNo},#{copy.optionNo},
				'',#{quoteId},
				#{createUser}, CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE),
				#{updateUser}, CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS.ff3"Z"') AS DATE)
				);
		</foreach>
	END;
	</update> 

	<select id="retrieveQuoteDeductibles" resultMap="retrieveQuoteOptionMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ETS_QUOTE_PKG_PCPCR.retrieve_quote_deductibles(#{quoteId,jdbcType=VARCHAR},#{quotationNo,jdbcType=VARCHAR},#{optionId,jdbcType=VARCHAR},#{coverCd,jdbcType=VARCHAR},#{endtCd,jdbcType=VARCHAR},null,null,null,null))
	</select>

	<!-- START COPY -->
	<update id="copyQuoteGenInfo" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_gen_info(			
				#{newQuoteId, mode=OUT, jdbcType=INTEGER},
				#{newQuoteNo, mode=OUT, jdbcType=VARCHAR},
				#{copyingType, jdbcType=VARCHAR},
				#{quoteId, jdbcType=INTEGER},
				#{lineCd, jdbcType=VARCHAR},
				#{quoteYear, jdbcType=INTEGER},
				#{cedingId, jdbcType=INTEGER},
				#{riskId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteProject" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_project(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{riskId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteCoverage" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_coverage(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{riskId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteSectionCovers" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_section_covers(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{riskId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteOptions" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_options(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteDeductibles" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_deductibles(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteOtherRates" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_other_rates(
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteEndorsements" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_endorsements(
				#{copyingType, jdbcType=VARCHAR},
				#{fromOptionNo, jdbcType=INTEGER},
				#{toOptionNo, jdbcType=INTEGER},
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyQuoteAlop" parameterType="java.util.Map">
		BEGIN
			ETS_QUOTE_PKG_MBM.copy_quote_alop(				
				#{newQuoteId, jdbcType=INTEGER},
				#{quoteId, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	<!-- END COPY -->

</mapper>