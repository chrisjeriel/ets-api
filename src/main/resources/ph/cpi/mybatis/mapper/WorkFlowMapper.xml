<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ph.cpi.mybatis.mapper.WorkFlowMapper">

	<resultMap type="ph.cpi.rest.api.model.workflowmanager.Reminder" id="reminderMap">
     	<result property="reminderId"            	column="REMINDER_ID"/>
		<result property="title"           			column="TITLE"/>
		<result property="reminder"			        column="REMINDER"/>
		<result property="reminderDate"            	column="REMINDER_DATE"          typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="alarmTime"            	column="ALARM_TIME"/>
		<result property="assignedTo"               column="ASSIGNED_TO"/>
		<result property="status"			        column="STATUS"/>
		<result property="createUser"			    column="CREATE_USER"/>
		<result property="createDate"        	    column="CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	    column="UPDATE_USER"/>
		<result property="updateDate"			    column="UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     </resultMap>
     
     <select id="retrieveReminders" resultMap="reminderMap" parameterType="java.util.Map">
    	SELECT * FROM TABLE(WFM_REMINDERS_PKG.ret_reminders(#{reminderId, jdbcType=VARCHAR},
    										      #{assignedTo, jdbcType=VARCHAR},
    										      #{createUser, jdbcType=VARCHAR},
												  #{position, jdbcType=VARCHAR}, 
												  #{count, jdbcType=VARCHAR}, 
												  #{sortKey, jdbcType=VARCHAR},
												  #{order, jdbcType=VARCHAR}))
     </select>

</mapper>