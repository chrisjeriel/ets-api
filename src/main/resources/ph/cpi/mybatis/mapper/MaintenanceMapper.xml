<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ph.cpi.mybatis.mapper.MaintenanceMapper">
	
	<resultMap type="java.util.Map" id="sampleMap">
		<result property="insuredName" column="insured_name"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.AlopSample" id="alopMap">
	    <result property="alopId" 			column="ALOP_ID"/> 
		<result property="insuredId" 		column="INS_ID"/> 
		<result property="insuredName" 		column="INSURED_NAME"/> 
		<result property="insuredDesc" 		column="INSURED_DESC"/> 
		<result property="address" 			column="ADDRESS"/> 
		<result property="insuredBusiness" 	column="INS_BUSINESS"/> 
		<result property="annSi" 			column="ANN_SI"/> 
		<result property="maxIndemPdSi" 	column="MAX_INDEM_PD_SI"/> 
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="maxIndemPd" 		column="MAX_INDEM_PD"/> 
		<result property="indemFromDate" 	column="INDEM_FROM_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="timeExc" 			column="TIME_EXC"/> 
		<result property="repInterval" 		column="REP_INTERVAL"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Risk" id="retrieveMtnRiskMap">
		<result property="riskId"			column="RISK_ID"/>
		<result property="riskAbbr"			column="RISK_ABBR"/>
		<result property="riskName"			column="RISK_NAME"/>
		<result property="regionCd"			column="REGION_CD"/>	
		<result property="regionDesc"		column="REGION_DESC"/>
		<result property="provinceCd"		column="PROVINCE_CD"/>	
		<result property="provinceDesc"		column="PROVINCE_DESC"/>
		<result property="cityCd"			column="CITY_CD"/>
		<result property="cityDesc"			column="CITY_DESC"/>
		<result property="districtCd"		column="DISTRICT_CD"/>	
		<result property="districtDesc"		column="DISTRICT_DESC"/>
		<result property="blockCd"			column="BLOCK_CD"/>
		<result property="blockDesc"		column="BLOCK_DESC"/>
		<result property="latitude"			column="LATITUDE"/>
		<result property="longitude"		column="LONGITUDE"/>
		<result property="zoneCd"			column="ZONE_CD"/>
		<result property="zoneDesc"			column="ZONE_DESC"/>
		<result property="activeTag"		column="ACTIVE_TAG"/>
		<result property="remarks"			column="REMARKS"/>
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.SectionCovers" id="retrieveMtnSectionCoversMap">
		<result property="lineCd" 			column="LINE_CD"/>
		<result property="lineDesc" 		column="LINE_DESCRIPTION"/>
		<result property="coverCd" 			column="COVER_CD"/>
		<result property="coverCdAbbr" 		column="COVER_CD_ABBR"/>
		<result property="coverName" 		column="COVERS_DESCRIPTION"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="section" 			column="SECTION"/>
		<result property="sortSeq" 			column="SORT_SEQ"/>
		<result property="defaultTag" 		column="DEFAULT_TAG"/>
		<result property="bulletNo" 		column="BULLET_NO"/>
		<result property="addSi" 			column="ADD_SI"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 	    column="OK_DELETE"/>
		<association property="deductibles" resultMap="endt_ded"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Cession" id="retrieveTypeOfCessionMap">
		<result property="cessionId" 		column="CESSION_ID"/>
		<result property="cessionAbbr" 		column="CESSION_ABBR"/>
		<result property="description" 		column="DESCRIPTION"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
	</resultMap>
		
	<resultMap type="ph.cpi.rest.api.model.maintenance.Region" id="regionMap">
		<result property = "regionCd"       column  =  "REGION_CD"/>
		<result property = "regionDesc"     column  =  "REGION_DESC"/>
		<result property = "activeTag"     	column  =  "ACTIVE_TAG"/> 
		<result property = "remarks"        column  =  "REMARKS"/>
		<result property = "createUser"     column  =  "CREATE_USER"/>
		<result property = "createDate"     column  =  "CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "updateUser"     column  =  "UPDATE_USER"/>
		<result property = "updateDate"     column  =  "UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property="provinceList"	resultMap="provinceMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Province" id="provinceMap">
		<result property = "provinceCd"        column   ="PROVINCE_CD"/>
		<result property = "provinceDesc"      column   ="PROVINCE_DESC"/>
		<result property = "activeTag"         column   ="ACTIVE_TAG"/>
		<result property = "remarks"           column   ="REMARKS"/>
		<result property = "createUser"        column   ="CREATE_USER"/>
		<result property = "createDate"        column   ="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "updateUser"        column   ="UPDATE_USER"/>
		<result property = "updateDate"        column   ="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			   column="OK_DELETE"/>
		<association property="cityList"	   resultMap="cityMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Region" id="regionForProvinceMap">
		<result property = "regionCd"       column  =  "REGION_CD"/>
		<result property = "regionDesc"     column  =  "REGION_DESC"/>
		<association property="provinceList"	resultMap="provinceMap"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Object_" id="objectMap">
		<result property = "lineCd"         column  =   "LINE_CD"/>
		<result property = "lineDesc"       column  =   "LINE_DESC"/>
		<result property = "objectId"       column  =   "OBJECT_ID"/>
		<result property = "description"    column  =   "OBJECT_DESC"/>
		<result property = "activeTag"      column  =   "ACTIVE_TAG"/>
		<result property = "remarks"        column  =   "REMARKS"/>
		<result property = "createUser"     column  =   "CREATE_USER"/>
		<result property = "createDate"     column  =   "CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "updateUser"     column  =   "UPDATE_USER"/>
		<result property = "updateDate"     column  =   "UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property = "okDelete"       column  =   "OK_DELETE"/>
		<association property="catPerilList"	resultMap="catPerilMapObj"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.CATPeril" id="catPerilMapObj">
		<result property="catPerilId"			column="C_CAT_PERIL_ID"/>
		<result property="catPerilAbbr"			column="C_CAT_PERIL_ABBR"/>
		<result property="catPerilName"			column="C_CAT_PERIL_NAME"/>
		<result property="pctSharePrem"			column="C_PCT_SHARE_PREM"/>
		<result property="createUser"			column="C_CREATE_USER"/>
		<result property="createDate"        	column="C_CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	column="C_UPDATE_USER"/>
		<result property="updateDate"			column="C_UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     </resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.QuoteWordings" id="quoteWordingsMap">
		 <result property   ="lineCd"      column  =   "LINE_CD"/>   
		 <result property   ="lineDesc"    column  =   "DESCRIPTION"/> 
		 <result property   ="wordingId"   column  =   "WORDING_ID"/>    
		 <result property   ="wording"     column  =   "WORDING"/>  
		 <result property   ="wordType"    column  =   "WORD_TYPE"/> 
		 <result property   ="activeTag"   column  =   "ACTIVE_TAG"/>    
		 <result property   ="defaultTag"  column  =   "DEFAULT_TAG"/>
		 <result property   ="ocTag"  	   column  =   "OC_TAG"/>   
		 <result property   ="remarks"     column  =   "REMARKS"/>  
		 <result property   ="createUser"  column  =   "CREATE_USER"/>   
		 <result property   ="createDate"  column  =   "CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>   
		 <result property   ="updateUser"  column  =   "UPDATE_USER"/>   
		 <result property   ="updateDate"  column  =   "UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>  
	</resultMap>

	<resultMap type="ph.cpi.rest.api.model.maintenance.Intermediary" id="mntIntMap">
		 <result property="intmId" 			column="INTM_ID"/> 
		<result property="intmName" 		column="INTM_NAME"/> 
		<result property="firstName" 		column="FIRST_NAME"/> 
		<result property="middleInitial" 	column="MIDDLE_INITIAL"/> 
		<result property="lastName" 		column="LAST_NAME"/> 
		<result property="addrLine1" 		column="ADDR_LINE1"/> 
		<result property="addrLine2" 		column="ADDR_LINE2"/> 
		<result property="addrLine3" 		column="ADDR_LINE3"/> 
		<result property="zipCd" 			column="ZIP_CD"/> 
		<result property="address" 			column="ADDRESS"/> 
		<result property="contactNo" 		column="CONTACT_NO"/> 
		<result property="emailAdd" 		column="EMAIL_ADD"/> 
		<result property="activeTag" 		column="ACTIVE_TAG"/> 
		<result property="corpTag" 			column="CORP_TAG"/>
		<result property="corpTagDesc" 		column="CORP_TAG_DESC"/>
		<result property="vatTag" 			column="VAT_TAG"/>
		<result property="vatTagDesc" 		column="VAT_TAG_DESC"/> 
		<result property="oldIntmId" 		column="OLD_INTM_ID"/> 
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Line" id="mntLineMap">
		<result property="lineCd" 			column="LINE_CD"/> 
		<result property="description" 		column="DESCRIPTION"/>
		<result property="menuLineCd"		column="MENU_LINE_CD"/>
		<result property="cutOffTime" 		column="CUT_OFF_TIME"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/> 
		<result property="catTag" 			column="CAT_TAG"/> 
		<result property="renewalTag" 		column="RENEWAL_TAG"/> 
		<result property="openCoverTag" 	column="OPEN_COVER_TAG"/>
		<result property="alopTag" 			column="ALOP_TAG"/>
		<result property="referenceNo"		column="REFERENCE_NO"/> 
		<result property="sortSeq" 			column="SORT_SEQ"/> 
		<result property="remarks" 			column="REMARKS"/>
		<result property="menuLineTag"		column="MENU_LINE_TAG"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.LineClass" id="mntLineClassMap">
		<result property="lineCd" 			column="LINE_CD"/> 
		<result property="lineClassCd" 		column="LINE_CLASS_CD"/>
		<result property="lineClassCdDesc" 	column="DESCRIPTION"/> 
		<result property="activeTag" 		column="ACTIVE_TAG"/> 
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"         column="OK_DELETE"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.MtnLossCd" id="mtnLossCdMap">
		<result property="lossCd"			column="LOSS_CD"/>
		<result property="lossAbbr"			column="LOSS_ABBR"/>
		<result property="lossDesc"			column="LOSS_DESC"/>
		<result property="lossCdType"		column="LOSS_CD_TYPE"/>	
		<result property="activeTag"		column="ACTIVE_TAG"/>
		<result property="remarks"			column="REMARKS"/>	
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveMntIntermediary" resultMap="mntIntMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_INTM_PKG.ret_mtn_intm(
															#{intmId,jdbcType=INTEGER},
															#{intmName,jdbcType=VARCHAR},
															#{activeTag,jdbcType=VARCHAR},
															#{corpTag,jdbcType=VARCHAR},
															#{vatTag,jdbcType=VARCHAR},
															#{address,jdbcType=VARCHAR},
															#{contactNo,jdbcType=VARCHAR},
															#{oldIntmId,jdbcType=VARCHAR},
															'', '', '', ''))
	</select>
	
	<select id="retrieveMntLine" resultMap="mntLineMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_LINE_PKG.ret_mtn_line(#{lineCd,jdbcType=VARCHAR}, '', '', '',''))
	</select>
	
	<select id="retrieveMntLineClass" resultMap="mntLineClassMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_LINE_CLASS_PKG.ret_mtn_line_class(#{lineCd},#{lineClassCd, jdbcType=VARCHAR},'', '', '',''))
	</select>
	
	<select id="retrieveMaintenanceSample" resultMap="alopMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(ETS_QUOTE_PKG.retrieve_quote_alop(#{quoteId},#{quotationNo}))
	</select>
	
	<select id="retrieveMtnRisk" resultMap="retrieveMtnRiskMap" parameterType="java.util.Map">
		<!-- SELECT * FROM ETS_MAINTENANCE_PKG_MBM.retrieve_mtn_risk(#{riskId},#{position},#{count},#{sortKey},#{order}) -->
		SELECT * FROM TABLE(MTN_RISK_PKG.ret_mtn_risk(#{riskId, jdbcType=INTEGER},
													  null,
													  null,
													  null,
													  null))
	</select>
	
	<select id="retrieveMtnRiskListing" resultMap="retrieveMtnRiskMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_RISK_PKG.ret_mtn_risk_listing(#{riskId, jdbcType=INTEGER},
															  #{riskAbbr, jdbcType=VARCHAR},
															  #{riskName, jdbcType=VARCHAR},
															  #{regionDesc, jdbcType=VARCHAR},
															  #{provinceDesc, jdbcType=VARCHAR},
															  #{cityDesc, jdbcType=VARCHAR},
															  #{districtDesc, jdbcType=VARCHAR},
															  #{blockDesc, jdbcType=VARCHAR},
															  #{latitude, jdbcType=VARCHAR},
															  #{longitude, jdbcType=VARCHAR},
															  #{activeTag, jdbcType=VARCHAR},
															  null,
															  null,
															  null,
															  null
															  ))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Insured" id="insuredMap">
		<result property="insuredId" 		column="INSURED_ID"/>
		<result property="insuredName" 		column="INSURED_NAME"/>
		<result property="insuredAbbr" 		column="INSURED_ABBR"/>
		<result property="insuredType" 		column="INSURED_TYPE"/>
		<result property="insuredTypeDesc" 	column="INSURED_TYPE_DESC"/>
		<result property="firstName" 		column="FIRST_NAME"/>
		<result property="middleInitial" 	column="MIDDLE_INITIAL"/>
		<result property="lastName" 		column="LAST_NAME"/>
		<result property="addrLine1" 		column="ADDR_LINE1"/>
		<result property="addrLine2" 		column="ADDR_LINE2"/>
		<result property="addrLine3" 		column="ADDR_LINE3"/>
		<result property="zipCd" 			column="ZIP_CD"/>
		<result property="address" 			column="ADDRESS"/>
		<result property="contactNo" 		column="CONTACT_NO"/>
		<result property="emailAdd" 		column="EMAIL_ADD"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="corpTag" 			column="CORP_TAG"/>
		<result property="corpTagDesc" 		column="CORP_TAG_DESC"/>
		<result property="vatTag" 			column="VAT_TAG"/>
		<result property="vatTagDesc" 		column="VAT_TAG_DESC"/>
		<result property="oldInsId" 		column="OLD_INS_ID"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
	</resultMap>
	
	<select id="retrieveMtnInsured" resultMap="insuredMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_INSURED_PKG.ret_mtn_insured(
					#{insuredId,jdbcType=INTEGER},
					#{insuredName,jdbcType=VARCHAR},
					#{insuredAbbr,jdbcType=VARCHAR},
					#{activeTag,jdbcType=VARCHAR},
					#{insuredType,jdbcType=VARCHAR},
					#{corpTag,jdbcType=VARCHAR},
					#{vatTag,jdbcType=VARCHAR},
					#{address,jdbcType=VARCHAR},
					'',1,'',''))
	</select>
	
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.EndtCode" id="endtCode">
		<result property="lineCd" 		column="LINE_CD"/>
		<result property="lineDesc" 	column="LINE_DESCRIPTION"/>
		<result property="endtCd" 		column="ENDT_CD"/>
		<result property="endtTitle" 	column="ENDT_TITLE"/>
		<result property="description" 	column="ENDT_DESCRIPTION"/>
		<result property="defaultTag" 	column="DEFAULT_TAG"/>
		<result property="activeTag"  	column="ACTIVE_TAG"/>
		<result property="endtText01" 	column="ENDT_TEXT01"/>
		<result property="endtText02" 	column="ENDT_TEXT02"/>
		<result property="endtText03" 	column="ENDT_TEXT03"/>
		<result property="endtText04" 	column="ENDT_TEXT04"/>
		<result property="endtText05" 	column="ENDT_TEXT05"/>
		<result property="endtText06" 	column="ENDT_TEXT06"/>
		<result property="endtText07" 	column="ENDT_TEXT07"/>
		<result property="endtText08" 	column="ENDT_TEXT08"/>
		<result property="endtText09" 	column="ENDT_TEXT09"/>
		<result property="endtText10" 	column="ENDT_TEXT10"/>
		<result property="endtText11" 	column="ENDT_TEXT11"/>
		<result property="endtText12" 	column="ENDT_TEXT12"/>
		<result property="endtText13" 	column="ENDT_TEXT13"/>
		<result property="endtText14" 	column="ENDT_TEXT14"/>
		<result property="endtText15" 	column="ENDT_TEXT15"/>
		<result property="endtText16" 	column="ENDT_TEXT16"/>
		<result property="endtText17" 	column="ENDT_TEXT17"/>
		<result property="remarks" 	  	column="REMARKS"/>
		<result property="createUser" 	column="CREATE_USER"/>
		<result property="createDate" 	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 	column="UPDATE_USER"/>
		<result property="updateDate" 	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 	column="OK_DELETE"/>
		<association property="deductibles" resultMap="endt_ded"></association>
	</resultMap>
	
	<select id="retrieveEndtCode" resultMap="endtCode" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_ENDT_PKG.ret_endt_code(#{lineCd, jdbcType=VARCHAR},#{endtCd , jdbcType=VARCHAR},'',1,'',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.District" id="district">
		<result property="districtCd" column="DISTRICT_CD" />
		<result property="districtDesc" column="DISTRICT_DESC" />
		<result property="activeTag" column="ACTIVE_TAG" />
		<result property="remarks" column="REMARKS" />
		<result property="createUser" column="CREATE_USER" />
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER" />
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" column="DIS_OK_DELETE"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.City" id="city">
		<result property="cityCd" column="CITY_CD" />
		<result property="cityDesc" column="CITY_DESC" />
		<result property="zoneCd" column="ZONE_CD" />
		<result property="zoneDesc" column="ZONE_DESC" />
		<association property="districtList" resultMap="district"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Province" id="province">
		<result property="provinceCd" column="PROVINCE_CD" />
		<result property="provinceDesc" column="PROVINCE_DESC" />
		<association property="cityList" resultMap="city"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Region" id="region">
		<result property="regionCd" column="REGION_CD" />
		<result property="regionDesc" column="REGION_DESC" />
		<association property="provinceList" resultMap="province"></association>
	</resultMap>
	
	<select id="retrieveMtnDistrict" resultMap="region" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_DISTRICT_PKG.ret_mtn_district(#{regionCd, jdbcType=VARCHAR},#{provinceCd, jdbcType=VARCHAR},#{cityCd, jdbcType=VARCHAR},#{districtCd, jdbcType=VARCHAR},#{activeTag, jdbcType=VARCHAR},'',1,'',''))
	</select>
	
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Deductibles" id="deductibles">
		<result property="lineCd" 				column="LINE_CD"/>
		<result property="lineDesc" 			column="DESCRIPTION"/>
		<result property="coverCd"	 			column="COVER_CD"/>
		<result property="sectionCover"			column="SECTION_COVER"/>
		<result property="endtCd" 				column="ENDT_CD"/>
		<result property="endorsement" 			column="ENDORSEMENT"/>
		<result property="deductibleCd" 		column="DEDUCTIBLE_CD"/>
		<result property="deductibleTitle" 		column="DEDUCTIBLE_TITLE"/>
		<result property="deductibleType" 		column="DEDUCTIBLE_TYPE"/>
		<result property="typeDesc" 			column="TYPE_DESC"/>
		<result property="deductibleRate" 		column="DEDUCTIBLE_RATE"/>
		<result property="deductibleAmt" 		column="DEDUCTIBLE_AMT"/>
		<result property="minAmt" 				column="MIN_AMT"/>
		<result property="maxAmt" 				column="MAX_AMT"/>
		<result property="deductibleText" 		column="DEDUCTIBLE_TEXT"/>
		<result property="activeTag" 			column="ACTIVE_TAG"/>
		<result property="defaultTag" 			column="DEFAULT_TAG"/>
		<result property="remarks" 				column="REMARKS"/>
		<result property="createUser" 			column="CREATE_USER"/>
		<result property="createDate" 			column="CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 			column="UPDATE_USER"/>
		<result property="updateDate" 			column="UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"				column="OK_DELETE"/>
	</resultMap>
	
	<select id="retrieveMtnDeductibles" resultMap="deductibles" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_DEDUCTIBLES_PKG.ret_mtn_deductibles(
										#{lineCd, jdbcType=VARCHAR},
										#{coverCd, jdbcType=VARCHAR},
										#{endtCd, jdbcType=VARCHAR},
										#{deductibleCd, jdbcType=VARCHAR},
										#{activeTag, jdbcType=VARCHAR},
										#{defaultTag, jdbcType=VARCHAR},
										'',
										1,
										'',
										''))
	</select>
	
	<select id="retrieveMtnSectionCovers" resultMap="retrieveMtnSectionCoversMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_SEC_COVER_PKG.ret_mtn_sec_cover(#{lineCd, jdbcType=VARCHAR},
																#{coverCd, jdbcType=VARCHAR},
																null,
																null,
																null,
																null
																))
	</select>
	
	<select id="retrieveMtnTypeOfCession" resultMap="retrieveTypeOfCessionMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_CESSION_PKG.ret_mtn_cession(#{cessionId, jdbcType=INTEGER},null,null,null,null))
	</select>

	<select id="retrieveMtnRegion" resultMap="regionMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_REGION_PKG.ret_mtn_region(#{regionCd, jdbcType=VARCHAR},null,null,null,null))
	</select>
	
	<select id="retrieveMtnProvince" resultMap="regionForProvinceMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_PROVINCE_PKG.ret_mtn_prvnce(#{regionCd, jdbcType=VARCHAR},#{provinceCd, jdbcType=VARCHAR},null,null,null,null))
	</select>
	
	<select id="retrieveMtnObject" resultMap="objectMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_OBJECT_PKG.ret_mtn_obj(#{lineCd},#{objectId},null,null,null,null))
	</select>
	
	<select id="retrieveMtnQuoteWordings" resultMap="quoteWordingsMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_QUOTE_WORDINGS_PKG.ret_mtn_qu_wordings(#{lineCd, jdbcType=VARCHAR},#{wordType, jdbcType=VARCHAR},null,null,null,null))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.City" id="cityMap">
		<result property="cityCd"			column="CITY_CD"/>
		<result property="cityDesc"			column="CITY_DESC"/>
		<result property="activeTag"		column="ACTIVE_TAG"/>
		<result property="remarks"			column="REMARKS"/>
		<result property="zoneCd"			column="ZONE_CD"/>
		<result property="zoneDesc"			column="ZONE_DESC"/>
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
	</resultMap>
	
	<select id="retrieveMtnCity" resultMap="regionMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CITY_PKG.ret_mtn_city(#{regionCd, jdbcType=VARCHAR}, 
																		#{provinceCd, jdbcType=VARCHAR}, 
																		#{cityCd, jdbcType=VARCHAR},
																		#{position, jdbcType=VARCHAR}, 
																		#{count, jdbcType=VARCHAR}, 
																		#{sortKey, jdbcType=VARCHAR}, 
																		#{order, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.CrestaZone" id="crestaZoneMap">
		<result property="zoneCd" 			column="ZONE_CD" />
		<result property="zoneDesc"			column="ZONE_DESC" />
		<result property="activeTag" 		column="ACTIVE_TAG" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 		column="OK_DELETE"/>
	</resultMap>
	
	<select id="retrieveMtnCrestaZone" resultMap="crestaZoneMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CRESTA_PKG.ret_mtn_cresta(#{zoneCd, jdbcType=VARCHAR}, 
																			   #{position, jdbcType=VARCHAR}, 
																			   #{count, jdbcType=VARCHAR}, 
																			   #{sortKey, jdbcType=VARCHAR}, 
																			   #{order, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Currency" id="currencyMap">
		<result property="currencyCd"		column="CURRENCY_CD" />
		<!-- <result property="currencyAbbr"		column="CURRENCY_ABBR" /> -->
		<result property="currencyWord"		column="CURRENCY_WORD" />
		<result property="currencyRt"		column="CURRENCY_RT" />
		<result property="currencyDesc"		column="CURRENCY_DESC" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveMtnCurrency" resultMap="currencyMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CURR_PKG.ret_mtn_curr(#{currencyCd, jdbcType=VARCHAR},
																			#{activeTag, jdbcType=VARCHAR},
																			#{position, jdbcType=VARCHAR}, 
																			#{count, jdbcType=VARCHAR}, 
																			#{sortKey, jdbcType=VARCHAR}, 
																			#{order, jdbcType=VARCHAR}))
	</select>

	<resultMap type="ph.cpi.rest.api.model.maintenance.AdviceWordings" id="adviceWordingsMap">
		<result property="adviceWordId" 	column="ADVICE_WORD_ID"/> 
		<result property="description" 		column="DESCRIPTION"/> 
		<result property="activeTag" 		column="ACTIVE_TAG"/> 
		<result property="wordings" 		column="WORDINGS"/>
		<result property="remarks" 			column="REMARKS"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
	</resultMap>
	
	<select id="retMtnAdviceWordings" resultMap="adviceWordingsMap" parameterType="java.util.Map">
            SELECT* FROM TABLE(MTN_ADV_WORD_PKG.ret_adv_wordings(#{adviceWordId, jdbcType=VARCHAR},NULL,NULL,NULL,NULL))
     </select>
     
     
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.Region" id="maintenanceRegionMap">
        <result property="regionCd" 		column="REGION_CD"/>
        <result property="regionDesc" 		column="REGION_DESC"/>
        <association property="provinceList" resultMap="maintenanceProvinceMap"></association>
	</resultMap>

     
     <resultMap type="ph.cpi.rest.api.model.maintenance.Province" id="maintenanceProvinceMap">
        <result property="provinceCd" 	column="PROVINCE_CD"/>
        <result property="provinceDesc" column="PROVINCE_DESC"/>
        <association property="cityList" resultMap="maintenanceCityMap"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.City" id="maintenanceCityMap">
        <result property="cityCd" 	column="CITY_CD"/>
        <result property="cityDesc" column="CITY_DESC"/>
        <result property="zoneCd" column="ZONE_CD" />
		<result property="zoneDesc" column="ZONE_DESC" />
        <association property="districtList" resultMap="maintenanceDistrictMap"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.District" id="maintenanceDistrictMap">
        <result property="districtCd" 	column="DISTRICT_CD"/>
        <result property="districtDesc" column="DISTRICT_DESC"/>
        <association property="blockList" resultMap="maintenanceBlockMap"></association>
	</resultMap>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.Block" id="maintenanceBlockMap">
     	<result property="blockCd" 		column="BLOCK_CD"/> 
		<result property="blockDesc" 	column="BLOCK_DESC"/>
		<result property="activeTag" 	column="ACTIVE_TAG"/>   
		<result property="remarks" 		column="REMARKS"/>
		<result property="createUser" 	column="CREATE_USER"/>
		<result property="createDate" 	column="CREATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 	column="UPDATE_USER"/>
		<result property="updateDate" 	column="UPDATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     	<result property="okDelete"		column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnBlock" resultMap="maintenanceRegionMap" parameterType="java.util.Map">
            SELECT * FROM TABLE(MTN_BLOCK_PKG.ret_block(#{regionCd, jdbcType=VARCHAR},#{provinceCd, jdbcType=VARCHAR},#{cityCd, jdbcType=VARCHAR},#{districtCd, jdbcType=VARCHAR},#{blockCd, jdbcType=VARCHAR},#{activeTag, jdbcType=VARCHAR}, null, null ,null, null))
     </select>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.Spoil" id="spoilMap">
     	<result property="spoilCd"			column="SPOIL_CD"/>
		<result property="description"		column="DESCRIPTION"/>
		<result property="activeTag"		column="ACTIVE_TAG"/>
		<result property="remarks"			column="REMARKS"/>
		<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER"/>
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
     </resultMap>
     
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.CedingCompany" id="maintenanceCedingCompanyListMap">
     	<result property="cedingId" 		column="CEDING_ID"/> 
		<result property="cedingName" 		column="CEDING_NAME"/>
		<result property="cedingAbbr" 		column="CEDING_ABBR"/>
		<result property="addrLine1" 		column="ADDR_LINE1"/>
		<result property="addrLine2" 		column="ADDR_LINE2"/>
		<result property="addrLine3" 		column="ADDR_LINE3"/>
		<result property="zipCd" 			column="ZIP_CD"/>
		<result property="address" 			column="ADDRESS"/>
		<result property="contactNo" 		column="CONTACT_NO"/>
		<result property="emailAdd" 		column="EMAIL_ADD"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="govtTag" 			column="GOVT_TAG"/>
		<result property="oldCedingId" 		column="OLD_CEDING_ID"/>
		<result property="membershipTag" 	column="MEMBERSHIP_TAG"/>
		<result property="membershipDate" 	column="MEMBERSHIP_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="withdrawDate" 	column="WITHDRAW_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="inactiveDate" 	column="INACTIVE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="treatyTag" 		column="TREATY_TAG"/>
		<result property="withdrawTag"		column="WITHDRAW_TAG" />
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     </resultMap>
     
     <select id="retMtnCedingCompanyListing" resultMap="maintenanceCedingCompanyListMap" parameterType="java.util.Map">
            SELECT* FROM TABLE(MTN_CED_COM_PKG.ret_mtn_ced_com_list(#{cedingId, jdbcType=VARCHAR},#{cedingName, jdbcType=VARCHAR},#{cedingAbbr, jdbcType=VARCHAR},#{address, jdbcType=VARCHAR},#{membershipDate, jdbcType=VARCHAR},#{terminationDate, jdbcType=VARCHAR},#{inactiveDate, jdbcType=VARCHAR},#{activeTag, jdbcType=VARCHAR},#{govtTag, jdbcType=VARCHAR},#{membershipTag, jdbcType=VARCHAR}, null, null ,null, null))
     </select>
     
     
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.CedingCompany" id="maintenanceCedingCompanyMap">
     	<result property="cedingId" 		column="CEDING_ID"/> 
		<result property="cedingName" 		column="CEDING_NAME"/>
		<result property="cedingAbbr" 		column="CEDING_ABBR"/>
		<result property="addrLine1" 		column="ADDR_LINE1"/>
		<result property="addrLine2" 		column="ADDR_LINE2"/>
		<result property="addrLine3" 		column="ADDR_LINE3"/>
		<result property="zipCd" 			column="ZIP_CD"/>
		<result property="address" 			column="ADDRESS"/>
		<result property="contactNo" 		column="CONTACT_NO"/>
		<result property="emailAdd" 		column="EMAIL_ADD"/>
		<result property="bussTypeId" 		column="BUSS_TYPE_ID"/>
		<result property="tinNo" 			column="TIN_NO"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="govtTag"			column="GOVT_TAG"/>
		<result property="oldCedingId" 		column="OLD_CEDING_ID"/>
		<result property="membershipTag" 	column="MEMBERSHIP_TAG"/>
		<result property="membershipDate" 	column="MEMBERSHIP_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="withdrawDate" 	column="WITHDRAW_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="inactiveDate" 	column="INACTIVE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="treatyTag" 		column="TREATY_TAG"/>
		<result property="withdrawTag" 		column="WITHDRAW_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" 		typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     	<association property="cedingRepresentative" resultMap="cedingRepresentativeMap"></association>
     </resultMap>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.CedingRepresentative" id="cedingRepresentativeMap">
     	<result property="cedingId" 		column="CEDING_REP_CEDING_ID"/>
		<result property="cedingRepId" 		column="CEDING_REP_ID"/>
		<result property="designation" 		column="DESIGNATION"/>
		<result property="firstName" 		column="FIRST_NAME"/>
		<result property="middleInitial" 	column="MIDDLE_INITIAL"/>
		<result property="lastName" 		column="LAST_NAME"/>
		<result property="fullName" 		column="FULLNAME"/>
		<result property="defaultTag" 		column="DEFAULT_TAG"/>
		<result property="position" 		column="POSITION"/>
		<result property="department" 		column="DEPARTMENT"/>
		<result property="contactNo" 		column="CEDING_REP_CONTACT_NO"/>
		<result property="emailAdd" 		column="CEDING_REP_EMAIL_ADD"/>
		<result property="eSignature" 		column="E_SIGNATURE"/>
		<result property="createUser" 		column="CEDING_REP_CREATE_USER"/>
		<result property="createDate" 		column="CEDING_REP_CREATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="CEDING_REP_UPDATE_USER"/>
		<result property="updateDate" 		column="CEDING_REP_UPDATE_DATE" 	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     </resultMap>
   
     
     <select id="retMtnCedingCompany" resultMap="maintenanceCedingCompanyMap" parameterType="java.util.Map">
            SELECT* FROM TABLE(MTN_CED_REP_PKG.ret_ced_com(#{cedingId, jdbcType=VARCHAR},null,null,null,null))
     </select>
  	
  	<update id="saveMtnRisk" parameterType="java.util.Map" statementType="CALLABLE">
  		BEGIN
  			MTN_RISK_PKG.save_mtn_risk(#{riskId, mode=INOUT, jdbcType=VARCHAR},
  									   #{riskAbbr},
  									   #{riskName},
  									   #{regionCd}, 
  									   #{provinceCd},
  									   #{cityCd},
  									   #{districtCd, jdbcType=VARCHAR},
  									   #{latitude, jdbcType=VARCHAR},
  									   #{longitude, jdbcType=VARCHAR},
  									   #{zoneCd, jdbcType=VARCHAR},
  									   #{activeTag},
  									   #{remarks, jdbcType=VARCHAR},
  									   #{createUser},
  									   CAST(to_timestamp(#{createDate, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
  									   #{updateUser},
  									   CAST(to_timestamp(#{updateDate, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
  									   #{blockCd, jdbcType=VARCHAR}
  				);
  		END;
  	</update>
  	
  	<select id="userLogin" resultType="java.lang.String" parameterType="java.util.Map">
    	SELECT DISTINCT(module_id) module_id FROM TABLE(MTN_USERS_PKG.user_login(#{userId}, #{password}))
    	ORDER BY module_id
    </select>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.Users" id="userMap">
     	<result property="userId"            	column="USER_ID"/>
		<result property="userGrp"           	column="USER_GRP"/>
		<result property="userName"          	column="USER_NAME"/>
		<result property="activeTag"         	column="ACTIVE_TAG"/>
		<result property="emailAddress"      	column="EMAIL_ADDRESS"/>
     </resultMap>
    
    <select id="userAuthenticate" resultMap="userMap" parameterType="java.util.Map">
    	SELECT * FROM TABLE(MTN_USERS_PKG.user_authenticate(#{userId}, #{password}))
    </select>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.Reason" id="ReasonMap">
		<result property="reasonCd" 		column="REASON_CD"/> 
		<result property="description" 		column="DESCRIPTION"/>
	</resultMap>
	
	<select id="retrieveMtnReason" resultMap="ReasonMap" parameterType="java.util.Map">
            SELECT * FROM TABLE(QU_GEN_INFO_PKG.ret_mtn_reason(#{reasonCd, jdbcType=VARCHAR},NULL,NULL,NULL,NULL))
     </select>

    <!-- <resultMap id="employeeResult" type="ph.cpi.rest.api.model.Employee">
    	<result property="empId" 			column="EMP_ID"/>
    	<result property="empDepartment" 		column="EMP_DEPARTMENT"/>
		<result property="empName" 		column="EMP_NAME"/>
	  	<collection property="addressList" javaType="ArrayList" column="{empId = EMP_ID, addressId = ADDRESS_ID}" ofType="addressResult" select="getEmployeeAddress"/>
	</resultMap>
	
	<resultMap id="addressResult" type="ph.cpi.rest.api.model.Address">
    	<result property="addressId" 		column="ADDRESS_ID"/>
    	<result property="empAddress" 		column="EMP_ADDRESS"/>
	</resultMap>
    
    <select id="getEmployeeX" resultMap="employeeResult">
	  SELECT a.* FROm tbl_employee a
	   where emp_id = #{empId}
	</select>
	
	<select id="EmployeeAddress" resultMap="addressResult">
	  SELECT a.* FROM tbl_address a
	  WHERE emp_id = #{empId}
	    AND address_id = #{addressId}
	</select> -->
    
    
	 
    <resultMap type="ph.cpi.rest.api.model.maintenance.Treaty" id="treatyMap">
    	<result property="treatyId" 		column="TREATY_ID"/>
    	<result property="treatyName" 		column="TREATY_NAME"/>
    	<result property="treatyAbbr" 		column="TREATY_ABBR"/>
    	<result property="treatyType" 		column="TREATY_TYPE"/>
    	<result property="activeTag" 		column="ACTIVE_TAG"/>
    	<result property="remarks" 			column="REMARKS"/>
    	<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"       column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"       column="UPDATE_USER"/>
		<result property="updateDate"	    column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
    </resultMap>
    
    <select id="retrieveMtnTreaty" parameterType="java.util.Map" resultMap="treatyMap">
    	SELECT * FROM TABLE(MTN_TREATY_PKG.ret_mtn_treaty(#{treatyId, jdbcType=INTEGER},NULL,NULL,NULL,NULL))
    </select>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.Treaty" id="treatyComMap">
    	<result property="treatyId" 		column="TREATY_ID"/>
    	<result property="treatyName" 		column="TREATY_NAME"/>
    	<result property="activeTag" 		column="ACTIVE_TAG"/>
    	<result property="commRate" 		column="COMMISSION_RATE"/>
    	<result property="treatyAbbr" 		column="TREATY_ABBR"/>
    	<result property="treatyType" 		column="TREATY_TYPE"/>
    	<result property="treatyYear" 		column="TREATY_YEAR"/>
    	<result property="sortSeq" 			column="SORT_SEQ"/>
    	<result property="createUser" 		column="T_CREATE_USER"/>
    	<result property="createDate" 		column="T_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    	<result property="updateUser" 		column="T_UPDATE_USER"/>
    	<result property="updateDate" 		column="T_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    	<result property="okDelete" 		column="OK_DELETE"/>
    	
    	<association property="treatyShareList"	resultMap="assocTreatyShare"/>
    </resultMap>
    
    <select id="retrieveMtnTreatyCom" resultMap="treatyComMap">
    	SELECT * FROM TABLE(MTN_TREATY_COMM_PKG.ret_mtn_treaty_com(
    															   #{quoteYear, jdbcType=VARCHAR},
    															   #{position, jdbcType=VARCHAR},
    															   #{count, jdbcType=VARCHAR},
    															   #{sortKey, jdbcType=VARCHAR},
    															   #{order, jdbcType=VARCHAR}
    															   )
    					    )
    </select>
    
    <select id="retrieveMtnSectionCoversLov" resultMap="retrieveMtnSectionCoversMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_SEC_COVER_PKG.ret_mtn_sec_cover_lov(#{lineCd, jdbcType=VARCHAR},
																    #{cover, jdbcType=VARCHAR},
																    null,
																    null,
																	null,
																	null
																	))
	</select>
    <resultMap type="ph.cpi.rest.api.model.RefCode" id="refCodeMap">
    	<result property="code" 			column="CODE"/>
    	<result property="identifier" 		column="IDENTIFIER"/>
    	<result property="description" 		column="DESCRIPTION"/>
    </resultMap>
    
    <select id="retrieveRefCode" resultMap="refCodeMap">
    	SELECT * FROM TABLE(REFCODE_PKG.ref_lov(#{identifier, jdbcType=VARCHAR}))
    </select>
    
     <resultMap type="ph.cpi.rest.api.model.maintenance.ReportsParam" id="reportsParamMap">
    	<result property="reportId" 		column="REPORT_ID"/>
    	<result property="title" 		    column="TITLE"/>
    	<result property="text" 		    column="TEXT"/>
    	<result property="lineCd" 			column="LINE_CD"/>
    	<result property="remarks" 		    column="REMARKS"/>
    	<result property="createUser"		column="CREATE_USER"/>
		<result property="createDate"       column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"       column="UPDATE_USER"/>
		<result property="updateDate"	    column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    </resultMap>
    
    <select id="retrieveMtnReportsParam" resultMap="reportsParamMap" parameterType="java.util.Map">
    	SELECT* FROM TABLE(MTN_REP_PARAM_PKG.ret_mtn_rep_param(#{reportId, jdbcType=VARCHAR},null,null,null,null))
    </select>
    
    
     <resultMap type="ph.cpi.rest.api.model.maintenance.CATPeril" id="catPerilMap">
		<result property="lineCd"				column="LINE_CD"/>
		<result property="lineDesc"				column="DESCRIPTION"/>
		<result property="objectId"				column="OBJECT_ID"/> 
		<result property="catPerilId"			column="CAT_PERIL_ID"/>
		<result property="catPerilAbbr"			column="CAT_PERIL_ABBR"/>
		<result property="catPerilName"			column="CAT_PERIL_NAME"/>
		<result property="pctSharePrem"			column="PCT_SHARE_PREM"/>
		<result property="defaultTag"			column="DEFAULT_TAG"/>
		<result property="activeTag"			column="ACTIVE_TAG"/> 
		<result property="remarks"				column="REMARKS"/>
		<result property="createUser"			column="CREATE_USER"/>
		<result property="createDate"        	column="CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	column="UPDATE_USER"/>
		<result property="updateDate"			column="UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     </resultMap>
     
     <select id="retrieveMtnCATPeril" resultMap="catPerilMap" parameterType="java.util.Map">
    	SELECT * FROM MTN_CAT_PERIL_PKG.retrieve_mtn_cat_peril(#{lineCd, jdbcType=VARCHAR},
												  #{objectId, jdbcType=VARCHAR}, 
												  #{catPerilId, jdbcType=INTEGER},
												  #{position, jdbcType=VARCHAR}, 
												  #{count, jdbcType=VARCHAR}, 
												  #{sortKey, jdbcType=VARCHAR}, 
												  #{order, jdbcType=VARCHAR})
     </select>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.MtnCharges" id="chargesMap">
		<result property="chargeCd"				column="CHARGE_CD"/>
		<result property="chargeDesc"			column="CHARGE_DESC"/>
		<result property="chargeType"			column="CHARGE_TYPE"/>
		<result property="premRt"				column="PREM_RT"/>
		<result property="defaultAmt"			column="DEFAULT_AMT"/>
		<result property="activeTag"			column="ACTIVE_TAG"/> 
		<result property="remarks"				column="REMARKS"/>
		<result property="createUser"			column="CREATE_USER"/>
		<result property="createDate"        	column="CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	column="UPDATE_USER"/>
		<result property="updateDate"			column="UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"				column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnCharges" resultMap="chargesMap" parameterType="java.util.Map">
    	SELECT * FROM MTN_CHARGES_PKG.retrieve_mtn_charges(#{chargeCd, jdbcType=INTEGER},
												  #{position, jdbcType=VARCHAR}, 
												  #{count, jdbcType=VARCHAR}, 
												  #{sortKey, jdbcType=VARCHAR}, 
												  #{order, jdbcType=VARCHAR})
     </select>
     
    <update id="saveMtnLine" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveLine" item="line">
	    		MTN_LINE_PKG.save_mtn_line(
	    			#{line.lineCd,jdbcType=VARCHAR},
			        #{line.description,jdbcType=VARCHAR},
			        #{line.menuLineCd,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{line.saveCutOffTime}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{line.activeTag,jdbcType=VARCHAR},
			        #{line.catTag,jdbcType=VARCHAR},
			        #{line.renewalTag,jdbcType=VARCHAR},
			        #{line.openCoverTag,jdbcType=VARCHAR},
			        #{line.alopTag,jdbcType=VARCHAR},
			        #{line.referenceNo,jdbcType=INTEGER},
			        #{line.sortSeq,jdbcType=INTEGER},
			        #{line.remarks,jdbcType=VARCHAR},
			        #{line.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{line.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{line.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{line.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteLine" item="lineDel">
    			MTN_LINE_PKG.del_mtn_line(#{lineDel.lineCd,jdbcType=VARCHAR});
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnLineClass" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveLineClass" item="lineClass">
    			MTN_LINE_CLASS_PKG.save_mtn_line_class(
    				#{lineClass.lineCd, jdbcType=VARCHAR},
    				#{lineClass.lineClassCd, jdbcType=VARCHAR},
    				#{lineClass.description, jdbcType=VARCHAR},
    				#{lineClass.activeTag, jdbcType=VARCHAR},
    				#{lineClass.remarks, jdbcType=VARCHAR},
    				#{lineClass.createUser, jdbcType=VARCHAR},
    				CAST(to_timestamp(#{lineClass.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    				#{lineClass.updateUser, jdbcType=VARCHAR},
    				CAST(to_timestamp(#{lineClass.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    		<foreach collection="deleteLineClass" item="lineClass">
    			MTN_LINE_CLASS_PKG.del_mtn_line_class(#{lineClass.lineCd}, #{lineClass.lineClassCd});
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnObject" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveObject" item="obj">
    			MTN_OBJECT_PKG.save_mtn_object(
    				#{obj.lineCd, jdbcType=VARCHAR},
    				#{obj.objectId, jdbcType=VARCHAR},
    				#{obj.description, jdbcType=VARCHAR},
    				#{obj.activeTag, jdbcType=VARCHAR},
    				#{obj.remarks, jdbcType=VARCHAR},
    				#{obj.createUser, jdbcType=VARCHAR},
    				CAST(to_timestamp(#{obj.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    				#{obj.updateUser, jdbcType=VARCHAR},
    				CAST(to_timestamp(#{obj.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    		<foreach collection="deleteObject" item="obj">
    			MTN_OBJECT_PKG.del_mtn_object(#{obj.objectId}, #{obj.lineCd});
    		</foreach>
    	END;
    </update>
    
    
     <update id="saveMtnDeductibles" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveDeductibles" item="saveD">
	    		MTN_DEDUCTIBLES_PKG.save_mtn_deductibles(
	    			#{saveD.lineCd,jdbcType=VARCHAR},
					#{saveD.coverCd,jdbcType=INTEGER},
					#{saveD.endtCd,jdbcType=VARCHAR},
					#{saveD.deductibleCd,jdbcType=VARCHAR},
					#{saveD.deductibleTitle,jdbcType=VARCHAR},
					#{saveD.deductibleText,jdbcType=VARCHAR},
					#{saveD.deductibleType,jdbcType=VARCHAR},
					#{saveD.deductibleRate,jdbcType=INTEGER},
					#{saveD.deductibleAmt,jdbcType=INTEGER},
					#{saveD.minAmt,jdbcType=INTEGER},
					#{saveD.maxAmt,jdbcType=INTEGER},
					#{saveD.activeTag,jdbcType=VARCHAR},
					#{saveD.defaultTag,jdbcType=VARCHAR},
					#{saveD.remarks,jdbcType=VARCHAR},
					#{saveD.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveD.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteDeductibles" item="deleteD">
    			MTN_DEDUCTIBLES_PKG.del_mtn_deductibles(
	    			#{deleteD.lineCd,jdbcType=VARCHAR},
					#{deleteD.deductibleCd,jdbcType=VARCHAR},
					#{deleteD.coverCd,jdbcType=INTEGER},
					#{deleteD.endtCd,jdbcType=VARCHAR}
	    		);
    		</foreach>
    	END;
    </update>
    
    <select id="retrieveMtnSpoilageReason" resultMap="spoilMap" parameterType="java.util.Map">
    	SELECT * FROM MTN_SPOIL_PKG.ret_mtn_spoil(#{spoilCd, jdbcType=VARCHAR},
    											  #{activeTag, jdbcType=VARCHAR},
												  #{position, jdbcType=VARCHAR}, 
												  #{count, jdbcType=VARCHAR}, 
												  #{sortKey, jdbcType=VARCHAR}, 
												  #{order, jdbcType=VARCHAR})
    </select>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.MtnPolWordings" id="MtnPolWordingsMap">
    	<result property="lineCd"	column="LINE_CD"/>
		<result property="wordingCd"	column="WORDING_CD"/>
		<result property="wordingTitle"	column="WORDING_TITLE"/>
		<result property="wordType"	column="WORD_TYPE"/>
		<result property="activeTag"	column="ACTIVE_TAG"/>
		<result property="defaultTag"	column="DEFAULT_TAG"/>
		<result property="ocTag"	column="OC_TAG"/>
		<result property="wordText01"	column="WORD_TEXT01"/>
		<result property="wordText02"	column="WORD_TEXT02"/>
		<result property="wordText03"	column="WORD_TEXT03"/>
		<result property="wordText04"	column="WORD_TEXT04"/>
		<result property="wordText05"	column="WORD_TEXT05"/>
		<result property="wordText06"	column="WORD_TEXT06"/>
		<result property="wordText07"	column="WORD_TEXT07"/>
		<result property="wordText08"	column="WORD_TEXT08"/>
		<result property="wordText09"	column="WORD_TEXT09"/>
		<result property="wordText10"	column="WORD_TEXT10"/>
		<result property="wordText11"	column="WORD_TEXT11"/>
		<result property="wordText12"	column="WORD_TEXT12"/>
		<result property="wordText13"	column="WORD_TEXT13"/>
		<result property="wordText14"	column="WORD_TEXT14"/>
		<result property="wordText15"	column="WORD_TEXT15"/>
		<result property="wordText16"	column="WORD_TEXT16"/>
		<result property="wordText17"	column="WORD_TEXT17"/>
		<result property="remarks"	column="REMARKS"/>
		<result property="createUser"	column="CREATE_USER"/>
		<result property="createDate"	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"	column="UPDATE_USER"/>
		<result property="updateDate"	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    </resultMap>
    
    <select id="retMtnPolWordings" resultMap="MtnPolWordingsMap" parameterType="java.util.Map">
    	select * from MTN_POL_WORDINGS_PKG.ret_mtn_pol_wordings(#{lineCd, jdbcType=VARCHAR},#{wordingCd, jdbcType=VARCHAR},#{wordType, jdbcType=VARCHAR},#{activeTag, jdbcType=VARCHAR},#{defaultTag, jdbcType=VARCHAR},#{ocTag, jdbcType=VARCHAR},null,null,null,null)
     </select>
     
    <update id="saveMtnInsured" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    			MTN_INSURED_PKG.save_mtn_insured(
    				#{insuredId,jdbcType=INTEGER},
    				#{insuredIdOut,mode=OUT,jdbcType=INTEGER},
					#{insuredName,jdbcType=VARCHAR},
					#{insuredAbbr,jdbcType=VARCHAR},
					#{insuredType,jdbcType=VARCHAR},
					#{firstName,jdbcType=VARCHAR},
					#{middleInitial,jdbcType=VARCHAR},
					#{lastName,jdbcType=VARCHAR},
					#{addrLine1,jdbcType=VARCHAR},
					#{addrLine2,jdbcType=VARCHAR},
					#{addrLine3,jdbcType=VARCHAR},
					#{zipCd,jdbcType=VARCHAR},
					#{contactNo,jdbcType=VARCHAR},
					#{emailAdd,jdbcType=VARCHAR},
					#{activeTag,jdbcType=VARCHAR},
					#{corpTag,jdbcType=VARCHAR},
					#{vatTag,jdbcType=VARCHAR},
					#{oldInsId,jdbcType=INTEGER},
					#{remarks,jdbcType=VARCHAR},
					#{createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    	END;
    </update>

	<update id="saveMtnTypeOfCession" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="deleteTypeOfCession" item="deleteToc">
    			MTN_CESSION_PKG.del_mtn_cession(
	    			#{deleteToc.cessionId,jdbcType=INTEGER}
	    		);
    		</foreach>
    		
    		<foreach collection="saveTypeOfCession" item="saveToc">
	    		MTN_CESSION_PKG.save_mtn_cession(
	    			#{saveToc.cessionId, jdbcType=INTEGER},
					#{saveToc.cessionAbbr, jdbcType=VARCHAR},
					#{saveToc.description, jdbcType=VARCHAR},
					#{saveToc.activeTag, jdbcType=VARCHAR},
					#{saveToc.remarks, jdbcType=VARCHAR},
					#{saveToc.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveToc.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveToc.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveToc.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    	END;
    </update>
    
    <select id="retMtnInsuredLovCount" resultType="java.lang.Integer" parameterType="java.util.Map">
    	SELECT mtn_insured_pkg.ret_mtn_insured_lov_count(#{lovParam, jdbcType=VARCHAR}, #{page.position, jdbcType=VARCHAR}, #{page.count, jdbcType=VARCHAR}, #{sort.sortKey, jdbcType=VARCHAR}, #{sort.order, jdbcType=VARCHAR}) total_count from dual
     </select>
     
     <select id="retMtnInsuredLov" resultMap="insuredMap" parameterType="java.util.Map">
     	SELECT * from table(mtn_insured_pkg.ret_mtn_insured_lov(#{lovParam, jdbcType=VARCHAR}, #{page.position, jdbcType=VARCHAR}, #{page.count, jdbcType=VARCHAR}, #{sort.sortKey, jdbcType=VARCHAR}, #{sort.order, jdbcType=VARCHAR}))
     </select>
     
     <update id="saveMtnIntermediary" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    			MTN_INTM_PKG.save_mtn_intm(
    				#{intmId,jdbcType=INTEGER},
    				#{intmIdOut,mode=OUT,jdbcType=INTEGER},
					#{intmName,jdbcType=VARCHAR},
					#{firstName,jdbcType=VARCHAR},
					#{middleInitial,jdbcType=VARCHAR},
					#{lastName,jdbcType=VARCHAR},
					#{addrLine1,jdbcType=VARCHAR},
					#{addrLine2,jdbcType=VARCHAR},
					#{addrLine3,jdbcType=VARCHAR},
					#{zipCd,jdbcType=VARCHAR},
					#{contactNo,jdbcType=VARCHAR},
					#{emailAdd,jdbcType=VARCHAR},
					#{activeTag,jdbcType=VARCHAR},
					#{corpTag,jdbcType=VARCHAR},
					#{vatTag,jdbcType=VARCHAR},
					#{oldIntmId,jdbcType=INTEGER},
					#{remarks,jdbcType=VARCHAR},
					#{createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    	END;
	</update>
	
    <update id="saveMtnAdvWord" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteAdvWordList" item="del">
	    			MTN_ADV_WORD_PKG.del_adv_word(
			    				#{del.adviceWordId}
			    		);
    		</foreach>
    		<foreach collection="saveAdvWordList" item="save">
		    		MTN_ADV_WORD_PKG.save_adv_word(
		    				#{save.adviceWordId},
		    				#{save.description, jdbcType=VARCHAR},
		    				#{save.activeTag, jdbcType=VARCHAR},
		    				#{save.wordings},
		    				#{save.remarks, jdbcType=VARCHAR},
							#{save.createUser,jdbcType=VARCHAR},
							CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
							#{save.updateUser,jdbcType=VARCHAR},
							CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    			);
		   	</foreach>
    	END;
    </update>

     <resultMap type="ph.cpi.rest.api.model.maintenance.MtnCurrency" id="currencyList">
		<result property="currencyCd"			column="CURRENCY_CD"/>
		<result property="currencyWord"			column="CURRENCY_WORD"/>
		<result property="description"			column="CURRENCY_DESC"/>
		<result property="activeTag"			column="ACTIVE_TAG"/> 
		<result property="remarks"				column="REMARKS"/>
		<result property="createUser"			column="CREATE_USER"/>
		<result property="createDate"        	column="CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	column="UPDATE_USER"/>
		<result property="updateDate"			column="UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     	<result property="okDelete"  			column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnCurrencyList" resultMap="currencyList" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CURR_PKG.ret_mtn_currency(#{currencyCd, jdbcType=VARCHAR},
																			#{position, jdbcType=VARCHAR}, 
																			#{count, jdbcType=VARCHAR}, 
																			#{sortKey, jdbcType=VARCHAR}, 
																			#{order, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnCurrency" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delCurrency" item="delCurr">
    			MTN_CURR_PKG.del_mtn_curr(
    				#{delCurr.currencyCd}
    			);
    		</foreach>
    		<foreach collection="saveCurrency" item="saveCurr">
    			MTN_CURR_PKG.save_mtn_curr(
    				#{saveCurr.currencyCd},
    				#{saveCurr.currencyWord},
    				#{saveCurr.description},
    				#{saveCurr.remarks,jdbcType=VARCHAR},
					#{saveCurr.activeTag},
					#{saveCurr.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveCurr.createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveCurr.updateUser},
					CAST(to_timestamp(#{saveCurr.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnQuoteWordings" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteQW" item="del">
	    			MTN_QUOTE_WORDINGS_PKG.del_qu_word(
			    		#{del.wordingId, jdbcType=INTEGER}
			    	);
    		</foreach>
    		<foreach collection="saveQW" item="save">
		    		MTN_QUOTE_WORDINGS_PKG.save_qu_word(
		    				#{save.lineCd, jdbcType=VARCHAR},
		    				#{save.wordingId, jdbcType=INTEGER},		    				
		    				#{save.wording, jdbcType=VARCHAR},
		    				#{save.wordType, jdbcType=VARCHAR},
		    				#{save.activeTag, jdbcType=VARCHAR},
		    				#{save.defaultTag, jdbcType=VARCHAR},
		    				#{save.ocTag, jdbcType=VARCHAR},
		    				#{save.remarks, jdbcType=VARCHAR},
							#{save.createUser, jdbcType=VARCHAR},
							CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
							#{save.updateUser, jdbcType=VARCHAR},
							CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    			);
		    </foreach>
    	END;
    </update>
    
     <update id="saveMtnRegion" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveRegion" item="region">
	    		MTN_REGION_PKG.save_mtn_region(
	    			#{region.regionCd,jdbcType=VARCHAR},
			        #{region.description,jdbcType=VARCHAR},
			        #{region.activeTag,jdbcType=VARCHAR},
			        #{region.remarks,jdbcType=VARCHAR},
			        #{region.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{region.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{region.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{region.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteRegion" item="regionDel">
    			MTN_REGION_PKG.del_mtn_region(#{regionDel.regionCd,jdbcType=VARCHAR});
    		</foreach>
    	END;
    </update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.CurrencyRt" id="currencyRt">
		<result property="currencyCd"			column="CURRENCY_CD"/>
		<result property="histNo"				column="HIST_NO"/>
		<result property="currencyRt"			column="CURRENCY_RT"/>
		<result property="effDateFrom"			column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="activeTag"			column="ACTIVE_TAG"/>
		<result property="remarks"				column="REMARKS"/>
		<result property="createUser"			column="CREATE_USER"/>
		<result property="createDate"        	column="CREATE_DATE"        	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"        	column="UPDATE_USER"/>
		<result property="updateDate"			column="UPDATE_DATE"			typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
     	<result property="okDelete" 			column="OK_DELETE"/>
     </resultMap>
     
    <select id="retrieveMtnCurrencyRt" resultMap="currencyRt" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CURR_RT_PKG.ret_mtn_curr_rt(#{currencyCd, jdbcType=VARCHAR},
																			#{position, jdbcType=VARCHAR}, 
																			#{count, jdbcType=VARCHAR}, 
																			#{sortKey, jdbcType=VARCHAR}, 
																			#{order, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnCurrencyRt" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delCurrencyRt" item="delCurrRt">
    			MTN_CURR_RT_PKG.del_mtn_curr_rt(
    				#{delCurrRt.currencyCd},
    				#{delCurrRt.histNo}
    			);
    		</foreach>
    		<foreach collection="saveCurrencyRt" item="saveCurrRt">
    			MTN_CURR_RT_PKG.save_mtn_curr_rt(
    				#{saveCurrRt.currencyCd},
    				#{saveCurrRt.histNo,jdbcType=VARCHAR},
    				#{saveCurrRt.currencyRt},
    				CAST(to_timestamp(#{saveCurrRt.effDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    				#{saveCurrRt.activeTag},
    				#{saveCurrRt.remarks,jdbcType=VARCHAR},
					#{saveCurrRt.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveCurrRt.createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveCurrRt.updateUser},
					CAST(to_timestamp(#{saveCurrRt.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    	END;
    </update>

    <update id="saveMtnEndorsement" parameterType="java.util.Map">
     	BEGIN
     		<foreach collection="delEndt" item="endt">
     			MTN_ENDT_PKG.del_endt_code(#{endt.lineCd},	#{endt.endtCd});
     		</foreach>
     		<foreach collection="saveEndt" item="endt">
     			MTN_ENDT_PKG.save_endt_code(
     				#{endt.lineCd, jdbcType=VARCHAR},	#{endt.endtCd, jdbcType=VARCHAR},	#{endt.endtTitle, jdbcType=VARCHAR}, #{endt.description, jdbcType=VARCHAR},	
     				#{endt.defaultTag, jdbcType=VARCHAR},	#{endt.activeTag, jdbcType=VARCHAR},	#{endt.endtText01, jdbcType=VARCHAR},	#{endt.endtText02, jdbcType=VARCHAR},	
     				#{endt.endtText03, jdbcType=VARCHAR},	#{endt.endtText04, jdbcType=VARCHAR},	#{endt.endtText05, jdbcType=VARCHAR},	#{endt.endtText06, jdbcType=VARCHAR},	
     				#{endt.endtText07, jdbcType=VARCHAR},	#{endt.endtText08, jdbcType=VARCHAR},	#{endt.endtText09, jdbcType=VARCHAR},	#{endt.endtText10, jdbcType=VARCHAR},	
     				#{endt.endtText11, jdbcType=VARCHAR},	#{endt.endtText12, jdbcType=VARCHAR},	#{endt.endtText13, jdbcType=VARCHAR},	#{endt.endtText14, jdbcType=VARCHAR},	
     				#{endt.endtText15, jdbcType=VARCHAR},	#{endt.endtText16, jdbcType=VARCHAR},	#{endt.endtText17, jdbcType=VARCHAR},	#{endt.remarks, jdbcType=VARCHAR}, 
     				#{endt.createUser},	CAST(to_timestamp(#{endt.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),	#{endt.updateUser},	
     				CAST(to_timestamp(#{endt.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
     			);
     		</foreach>
     		
     		
    		<foreach collection="deleteDeductibles" item="deleteD">
    			MTN_DEDUCTIBLES_PKG.del_mtn_deductibles(
	    			#{deleteD.lineCd,jdbcType=VARCHAR},
					#{deleteD.deductibleCd,jdbcType=VARCHAR},
					#{deleteD.coverCd,jdbcType=INTEGER},
					#{deleteD.endtCd,jdbcType=VARCHAR}
	    		);
    		</foreach>
     		<foreach collection="saveDeductibles" item="saveD">
	    		MTN_DEDUCTIBLES_PKG.save_mtn_deductibles(
	    			#{saveD.lineCd,jdbcType=VARCHAR},
					#{saveD.coverCd,jdbcType=INTEGER},
					#{saveD.endtCd,jdbcType=VARCHAR},
					#{saveD.deductibleCd,jdbcType=VARCHAR},
					#{saveD.deductibleTitle,jdbcType=VARCHAR},
					#{saveD.deductibleText,jdbcType=VARCHAR},
					#{saveD.deductibleType,jdbcType=VARCHAR},
					#{saveD.deductibleRate,jdbcType=INTEGER},
					#{saveD.deductibleAmt,jdbcType=INTEGER},
					#{saveD.minAmt,jdbcType=INTEGER},
					#{saveD.maxAmt,jdbcType=INTEGER},
					#{saveD.activeTag,jdbcType=VARCHAR},
					#{saveD.defaultTag,jdbcType=VARCHAR},
					#{saveD.remarks,jdbcType=VARCHAR},
					#{saveD.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveD.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
     	END;
     </update>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.Deductibles" id="endt_ded">
		<result property="lineCd" 				column="LINE_CD"/>
		<result property="coverCd"	 			column="COVER_CD"/>
		<result property="endtCd" 				column="ENDT_CD"/>
		<result property="deductibleCd" 		column="DEDUCTIBLE_CD"/>
		<result property="deductibleTitle" 		column="DEDUCTIBLE_TITLE"/>
		<result property="deductibleType" 		column="DEDUCTIBLE_TYPE"/>
		<result property="typeDesc" 			column="TYPE_DESC"/>
		<result property="deductibleRate" 		column="DEDUCTIBLE_RATE"/>
		<result property="deductibleAmt" 		column="DEDUCTIBLE_AMT"/>
		<result property="minAmt" 				column="MIN_AMT"/>
		<result property="maxAmt" 				column="MAX_AMT"/>
		<result property="deductibleText" 		column="DEDUCTIBLE_TEXT"/>
		<result property="activeTag" 			column="D_ACTIVE_TAG"/>
		<result property="defaultTag" 			column="D_DEFAULT_TAG"/>
		<result property="remarks" 				column="D_REMARKS"/>
		<result property="createUser" 			column="D_CREATE_USER"/>
		<result property="createDate" 			column="D_CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 			column="D_UPDATE_USER"/>
		<result property="updateDate" 			column="D_UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 		    column="D_OK_DELETE"/>
	</resultMap>
	
	<update id="saveMtnPolicyWordings" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deletePW" item="del">
	    			MTN_POL_WORDINGS_PKG.del_pol_word(
	    				#{del.lineCd, jdbcType=VARCHAR},
			    		#{del.wordingCd, jdbcType=VARCHAR}
			    	);
    		</foreach>
    		<foreach collection="savePW" item="save">
		    		MTN_POL_WORDINGS_PKG.save_pol_word(
		    			#{save.lineCd, jdbcType=VARCHAR},
		    			#{save.wordingCd, jdbcType=VARCHAR},
		    			#{save.wordingTitle, jdbcType=VARCHAR},
		    			#{save.wordType, jdbcType=VARCHAR},
		    			#{save.activeTag, jdbcType=VARCHAR},
		    			#{save.defaultTag, jdbcType=VARCHAR},
		    			#{save.ocTag, jdbcType=VARCHAR},
		    			#{save.wordText01, jdbcType=VARCHAR},
						#{save.wordText02, jdbcType=VARCHAR},
						#{save.wordText03, jdbcType=VARCHAR},
						#{save.wordText04, jdbcType=VARCHAR},
						#{save.wordText05, jdbcType=VARCHAR},
						#{save.wordText06, jdbcType=VARCHAR},
						#{save.wordText07, jdbcType=VARCHAR},
						#{save.wordText08, jdbcType=VARCHAR},
						#{save.wordText09, jdbcType=VARCHAR},
						#{save.wordText10, jdbcType=VARCHAR},
						#{save.wordText11, jdbcType=VARCHAR},
						#{save.wordText12, jdbcType=VARCHAR},
						#{save.wordText13, jdbcType=VARCHAR},
						#{save.wordText14, jdbcType=VARCHAR},
						#{save.wordText15, jdbcType=VARCHAR},
						#{save.wordText16, jdbcType=VARCHAR},
						#{save.wordText17, jdbcType=VARCHAR},
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
	
	<update id="saveMtnCatPeril" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delCatPeril" item="delCat">
    			MTN_CAT_PERIL_PKG.del_mtn_cat(
    				#{delCat.lineCd},
    				#{delCat.objectId},
    				#{delCat.catPerilId}
    			);
    		</foreach>
    		<foreach collection="saveCatPeril" item="saveCat">
    			MTN_CAT_PERIL_PKG.save_mtn_cat(
    				#{saveCat.lineCd},
    				#{saveCat.objectId},
    				#{saveCat.catPerilId,jdbcType=VARCHAR},
    				#{saveCat.catPerilName},
    				#{saveCat.catPerilAbbr},
    				#{saveCat.pctSharePrem,jdbcType=VARCHAR},
    				#{saveCat.activeTag,jdbcType=VARCHAR},
    				#{saveCat.remarks,jdbcType=VARCHAR},
					#{saveCat.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveCat.createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveCat.updateUser},
					CAST(to_timestamp(#{saveCat.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnProvince" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveProvince" item="province">
	    		MTN_PROVINCE_PKG.save_mtn_province(
	    			#{province.provinceCd,jdbcType=VARCHAR},
			        #{province.description,jdbcType=VARCHAR},
			        #{province.regionCd,jdbcType=VARCHAR},
			        #{province.activeTag,jdbcType=VARCHAR},
			        #{province.remarks,jdbcType=VARCHAR},
			        #{province.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{province.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{province.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{province.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteProvince" item="provinceDel">
    			MTN_PROVINCE_PKG.del_mtn_province(
    											  #{provinceDel.provinceCd,jdbcType=VARCHAR},
    											  #{provinceDel.regionCd,jdbcType=VARCHAR});
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnCresta" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delCrestaZone" item="delCresta">
    			MTN_CRESTA_PKG.del_mtn_cresta(
    				#{delCresta.zoneCd}
    			);
    		</foreach>
    		<foreach collection="saveCrestaZone" item="saveCresta">
    			MTN_CRESTA_PKG.save_mtn_cresta(
    				#{saveCresta.zoneCd},
    				#{saveCresta.zoneDesc},
    				#{saveCresta.activeTag,jdbcType=VARCHAR},
    				#{saveCresta.remarks,jdbcType=VARCHAR},
					#{saveCresta.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveCresta.createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveCresta.updateUser},
					CAST(to_timestamp(#{saveCresta.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    			);
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnCedingCompany" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    	 v_ceding_id MTN_CEDING_REPRESENTATIVE.CEDING_ID%TYPE;
    	BEGIN
    		MTN_CED_COM_PKG.save_mtn_ced_co(
    						v_ceding_id,
    						#{cedingId, jdbcType=VARCHAR},
    						#{cedingName},
    						#{cedingAbbr},
    						#{addrLine1},
    						#{addrLine2, jdbcType=VARCHAR},
    						#{addrLine3, jdbcType=VARCHAR},
    						#{zipCd, jdbcType=VARCHAR},
    						#{contactNo, jdbcType=VARCHAR},
    						#{emailAdd, jdbcType=VARCHAR},
    						#{bussTypeId, jdbcType=VARCHAR},
    						#{tinNo, jdbcType=VARCHAR},
    						#{activeTag, jdbcType=VARCHAR},
    						#{govtTag, jdbcType=VARCHAR},
    						#{oldCedingId, jdbcType=VARCHAR},
    						#{membershipTag, jdbcType=VARCHAR},
    						CAST(to_timestamp(#{membershipDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    						CAST(to_timestamp(#{withdrawDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    						CAST(to_timestamp(#{inactiveDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    						#{treatyTag, jdbcType=VARCHAR},
    						#{withdrawTag, jdbcType=VARCHAR},
    						#{remarks, jdbcType=VARCHAR},
    						#{createUser},
    						CAST(to_timestamp(#{createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    						#{updateUser},
    						CAST(to_timestamp(#{updateDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    		);
    		
    		#{outCedingId, mode=OUT, jdbcType=VARCHAR} := v_ceding_id;
    		
   			<foreach collection="delCedingRepList" item="del">
    			MTN_CED_REP_PKG.del_mtn_ced_rep(
    								v_ceding_id,
    								#{del.cedingRepId}
    						);
    		</foreach>
    		<foreach collection="saveCedingRepList" item="save">
		    		MTN_CED_REP_PKG.save_mtn_ced_rep(
		    							#{uploadDate, mode=OUT, jdbcType=VARCHAR},
		    							v_ceding_id,
		    							#{save.cedingRepId, jdbcType=VARCHAR},
		    							#{save.designation, jdbcType=VARCHAR},
		    							#{save.firstName},
		    							#{save.middleInitial, jdbcType=VARCHAR},
		    							#{save.lastName},
		    							#{save.defaultTag, jdbcType=VARCHAR},
		    							#{save.position, jdbcType=VARCHAR},
		    							#{save.department, jdbcType=VARCHAR},
		    							#{save.contactNo, jdbcType=VARCHAR},
		    							#{save.emailAdd, jdbcType=VARCHAR},
		    							#{save.eSignature, jdbcType=VARCHAR},
		    							#{createUser},
			    						CAST(to_timestamp(#{createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			    						#{updateUser},
			    						CAST(to_timestamp(#{updateDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		            );
    		</foreach>
    	END;
    </update>

	<update id="saveMtnSectionCover" parameterType="java.util.Map" statementType="CALLABLE">
		DECLARE
			v_cover_cd	MTN_SECTION_COVERS.COVER_CD%TYPE;
		BEGIN
			<foreach collection="addSec" item="sec">
				MTN_SEC_COVER_PKG.save_mtn_sec_cov(
					#{sec.lineCd,jdbcType=VARCHAR},v_cover_cd,#{sec.coverCdAbbr,jdbcType=VARCHAR},
                                        #{sec.coverName,jdbcType=VARCHAR},#{sec.activeTag,jdbcType=VARCHAR},#{sec.section,jdbcType=VARCHAR},
                                        #{sec.sortSeq,jdbcType=VARCHAR},#{sec.defaultTag,jdbcType=VARCHAR},#{sec.bulletNo,jdbcType=VARCHAR},
                                        #{sec.addSi,jdbcType=VARCHAR},#{sec.remarks,jdbcType=VARCHAR},#{sec.createUser,jdbcType=VARCHAR},
                                        CAST(to_timestamp(#{sec.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
                                        #{sec.updateUser,jdbcType=VARCHAR},
                                        CAST(to_timestamp(#{sec.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
                                        
				);
				<foreach collection="sec.deductibles" item="saveD">
		    		MTN_DEDUCTIBLES_PKG.save_mtn_deductibles(
		    			#{saveD.lineCd,jdbcType=VARCHAR},
						v_cover_cd,
						#{saveD.endtCd,jdbcType=VARCHAR},
						#{saveD.deductibleCd,jdbcType=VARCHAR},
						#{saveD.deductibleTitle,jdbcType=VARCHAR},
						#{saveD.deductibleText,jdbcType=VARCHAR},
						#{saveD.deductibleType,jdbcType=VARCHAR},
						#{saveD.deductibleRate,jdbcType=INTEGER},
						#{saveD.deductibleAmt,jdbcType=INTEGER},
						#{saveD.minAmt,jdbcType=INTEGER},
						#{saveD.maxAmt,jdbcType=INTEGER},
						#{saveD.activeTag,jdbcType=VARCHAR},
						#{saveD.defaultTag,jdbcType=VARCHAR},
						#{saveD.remarks,jdbcType=VARCHAR},
						#{saveD.createUser,jdbcType=VARCHAR},
						CAST(to_timestamp(#{saveD.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{saveD.updateUser,jdbcType=VARCHAR},
						CAST(to_timestamp(#{saveD.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
	    		</foreach>
			</foreach>
			
			<foreach collection="saveSec" item="sec">
				MTN_SEC_COVER_PKG.save_mtn_sec_cov(
					#{sec.lineCd,jdbcType=VARCHAR},#{sec.coverCd,jdbcType=VARCHAR},#{sec.coverCdAbbr,jdbcType=VARCHAR},
                                        #{sec.coverName,jdbcType=VARCHAR},#{sec.activeTag,jdbcType=VARCHAR},#{sec.section,jdbcType=VARCHAR},
                                        #{sec.sortSeq,jdbcType=VARCHAR},#{sec.defaultTag,jdbcType=VARCHAR},#{sec.bulletNo,jdbcType=VARCHAR},
                                        #{sec.addSi,jdbcType=VARCHAR},#{sec.remarks,jdbcType=VARCHAR},#{sec.createUser,jdbcType=VARCHAR},
                                        CAST(to_timestamp(#{sec.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
                                        #{sec.updateUser,jdbcType=VARCHAR},
                                        CAST(to_timestamp(#{sec.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
                                        
				);
			</foreach>
			<foreach collection="delSec" item="sec">
				MTN_SEC_COVER_PKG.del_mtn_sec_cov(
					#{sec.lineCd,jdbcType=VARCHAR},
					#{sec.coverCd,jdbcType=VARCHAR}
				);
			</foreach>
			<foreach collection="deleteDeductibles" item="deleteD">
    			MTN_DEDUCTIBLES_PKG.del_mtn_deductibles(
	    			#{deleteD.lineCd,jdbcType=VARCHAR},
					#{deleteD.deductibleCd,jdbcType=VARCHAR},
					#{deleteD.coverCd,jdbcType=INTEGER},
					#{deleteD.endtCd,jdbcType=VARCHAR}
	    		);
    		</foreach>
     		<foreach collection="saveDeductibles" item="saveD">
	    		MTN_DEDUCTIBLES_PKG.save_mtn_deductibles(
	    			#{saveD.lineCd,jdbcType=VARCHAR},
					#{saveD.coverCd,jdbcType=INTEGER},
					#{saveD.endtCd,jdbcType=VARCHAR},
					#{saveD.deductibleCd,jdbcType=VARCHAR},
					#{saveD.deductibleTitle,jdbcType=VARCHAR},
					#{saveD.deductibleText,jdbcType=VARCHAR},
					#{saveD.deductibleType,jdbcType=VARCHAR},
					#{saveD.deductibleRate,jdbcType=INTEGER},
					#{saveD.deductibleAmt,jdbcType=INTEGER},
					#{saveD.minAmt,jdbcType=INTEGER},
					#{saveD.maxAmt,jdbcType=INTEGER},
					#{saveD.activeTag,jdbcType=VARCHAR},
					#{saveD.defaultTag,jdbcType=VARCHAR},
					#{saveD.remarks,jdbcType=VARCHAR},
					#{saveD.createUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{saveD.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{saveD.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.QuoteStatusReason" id="quoteStatusReasonMap">
		<result property="reasonCd" column="REASON_CD"/>
		<result property="description" column="DESCRIPTION"/>
		<result property="remarks" column="REMARKS"/>
		<result property="activeTag" column="ACTIVE_TAG"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" column="OK_DELETE"/>
	</resultMap>
	
	<select id="retMtnQuoteReason" resultMap="quoteStatusReasonMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_QUOTE_REASON_PKG.ret_mtn_qu_reason(#{reasonCd, jdbcType=VARCHAR},#{activeTag, jdbcType=VARCHAR},null,null,null,null))
	</select>
	
	<update id="saveMtnQuoteReason" parameterType="java.util.Map">
		BEGIN
			<foreach collection="delQuReason" item="reason">
				MTN_QUOTE_REASON_PKG.del_mtn_qu_reason(#{reason.reasonCd});
			</foreach>
			<foreach collection="saveQuReason" item="reason">
				MTN_QUOTE_REASON_PKG.save_mtn_qu_reason(#{reason.reasonCd,jdbcType=VARCHAR},#{reason.description,jdbcType=VARCHAR},
														#{reason.remarks,jdbcType=VARCHAR},#{reason.activeTag,jdbcType=VARCHAR},
														#{reason.createUser,jdbcType=VARCHAR},
														CAST(to_timestamp(#{reason.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{reason.updateUser,jdbcType=VARCHAR},
														CAST(to_timestamp(#{reason.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<update id="saveMtnSpoilageReason" parameterType="java.util.Map">
		BEGIN
			<foreach collection="delSpoilReason" item="reason">
				MTN_SPOIL_PKG.del_mtn_spoil(#{reason.spoilCd});
			</foreach>
			<foreach collection="saveSpoilReason" item="reason">
				MTN_SPOIL_PKG.save_mtn_spoil(#{reason.spoilCd,jdbcType=VARCHAR},#{reason.description,jdbcType=VARCHAR},
														#{reason.remarks,jdbcType=VARCHAR},#{reason.activeTag,jdbcType=VARCHAR},
														#{reason.createUser,jdbcType=VARCHAR},
														CAST(to_timestamp(#{reason.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{reason.updateUser,jdbcType=VARCHAR},
														CAST(to_timestamp(#{reason.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<update id="saveMtnDistrict">
		BEGIN
			<foreach collection="saveDistrict" item="district">
				MTN_DISTRICT_PKG.save_mtn_district(
					#{district.districtCd},#{district.districtDesc,jdbcType=VARCHAR},#{regionCd},#{provinceCd},
					#{cityCd},#{district.activeTag},#{district.remarks,jdbcType=VARCHAR},#{district.createUser},
					CAST(to_timestamp(#{district.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{district.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{district.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
			</foreach>
			<foreach collection="delDistrict" item="district">
				MTN_DISTRICT_PKG.del_mtn_district(#{district.districtCd},#{regionCd},#{provinceCd},#{cityCd});
			</foreach>
		END;
	</update>
	
	<update id="saveMtnBlock">
		BEGIN
			<foreach collection="saveBlock" item="block">
				MTN_BLOCK_PKG.save_mtn_block(
					#{block.blockCd},#{block.blockDesc,jdbcType=VARCHAR},#{districtCd},#{regionCd},#{provinceCd},
					#{cityCd},#{block.activeTag},#{block.remarks,jdbcType=VARCHAR},#{block.createUser},
					CAST(to_timestamp(#{block.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{block.updateUser,jdbcType=VARCHAR},
					CAST(to_timestamp(#{block.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
			</foreach>
			<foreach collection="delBlock" item="block">
				MTN_BLOCK_PKG.del_mtn_block(#{block.blockCd},#{districtCd},#{regionCd},#{provinceCd},#{cityCd});
			</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.UserAmtLimit" id="UserAmtLimitMap">
		<result property="userGrp" column="USER_GRP"/>
		<result property="lineCd" column="LINE_CD"/>
		<result property="allAmtSw" column="ALL_AMT_SW"/>
		<result property="amtLimit" column="AMT_LIMIT"/>
		<result property="remarks" column="REMARKS"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.NonRenewalReason" id="nonRenewReasonMap">
		<result property="reasonCd" column="REASON_CD"/>
		<result property="description" column="DESCRIPTION"/>
		<result property="remarks" column="REMARKS"/>
		<result property="activeTag" column="ACTIVE_TAG"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" column="OK_DELETE"/>
	</resultMap>

	<select id="retMtnUserAmtLimit" resultMap="UserAmtLimitMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_USR_AMT_LMT_PKG.ret_mtn_usr_amt_lmt(#{userGrp,jdbcType=VARCHAR},#{lineCd,jdbcType=VARCHAR},null,null,null,null))
	</select>
	
	<update id="saveMtnUserAmtLimit" parameterType="java.util.Map">
		BEGIN
			<foreach collection="delUserAmtLmt" item="userAmtLmt">
				MTN_USR_AMT_LMT_PKG.del_mtn_usr_amt_lmt(#{userAmtLmt.userGrp},#{userAmtLmt.lineCd});
			</foreach>
			<foreach collection="saveUserAmtLmt" item="userAmtLmt">
				MTN_USR_AMT_LMT_PKG.save_mtn_usr_amt_lmt(#{userAmtLmt.userGrp,jdbcType=VARCHAR},#{userAmtLmt.lineCd,jdbcType=VARCHAR},
						#{userAmtLmt.allAmtSw,jdbcType=VARCHAR},#{userAmtLmt.amtLimit,jdbcType=VARCHAR},#{userAmtLmt.remarks,jdbcType=VARCHAR},
						#{userAmtLmt.createUser,jdbcType=VARCHAR},CAST(to_timestamp(#{userAmtLmt.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{userAmtLmt.updateUser,jdbcType=VARCHAR},CAST(to_timestamp(#{userAmtLmt.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<select id="retMtnNonRenewReason" resultMap="nonRenewReasonMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_NONRENEW_REASON_PKG.ret_nrnw_rsn(#{reasonCd, jdbcType=VARCHAR},
																 #{activeTag, jdbcType=VARCHAR},
																 #{position, jdbcType=VARCHAR},
															     #{count, jdbcType=VARCHAR},
															     #{sortKey, jdbcType=VARCHAR},
																 #{order, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnNonRenewalReason">
		BEGIN
			<foreach collection="saveNonRenewalReasonList" item="i">
				MTN_NONRENEW_REASON_PKG.save_nrnw_rsn(
					#{i.reasonCd},
					#{i.description},
					#{i.activeTag, jdbcType=VARCHAR},
					#{i.remarks, jdbcType=VARCHAR},
					#{i.createUser},
					CAST(to_timestamp(#{i.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{i.updateUser},
					CAST(to_timestamp(#{i.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
			</foreach>
			<foreach collection="delNonRenewalReasonList" item="i">
				MTN_NONRENEW_REASON_PKG.del_nrnw_rsn(#{i.reasonCd});
			</foreach>
		END;
	</update>
	
	<update id="saveMtnOtherCharge" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteOChrg" item="del">
	    			MTN_CHARGES_PKG.del_charge(
			    		#{del.chargeCd, jdbcType=INTEGER}
			    	);
    		</foreach>
    		<foreach collection="saveOChrg" item="save">
		    		MTN_CHARGES_PKG.save_charge(
		    			#{save.chargeCd, jdbcType=INTEGER},
		    			#{save.chargeDesc, jdbcType=VARCHAR},		    				
		    			#{save.chargeType, jdbcType=VARCHAR},
		    			#{save.premRt, jdbcType=DECIMAL},
		    			#{save.defaultAmt, jdbcType=DECIMAL},
		    			#{save.activeTag, jdbcType=VARCHAR},
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
    
    <update id="saveMtnTreaty" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteTreaty" item="del">
	    			MTN_TREATY_PKG.del_treaty(
			    		#{del.treatyId, jdbcType=INTEGER}
			    	);
    		</foreach>
    		<foreach collection="saveTreaty" item="save">
		    		MTN_TREATY_PKG.save_treaty(
		    			#{save.treatyId, jdbcType=INTEGER},
		    			#{save.treatyName, jdbcType=VARCHAR},		    				
		    			#{save.treatyAbbr, jdbcType=VARCHAR},
		    			#{save.treatyType, jdbcType=VARCHAR},
		    			#{save.activeTag, jdbcType=VARCHAR},
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
						);
    		</foreach>
    	END;
    </update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.ApprovalFunction" id="approvalMap">
		<result property="approvalCd" 		column="APPROVAL_CD"/>
		<result property="description" 		column="DESCRIPTION"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 		column="OK_DELETE"/>
	</resultMap>
	

	<resultMap type="ph.cpi.rest.api.model.maintenance.ApproverFn" id="approvalFunctionMap">
		<result property="approvalCd" 		column="APPROVAL_CD"/>
		<result property="userId" 			column="USER_ID"/>
		<result property="userName" 		column="USER_NAME"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>

	<resultMap type="ph.cpi.rest.api.model.maintenance.ApproverFn" id="approvalFnMap">
		<result property="userId" 			column="APPROVAL_USER_ID"/>
		<result property="userName" 		column="USERNAME"/>
		<result property="createUser" 		column="APPROVAL_CREATE_USER"/>
		<result property="createDate" 		column="APPROVAL_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="APPROVAL_UPDATE_USER"/>
		<result property="updateDate" 		column="APPROVAL_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
    <select id="retrieveMtnApproval" resultMap="approvalMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_APPROVAL_FUNCTION_PKG.retrieve_mtn_approval(#{approvalCd, jdbcType=VARCHAR},
																					 #{position 	, jdbcType=VARCHAR},
																				     #{count		, jdbcType=VARCHAR},
																				     #{sortKey		, jdbcType=VARCHAR},
																					 #{order		, jdbcType=VARCHAR}))
	</select>
	
	<select id="retrieveMtnApprovalFunction" resultMap="approvalFunctionMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_APPROVAL_FUNCTION_PKG.retrieve_mtn_approval_function(#{approvalCd},
																					 #{position 	, jdbcType=VARCHAR},
																				     #{count		, jdbcType=VARCHAR},
																				     #{sortKey		, jdbcType=VARCHAR},
																					 #{order		, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnApproval" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="deleteMtnApproval" item="del">
	    			MTN_APPROVAL_FUNCTION_PKG.del_mtn_approval(
			    		#{del.approvalCd}
			    	);
    		</foreach>
    		<foreach collection="saveMtnApproval" item="save">
		    		MTN_APPROVAL_FUNCTION_PKG.save_mtn_approval(
		    			#{save.approvalCd},
		    			#{save.description, jdbcType=VARCHAR},	
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser},
						CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.RetAmt" id="retAmtMap">
     	<result property="lineCd" 		column="LINE_CD"/>
	    <result property="lineClassCd" 	column="LINE_CLASS_CD"/>
	    <result property="currencyCd" 	column="CURRENCY_CD"/>
     	<result property="retentionId" 	column="RETENTION_ID"/>
	    <result property="retLineAmt" 	column="RET_LINE_AMT"/>
	    <result property="effDateFrom" 	column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="activeTag" 	column="ACTIVE_TAG"/>
	    <result property="remarks" 		column="REMARKS"/>
	    <result property="createUser" 	column="CREATE_USER"/>
	    <result property="createDate" 	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="updateUser" 	column="UPDATE_USER"/>
	    <result property="updateDate" 	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete" 	column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnRetAmt" resultMap="retAmtMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_RETENTION_AMT_PKG.ret_mtn_ret_amt(#{lineCd, jdbcType=VARCHAR},
																	  #{lineClassCd, jdbcType=VARCHAR},
																	  #{currencyCd, jdbcType=VARCHAR},
																	  #{retentionId, jdbcType=INTEGER},
																	  '',
																	  '',
																	  '',
																	  ''))
	</select>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.TreatyShare" id="assocTreatyShare">
     	<result property="treatyYear" column="TS_TREATY_YEAR"/>
	    <result property="treatyId"   column="TS_TREATY_ID"/>
	    <result property="trtyCedId"  column="TS_TRTY_CED_ID"/>
	    <result property="cedingName" column="TS_CEDING_NAME"/>
	    <result property="cedingAbbr" column="CEDING_ABBR"/>
	    <result property="pctShare"   column="PCT_SHARE"/>
	    <result property="sortSeq"    column="TS_SORT_SEQ"/>
	    <result property="remarks"    column="TS_REMARKS"/>
	    <result property="createUser" column="TS_CREATE_USER"/>
	    <result property="createDate" column="TS_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="updateUser" column="TS_UPDATE_USER"/>
	    <result property="updateDate" column="TS_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete"	  column="TS_OK_DELETE"/>
	    
	    <association property="cedRetentionList" resultMap="assocCedingRetention"/>
     </resultMap>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.TreatyShare" id="treatyShareMap">
     	<result property="treatyYear" column="TREATY_YEAR"/>
	    <result property="treatyId"   column="TREATY_ID"/>
	    <result property="trtyCedId"  column="TRTY_CED_ID"/>
	    <result property="cedingName" column="CEDING_NAME"/>
	    <result property="cedingAbbr" column="CEDING_ABBR"/>
	    <result property="pctShare"   column="PCT_SHARE"/>
	    <result property="sortSeq"    column="SORT_SEQ"/>
	    <result property="remarks"    column="REMARKS"/>
	    <result property="createUser" column="CREATE_USER"/>
	    <result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="updateUser" column="UPDATE_USER"/>
	    <result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete"	  column="OK_DELETE"/>
     </resultMap>
    
    <select id="retrieveMtnTreatyShare" resultMap="treatyShareMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_TREATY_SHARE_PKG.ret_mtn_treaty_share(#{treatyYear, jdbcType=INTEGER},
																	  	  #{treatyId, jdbcType=INTEGER},
																	      '',
																	      '',
																	      '',
																	      ''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.CedingRetention" id="assocCedingRetention">
     	<result property="treatyYear" 	 column="CR_TREATY_YEAR"/>
		<result property="treatyId" 	 column="CR_TREATY_ID"/>
		<result property="trtyCedId" 	 column="CR_TRTY_CED_ID"/>
		<result property="cedingId" 	 column="CEDING_ID"/>
		<result property="cedingName" 	 column="CR_CEDING_NAME"/>
		<result property="membershipTag" column="MEMBERSHIP_TAG"/>
		<result property="inactiveDate"  column="INACTIVE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="retLine1" 	 column="RET_LINE1"/>
		<result property="retLine2" 	 column="RET_LINE2"/>
		<result property="remarks" 		 column="CR_REMARKS"/>
		<result property="createUser" 	 column="CR_CREATE_USER"/>
		<result property="createDate" 	 column="CR_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 	 column="CR_UPDATE_USER"/>
		<result property="updateDate" 	 column="CR_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 	 column="TS_OK_DELETE"/>
     </resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.CedingRetention" id="cedingRetentionMap">
     	<result property="treatyYear" 	 column="TREATY_YEAR"/>
		<result property="treatyId" 	 column="TREATY_ID"/>
		<result property="trtyCedId" 	 column="TRTY_CED_ID"/>
		<result property="cedingId" 	 column="CEDING_ID"/>
		<result property="cedingName" 	 column="CEDING_NAME"/>
		<result property="membershipTag" column="MEMBERSHIP_TAG"/>
		<result property="inactiveDate"  column="INACTIVE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="retLine1" 	 column="RET_LINE1"/>
		<result property="retLine2" 	 column="RET_LINE2"/>
		<result property="remarks" 		 column="REMARKS"/>
		<result property="createUser" 	 column="CREATE_USER"/>
		<result property="createDate" 	 column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 	 column="UPDATE_USER"/>
		<result property="updateDate" 	 column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 	 column="OK_DELETE"/>
     </resultMap>
    
    <select id="retrieveMtnCedingRetention" resultMap="cedingRetentionMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_CEDING_RETENTION_PKG.ret_mtn_ced_retention(#{treatyYear, jdbcType=INTEGER},
																		  	   #{treatyId, jdbcType=INTEGER},
																		  	   #{trtyCedId, jdbcType=VARCHAR},
																		       '',
																		       '',
																		       '',
																		       ''))
	</select>
    
    <update id="saveMtnTreatyComm" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    		v_count NUMBER;
    	BEGIN
    		<foreach collection="deleteTreatyComm" item="del">
	    		MTN_TREATY_COMM_PKG.del_treaty_com(
			    	#{del.treatyYear, jdbcType=INTEGER},
			    	#{del.treatyId, jdbcType=INTEGER}
			    );
    		</foreach>
    		
    		<foreach collection="deleteTreatyShare" item="del">
    			MTN_TREATY_SHARE_PKG.del_treaty_share(
			   		#{del.treatyYear, jdbcType=INTEGER},
					#{del.treatyId, jdbcType=INTEGER},
					#{del.trtyCedId, jdbcType=VARCHAR}
				);
    		</foreach>
    		
    		<foreach collection="deleteCedRetention" item="del">
    			MTN_CEDING_RETENTION_PKG.del_mtn_ced_retention(
	    			#{del.treatyYear, jdbcType=INTEGER},
			   		#{del.treatyId, jdbcType=INTEGER},
			   		#{del.trtyCedId, jdbcType=VARCHAR},
			   		#{del.cedingId, jdbcType=VARCHAR}
			   	);
    		</foreach>
    		
    		<foreach collection="saveTreatyComm" item="save">
		    	MTN_TREATY_COMM_PKG.save_treaty_com(
		    		#{save.treatyYear, jdbcType=INTEGER},
		    		#{save.treatyId, jdbcType=INTEGER},
		    		#{save.commRate, jdbcType=DECIMAL},
		    		#{save.sortSeq, jdbcType=INTEGER},
		    		#{save.createUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.updateUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    	);
		    		
		    	<foreach collection="save.treatyShareList" item="treatyShare">
		    		MTN_TREATY_SHARE_PKG.save_treaty_share(
				    	#{treatyShare.treatyYear, jdbcType=INTEGER},
				    	#{treatyShare.treatyId, jdbcType=INTEGER},
				    	#{treatyShare.trtyCedId, jdbcType=VARCHAR},
				    	#{treatyShare.pctShare, jdbcType=FLOAT},
				    	#{treatyShare.sortSeq, jdbcType=INTEGER},
				    	#{treatyShare.remarks, jdbcType=VARCHAR},
						#{treatyShare.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{treatyShare.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{treatyShare.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{treatyShare.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				    );
					    
				    <foreach collection="treatyShare.cedRetentionList" item="cedRet">
				    	MTN_CEDING_RETENTION_PKG.save_mtn_ced_retention(
				    		#{cedRet.treatyYear, jdbcType=INTEGER},
				    		#{cedRet.treatyId, jdbcType=INTEGER},
				    		#{cedRet.trtyCedId, jdbcType=VARCHAR},
				    		#{cedRet.cedingId, jdbcType=VARCHAR},
				    		#{cedRet.retLine1, jdbcType=INTEGER},
				    		#{cedRet.retLine2, jdbcType=INTEGER},
				    		#{cedRet.remarks, jdbcType=VARCHAR},
							#{cedRet.createUser, jdbcType=VARCHAR},
							CAST(to_timestamp(#{cedRet.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
							#{cedRet.updateUser, jdbcType=VARCHAR},
							CAST(to_timestamp(#{cedRet.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				    	);
				    </foreach>
		    	</foreach>
    		</foreach>
    		SELECT COUNT(*)
    		  INTO v_count
    		FROM MTN_TREATY_COMM;
    	END;
    </update>
    
    <update id="saveMtnTreatyShare" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    		v_count NUMBER;
    	BEGIN
		    <foreach collection="deleteTreatyShare" item="del">
			   	MTN_TREATY_SHARE_PKG.del_treaty_share(
			   		#{del.treatyYear, jdbcType=INTEGER},
					#{del.treatyId, jdbcType=INTEGER},
					#{del.trtyCedId, jdbcType=VARCHAR}
				);
		    </foreach>
		    <foreach collection="saveTreatyShare" item="save">
			    MTN_TREATY_SHARE_PKG.save_treaty_share(
			    	#{save.treatyYear, jdbcType=INTEGER},
			    	#{save.treatyId, jdbcType=INTEGER},
			    	#{save.trtyCedId, jdbcType=VARCHAR},
			    	#{save.pctShare, jdbcType=FLOAT},
			    	#{save.sortSeq, jdbcType=INTEGER},
			    	#{save.remarks, jdbcType=VARCHAR},
					#{save.createUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.updateUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			    );
		    </foreach>
	    	SELECT COUNT(*)
	    	  INTO v_count
	    	FROM MTN_TREATY_SHARE;
    	END;
    </update>
    
    <update id="saveMtnCedRetention" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    		v_count NUMBER;
    	BEGIN
    		<foreach collection="deleteCedRetention" item="del">
	    		MTN_CEDING_RETENTION_PKG.del_mtn_ced_retention(
	    			#{del.treatyYear, jdbcType=INTEGER},
			   		#{del.treatyId, jdbcType=INTEGER},
			   		#{del.trtyCedId, jdbcType=VARCHAR},
			   		#{del.cedingId, jdbcType=VARCHAR}
			   	);
    		</foreach>
    		<foreach collection="saveCedRetention" item="save">
		    	MTN_CEDING_RETENTION_PKG.save_mtn_ced_retention(
		    		#{save.treatyYear, jdbcType=INTEGER},
		    		#{save.treatyId, jdbcType=INTEGER},
		    		#{save.trtyCedId, jdbcType=VARCHAR},
		    		#{save.cedingId, jdbcType=VARCHAR},
		    		#{save.retLine1, jdbcType=INTEGER},
		    		#{save.retLine2, jdbcType=INTEGER},
		    		#{save.remarks, jdbcType=VARCHAR},
					#{save.createUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.updateUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    	);
    		</foreach>
    		SELECT COUNT(*)
    		  INTO v_count
    		FROM MTN_CEDING_RETENTION;
    	END;
    </update>
    
    <update id="checkTreatyYear" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_TREATY_COMM_PKG.check_year(#{copyToYear, jdbcType=INTEGER})
		}	
	</update>
	
	<update id="copyMtnTreatyComm" parameterType="java.util.Map">
		BEGIN
			MTN_TREATY_COMM_PKG.copy_treaty_com(
				#{copyFromYear, jdbcType=INTEGER},
				#{copyToYear, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyMtnTreatyShare" parameterType="java.util.Map">
		BEGIN
			MTN_TREATY_SHARE_PKG.copy_treaty_share(
				#{copyFromYear, jdbcType=INTEGER},
				#{copyToYear, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<update id="copyMtnCedRetention" parameterType="java.util.Map">
		BEGIN
			MTN_CEDING_RETENTION_PKG.copy_mtn_ced_retention(
				#{copyFromYear, jdbcType=INTEGER},
				#{copyToYear, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
    
    <update id="saveMtnRetAmt" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteRetAmt" item="del">
	    			MTN_RETENTION_AMT_PKG.del_ret_amt(
			    		#{del.retentionId, jdbcType=INTEGER}
			    	);
    		</foreach>
    		<foreach collection="saveRetAmt" item="save">
		    		MTN_RETENTION_AMT_PKG.save_ret_amt(
		    			#{save.lineCd, jdbcType=VARCHAR},
		    			#{save.lineClassCd, jdbcType=VARCHAR},
		    			#{save.currencyCd, jdbcType=VARCHAR},
		    			#{save.retentionId, jdbcType=INTEGER},
		    			#{save.retLineAmt, jdbcType=DECIMAL},
		    			CAST(to_timestamp(#{save.effDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		    			#{save.activeTag, jdbcType=VARCHAR},
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
    
    <update id="checkRetAmt" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_RETENTION_AMT_PKG.check_ret_amt(
																				#{copyFromRetentionId, jdbcType=INTEGER},
																				#{copyFromLineCd, jdbcType=VARCHAR},
																				#{copyFromLineClassCd, jdbcType=VARCHAR},
																				#{copyFromCurrencyCd, jdbcType=VARCHAR},
																				#{copyToLineCd, jdbcType=VARCHAR},
																				#{copyToLineClassCd, jdbcType=VARCHAR},
																				#{copyToCurrencyCd, jdbcType=VARCHAR}
																			)
		}	
	</update>
	
	<update id="copyRetAmtSetup" parameterType="java.util.Map">
		BEGIN
			MTN_RETENTION_AMT_PKG.copy_ret_amt(
				#{copyFromRetentionId, jdbcType=INTEGER},
				#{copyFromLineCd, jdbcType=VARCHAR},
				#{copyFromLineClassCd, jdbcType=VARCHAR},
				#{copyFromCurrencyCd, jdbcType=VARCHAR},
				#{copyToLineCd, jdbcType=VARCHAR},
				#{copyToLineClassCd, jdbcType=VARCHAR},
				#{copyToCurrencyCd, jdbcType=VARCHAR},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.TreatyLimit" id="treatyLimitMap">
		<result property="lineCd" 			column="LINE_CD"/>
		<result property="lineClassCd" 		column="LINE_CLASS_CD"/>
		<result property="currencyCd" 		column="CURRENCY_CD"/>
		<result property="treatyLimitId" 	column="TREATY_LIMIT_ID"/>
		<result property="amount" 			column="AMOUNT"/>
		<result property="trtyLayerDesc" 	column="TRTY_LAYER_DESC"/>
		<result property="effDateFrom" 		column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property="treatyLayerList"	resultMap="assocTreatyLayer"/>
    </resultMap>
    
    <select id="retrieveMtnTreatyLimit" resultMap="treatyLimitMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_TREATY_LIMIT_PKG.ret_mtn_treaty_limit(#{lineCd, jdbcType=VARCHAR},
																	  #{lineClassCd, jdbcType=VARCHAR},
																	  #{currencyCd, jdbcType=VARCHAR},
																	  #{treatyLimitId, jdbcType=INTEGER},
																	  '',
																	  '',
																	  '',
																	  ''))
	</select>

    <update id="saveMtnApprovalFunction" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="deleteMtnApprovalFn" item="del">
	    			MTN_APPROVAL_FUNCTION_PKG.del_mtn_approval_function(
			    		#{del.approvalCd},#{del.userId}
			    	);
    		</foreach>
    		<foreach collection="saveMtnApprovalFn" item="save">
		    		MTN_APPROVAL_FUNCTION_PKG.save_mtn_approval_function(
		    			#{save.approvalCd},
		    			#{save.userId},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser},
						CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
    
    <select id="retrieveMtnUsersLov" resultMap="approvalMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_USERS_PKG.retrieve_mtn_user_lov(#{userId, jdbcType=VARCHAR},
																					 #{position 	, jdbcType=VARCHAR},
																				     #{count		, jdbcType=VARCHAR},
																				     #{sortKey		, jdbcType=VARCHAR},
																					 #{order		, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Approver" id="approverMap">
		<result property="userId" column="USER_ID"/>
		<result property="userName" column="USER_NAME"/>
		<result property="userGrp" column="USER_GRP"/>
		<result property="userGrpDesc" column="USER_GRP_DESC"/>
		<result property="emailAddress" column="EMAIL_ADDRESS"/>
		<result property="remarks" column="REMARKS"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.ApproverFn" id="approverFnMap">
		<result property="approvalCd" 		column="APPROVAL_CD"/>
		<result property="description" 		column="DESCRIPTION"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveApprover" resultMap="approverMap">
		SELECT * FROM TABLE(MTN_APPROVER_PKG.ret_approver(#{userId, jdbcType=VARCHAR},NULL,NULL,NULL,NULL))
	</select>
	
	<select id="retrieveApproverFn" resultMap="approverFnMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_APPROVER_PKG.ret_approver_fn(#{userId},NULL,NULL,NULL,NULL))
	</select>
	
	<update id="saveMtnApprover" parameterType="java.util.Map">
		BEGIN
			NULL;
			<foreach collection="delList" item="item">
				MTN_APPROVER_PKG.del_mtn_approver(#{item.userId});
			</foreach>
			<foreach collection="saveList" item="item">
				MTN_APPROVER_PKG.save_mtn_approver(#{item.userId},#{item.remarks, jdbcType=VARCHAR},#{item.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{item.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{item.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{item.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<update id="saveMtnApproverFn" parameterType="java.util.Map">
		BEGIN
			<foreach collection="delList" item="item">
				MTN_APPROVER_PKG.del_approver_fn(#{item.approvalCd},#{userId});
			</foreach>
			<foreach collection="saveList" item="item">
				MTN_APPROVER_PKG.save_approver_fn(#{item.approvalCd},#{userId},#{item.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{item.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{item.updateUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{item.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Parameters" id="parametersMap">
		<result property="paramType" 		column="PARAM_TYPE"/>
		<result property="paramName" 		column="PARAM_NAME"/>
		<result property="paramValueN" 		column="PARAM_VALUE_N"/>
		<result property="paramValueV" 		column="PARAM_VALUE_V"/>
		<result property="paramValueD" 		column="PARAM_VALUE_D"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
	</resultMap>
	
	<select id="retrieveMtnParameters" resultMap="parametersMap">
		SELECT * FROM TABLE(MTN_PARAMETER_PKG.retrieve_mtn_parameters(#{paramType, jdbcType=VARCHAR},
																	  #{position , jdbcType=VARCHAR},
																      #{count , jdbcType=VARCHAR},
																      #{sortKey	, jdbcType=VARCHAR},
																	  #{order , jdbcType=VARCHAR},
																	  #{paramName , jdbcType=VARCHAR}
																	  ))
	</select>
	
	<update id="saveMtnParameters" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delParameters" item="del">
	    			MTN_PARAMETER_PKG.del_mtn_parameters(
			    		#{del.paramType},#{del.paramName}
			    	);
    		</foreach>
    		<foreach collection="saveParameters" item="save">
		    		MTN_PARAMETER_PKG.save_mtn_parameters(
		    			#{save.paramType},
		    			#{save.paramName},
		    			#{save.paramValueN, jdbcType=VARCHAR},
		    			#{save.paramValueV, jdbcType=VARCHAR},
		    			CAST(to_timestamp(#{save.paramValueD, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser},
						CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.RoundingError" id="roundingErrorMap">
    	<result property="companyId" 		column="CEDING_ID"/>
		<result property="companyName" 		column="COMPANY_NAME"/>
		<result property="abbreviation" 	column="ABBREVIATION"/>
		<result property="effDateFrom" 		column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
    </resultMap>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.TreatyLayer" id="assocTreatyLayer">
    	<result property="lineCd" 			column="LINE_CD"/>
    	<result property="lineClassCd" 		column="LINE_CLASS_CD"/>
    	<result property="currencyCd" 		column="CURRENCY_CD"/>
     	<result property="treatyLimitId" 	column="TREATY_LIMIT_ID"/>
		<result property="treatyId" 		column="TREATY_ID"/>
		<result property="treatyName" 		column="TREATY_NAME"/>
		<result property="createUser" 		column="TL_CREATE_USER"/>
		<result property="createDate" 		column="TL_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="TL_UPDATE_USER"/>
		<result property="updateDate" 		column="TL_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveMtnRoundingError" resultMap="roundingErrorMap">
		SELECT * FROM TABLE(MTN_ROUNDING_ERROR_PKG.retrieve_mtn_rounding_errors(#{companyId, jdbcType=VARCHAR },
																	  #{position , jdbcType=VARCHAR},
																      #{count , jdbcType=VARCHAR},
																      #{sortKey	, jdbcType=VARCHAR},
																	  #{order , jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnRoundingError" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="delRoundingError" item="del">
	    			MTN_ROUNDING_ERROR_PKG.del_mtn_rounding_error(
			    		#{del.companyId},
			    		CAST(to_timestamp(#{del.effDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			    	);
    		</foreach>
    		<foreach collection="saveRoundingError" item="save">
		    		MTN_ROUNDING_ERROR_PKG.save_mtn_rounding_error(
		    			#{save.companyId},
		    			CAST(to_timestamp(#{save.effDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		    			#{save.activeTag, jdbcType=VARCHAR},
		    			#{save.remarks, jdbcType=VARCHAR},
						#{save.createUser, jdbcType=VARCHAR},
						CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
						#{save.updateUser},
						CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		);
    		</foreach>
    	END;
    </update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Reports" id="reportsMap">
     		 <result property="reportId"		column="REPORT_ID" />
			 <result property="reportTitle"		column="REPORT_TITLE" />
			 <result property="fileName"		column="FILE_NAME" />
			 <result property="reportGrp"		column="REPORT_GRP" />
			 <result property="genFreq"			column="GEN_FREQ" />
			 <result property="remarks"			column="REMARKS" />
			 <result property="createUser"		column="CREATE_USER" />
			 <result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
			 <result property="updateUser"		column="UPDATE_USER" />
			 <result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
     </resultMap>
     
     <select id="retMtnReport" resultMap="reportsMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_REPORTS_PKG.ret_mtn_reports(#{reportId, jdbcType=VARCHAR},
																 #{position, jdbcType=VARCHAR},
															     #{count, jdbcType=VARCHAR},
															     #{sortKey, jdbcType=VARCHAR},
																 #{order, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveMtnReports" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			<foreach collection="delReports" item="del">
				MTN_REPORTS_PKG.del_mtn_reports(
					#{del.reportId}
				);
			</foreach>
			<foreach collection="saveReports" item="save">
				MTN_REPORTS_PKG.save_mtn_reports(
										#{save.reportId},
										#{save.reportTitle},
										#{save.fileName, jdbcType=VARCHAR},
										#{save.reportGrp},
										#{save.genFreq},
										#{save.remarks, jdbcType=VARCHAR},
										#{save.createUser, jdbcType=VARCHAR},
										CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
										#{save.updateUser, jdbcType=VARCHAR},
										CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
					);
			</foreach>
		END;
	</update>

	<update id="saveMtnReportParam" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			<foreach collection="delReportParam" item="del">
				MTN_REP_PARAM_PKG.del_mtn_rep_param(
					#{del.reportId},
					#{del.title}
				);
			</foreach>
			<foreach collection="saveReportParam" item="save">
				MTN_REP_PARAM_PKG.save_mtn_rep_param(
										#{save.reportId},
										#{save.title},
										#{save.text},
										#{save.lineCd, jdbcType=VARCHAR},
										#{save.remarks, jdbcType=VARCHAR},
										#{save.createUser, jdbcType=VARCHAR},
										CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
										#{save.updateUser, jdbcType=VARCHAR},
										CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
					);
			</foreach>
		END;
	</update>
    
    <update id="saveMtnCity" parameterType="java.util.Map">
    	BEGIN
    	
    	 <foreach collection="deleteCity" item="city">
    			MTN_CITY_PKG.del_mtn_city(#{city.cityCd,jdbcType=VARCHAR},
    									  #{city.regionCd,jdbcType=VARCHAR},
    									  #{city.provinceCd,jdbcType=VARCHAR});
         </foreach>
         
    	<foreach collection="saveCity" item="city">
	    		MTN_CITY_PKG.save_mtn_city(
	    			#{city.cityCd,jdbcType=VARCHAR},
			        #{city.description,jdbcType=VARCHAR},
			        #{city.regionCd,jdbcType=VARCHAR},
			        #{city.provinceCd,jdbcType=VARCHAR},
			        #{city.activeTag,jdbcType=VARCHAR},
			        #{city.remarks,jdbcType=VARCHAR},
			        #{city.zoneCd,jdbcType=VARCHAR},
			        #{city.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{city.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{city.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{city.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    	</foreach>
    	
    	END;
    </update>
    
    <update id="saveMtnTreatyLimit" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    		v_treaty_limit_id MTN_TREATY_LIMIT.TREATY_LIMIT_ID%TYPE;
    	BEGIN
    		<foreach collection="saveTreatyLimit" item="save">
    			IF #{save.treatyLimitId, jdbcType=INTEGER} IS NULL
    			THEN
		            SELECT NVL(MAX(TREATY_LIMIT_ID), 0) + 1
		              INTO v_treaty_limit_id
		            FROM MTN_TREATY_LIMIT
		            WHERE LINE_CD = #{save.lineCd, jdbcType=VARCHAR}
		              AND LINE_CLASS_CD = #{save.lineClassCd, jdbcType=VARCHAR}
		              AND CURRENCY_CD = #{save.currencyCd, jdbcType=VARCHAR};
    			ELSE
    				v_treaty_limit_id := #{save.treatyLimitId, jdbcType=INTEGER};
    			END IF;
    		
	    		MTN_TREATY_LIMIT_PKG.save_treaty_limit(
	    			#{save.lineCd, jdbcType=VARCHAR},
	    			#{save.lineClassCd, jdbcType=VARCHAR},
	    			#{save.currencyCd, jdbcType=VARCHAR},
	    			v_treaty_limit_id,
	    			#{save.amount, jdbcType=DECIMAL},
	    			#{save.trtyLayerDesc, jdbcType=VARCHAR},
	    			CAST(to_timestamp(#{save.effDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{save.activeTag, jdbcType=VARCHAR},
			        #{save.remarks, jdbcType=VARCHAR},
			        #{save.createUser, jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{save.updateUser, jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
	    		
	    		<foreach collection="save.treatyLayerList" item="layer">
	    			MTN_TREATY_LAYER_PKG.save_treaty_layer(
	    				#{layer.lineCd, jdbcType=VARCHAR},
	    				#{layer.lineClassCd, jdbcType=VARCHAR},
	    				#{layer.currencyCd, jdbcType=VARCHAR},
		    			v_treaty_limit_id,
		    			#{layer.treatyId, jdbcType=INTEGER},
		    			#{layer.createUser, jdbcType=VARCHAR},
				        CAST(to_timestamp(#{layer.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				        #{layer.updateUser, jdbcType=VARCHAR},
				        CAST(to_timestamp(#{layer.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			        );
	    		</foreach>
    		</foreach>
    		
    		SELECT 1
    		  INTO v_treaty_limit_id
    		FROM DUAL;
    	END;
    </update>
    
    <update id="checkTreatyLimit" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_TREATY_LIMIT_PKG.check_treaty_limit(
																				#{copyFromTreatyLimitId, jdbcType=INTEGER},
																				#{copyFromLineCd, jdbcType=VARCHAR},
																				#{copyFromLineClassCd, jdbcType=VARCHAR},
																				#{copyFromCurrencyCd, jdbcType=VARCHAR},
																				#{copyToLineCd, jdbcType=VARCHAR},
																				#{copyToLineClassCd, jdbcType=VARCHAR},
																				#{copyToCurrencyCd, jdbcType=VARCHAR}
																			)
		}	
	</update>
	
	<update id="copyTreatyLimit" parameterType="java.util.Map">
		BEGIN
			MTN_TREATY_LIMIT_PKG.copy_treaty_limit(
				#{copyFromTreatyLimitId, jdbcType=INTEGER},
				#{copyFromLineCd, jdbcType=VARCHAR},
				#{copyFromLineClassCd, jdbcType=VARCHAR},
				#{copyFromCurrencyCd, jdbcType=VARCHAR},
				#{copyToLineCd, jdbcType=VARCHAR},
				#{copyToLineClassCd, jdbcType=VARCHAR},
				#{copyToCurrencyCd, jdbcType=VARCHAR},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>

    <resultMap type="ph.cpi.rest.api.model.maintenance.Adjuster" id="mtnAdjusterListMap">
		<result property="adjId"			column="ADJ_ID" />
		<result property="adjName"			column="ADJ_NAME" />
		<result property="addrLine1"		column="ADDR_LINE1" />
		<result property="addrLine2"		column="ADDR_LINE2" />
		<result property="addrLine3"		column="ADDR_LINE3" />
		<result property="fullAddress"		column="FULL_ADDRESS" />
		<result property="zipCd"			column="ZIP_CD" />
		<result property="contactNo"		column="CONTACT_NO" />
		<result property="emailAdd"			column="EMAIL_ADD" />
		<result property="activeTag"		column="ACTIVE_TAG" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
     </resultMap>
     
     <select id="retMtnAdjList" resultMap="mtnAdjusterListMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_ADJUSTER_PKG.ret_mtn_adj_list(#{adjName, jdbcType=VARCHAR},
															  #{fullAddress, jdbcType=VARCHAR},
															  #{zipCd, jdbcType=VARCHAR},
															  #{contactNo, jdbcType=VARCHAR},
															  #{emailAdd, jdbcType=VARCHAR},
															  #{createUser, jdbcType=VARCHAR},
															  CAST(to_timestamp(#{createDateFrom, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
															  CAST(to_timestamp(#{createDateTo, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
															  #{updateUser, jdbcType=VARCHAR},
															  CAST(to_timestamp(#{updateDateFrom, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
															  CAST(to_timestamp(#{updateDateTo, jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
															  #{position, jdbcType=VARCHAR},
														      #{count, jdbcType=VARCHAR},
														      #{sortKey, jdbcType=VARCHAR},
															  #{order, jdbcType=VARCHAR}))
	 </select>
	 
	 <resultMap type="ph.cpi.rest.api.model.maintenance.Adjuster" id="mtnAdjusterMap">
		<result property="adjId"			column="ADJ_ID" />
		<result property="adjName"			column="ADJ_NAME" />
		<result property="addrLine1"		column="ADDR_LINE1" />
		<result property="addrLine2"		column="ADDR_LINE2" />
		<result property="addrLine3"		column="ADDR_LINE3" />
		<result property="zipCd"			column="ZIP_CD" />
		<result property="contactNo"		column="C_CONTACT_NO" />
		<result property="emailAdd"			column="C_EMAIL_ADD" />
		<result property="activeTag"		column="ACTIVE_TAG" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<association property="adjRepresentative" resultMap="adjRepresentativeAssoc" />
     </resultMap>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.AdjRepresentative" id="adjRepresentativeAssoc">
		<result property="adjRepId"			column="ADJ_REP_ID" />
		<result property="designation"		column="DESIGNATION" />
		<result property="firstName"		column="FIRST_NAME" />
		<result property="middleInitial"	column="MIDDLE_INITIAL" />
		<result property="lastName"			column="LAST_NAME" />
		<result property="defaultTag"		column="DEFAULT_TAG" />
		<result property="position"			column="POSITION" />
		<result property="department"		column="DEPARTMENT" />
		<result property="contactNo"		column="CONTACT_NO" />
		<result property="emailAdd"			column="EMAIL_ADD" />
		<result property="createUser"		column="R_CREATE_USER" />
		<result property="createDate"		column="R_CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="R_UPDATE_USER" />
		<result property="updateDate"		column="R_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
     </resultMap>
     
     <select id="retMtnAdj" resultMap="mtnAdjusterMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_ADJ_REPRESENTATIVE_PKG.ret_mtn_adj(#{adjId, jdbcType=VARCHAR},
																   #{position, jdbcType=VARCHAR},
															       #{count, jdbcType=VARCHAR},
															       #{sortKey, jdbcType=VARCHAR},
																   #{order, jdbcType=VARCHAR}))
	 </select>
	 
	 <update id="saveMtnAdjuster" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    	 v_adj_id MTN_ADJ_REPRESENTATIVE.ADJ_ID%TYPE;
    	BEGIN
    		MTN_ADJUSTER_PKG.save_mtn_adjuster(
    						v_adj_id,
    						#{adjId, jdbcType=VARCHAR},
    						#{adjName},
    						#{addrLine1},
    						#{addrLine2, jdbcType=VARCHAR},
    						#{addrLine3, jdbcType=VARCHAR},
    						#{zipCd, jdbcType=VARCHAR},
    						#{contactNo, jdbcType=VARCHAR},
    						#{emailAdd, jdbcType=VARCHAR},
    						#{activeTag, jdbcType=VARCHAR},
    						#{remarks, jdbcType=VARCHAR},
    						#{createUser},
    						CAST(to_timestamp(#{createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
    						#{updateUser},
    						CAST(to_timestamp(#{updateDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
    		);
    		
    		#{outAdjId, mode=OUT, jdbcType=VARCHAR} := v_adj_id;
    		
   			<foreach collection="delAdjRepList" item="del">
    			MTN_ADJ_REPRESENTATIVE_PKG.del_mtn_adj_rep(
    								v_adj_id,
    								#{del.adjRepId}
    						);
    		</foreach>
    		<foreach collection="saveAdjRepList" item="save">
		    		MTN_ADJ_REPRESENTATIVE_PKG.save_mtn_adj_rep(
		    							v_adj_id,
		    							#{save.adjRepId, jdbcType=VARCHAR},
		    							#{save.designation, jdbcType=VARCHAR},
		    							#{save.firstName},
		    							#{save.middleInitial, jdbcType=VARCHAR},
		    							#{save.lastName},
		    							#{save.defaultTag, jdbcType=VARCHAR},
		    							#{save.position, jdbcType=VARCHAR},
		    							#{save.department, jdbcType=VARCHAR},
		    							#{save.contactNo, jdbcType=VARCHAR},
		    							#{save.emailAdd, jdbcType=VARCHAR},
		    							#{createUser},
			    						CAST(to_timestamp(#{createDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			    						#{updateUser},
			    						CAST(to_timestamp(#{updateDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    		            );
    		</foreach>
    	END;
    </update>
    
    
    <select id="retrieveMtnLossCd" resultMap="mtnLossCdMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_LOSS_CD_PKG.ret_mtn_loss_cd(#{lossCd, jdbcType=VARCHAR},
																 #{position, jdbcType=VARCHAR},
															     #{count, jdbcType=VARCHAR},
															     #{sortKey, jdbcType=VARCHAR},
																 #{order, jdbcType=VARCHAR}))
	</select>

	<update id="saveMtnLossCd" parameterType="java.util.Map">
    	BEGIN
    	
    	 <foreach collection="deleteLossCd" item="lossCd">
    			MTN_LOSS_CD_PKG.del_mtn_loss_cd(#{lossCd.lossCd,jdbcType=VARCHAR});
         </foreach>
         
    	<foreach collection="saveLossCd" item="lossCd">
	    		MTN_LOSS_CD_PKG.save_mtn_loss_cd(
	    			#{lossCd.lossCd,jdbcType=VARCHAR},
			        #{lossCd.lossAbbr,jdbcType=VARCHAR},
			        #{lossCd.lossDesc,jdbcType=VARCHAR},
			        #{lossCd.lossCdType,jdbcType=VARCHAR},
			        #{lossCd.activeTag,jdbcType=VARCHAR},
			        #{lossCd.remarks,jdbcType=VARCHAR},
			        #{lossCd.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{lossCd.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{lossCd.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{lossCd.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    	</foreach>
    	
    	END;
    </update>
   
   <resultMap type="ph.cpi.rest.api.model.maintenance.ClaimStatus" id="clmStatMap">
    	<result property="statusCode" 		column="CLM_STAT_CD"/>
		<result property="description" 		column="CLM_STAT_DESC"/>
		<result property="openTag" 			column="OPEN_TAG"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    </resultMap>
    
   <resultMap type="ph.cpi.rest.api.model.maintenance.MtnClmEventType" id="mtnClmEventTypeMap">
   		<result property="eventTypeCd" 		column="EVENT_TYPE_CD"/>
		<result property="eventTypeDesc"	column="EVENT_TYPE_DESC"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    	<result property="okDelete"			column="OK_DELETE"/>
    </resultMap>
	
	<select id="retrieveMtnClaimStatus" resultMap="clmStatMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_CLAIM_STATUS_PKG.ret_mtn_claim_stat(#{statusCode, jdbcType=VARCHAR},
																 #{position, jdbcType=VARCHAR},
															     #{count, jdbcType=VARCHAR},
															     #{sortKey, jdbcType=VARCHAR},
																 #{order, jdbcType=VARCHAR}))
	</select>
	
   <select id="retrieveMtnClmEventType" resultMap="mtnClmEventTypeMap" parameterType="java.util.Map">
   		SELECT * FROM TABLE(MTN_CLM_EVENT_TYPE_PKG.ret_clm_eventtype(
   					#{eventTypeCd, jdbcType=VARCHAR},
					#{position, jdbcType=VARCHAR},
					#{count, jdbcType=VARCHAR},
					#{sortKey, jdbcType=VARCHAR},
					#{order, jdbcType=VARCHAR}))
   </select>
   
   <update id="saveMtnClmEventType" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveEventType" item="eventTypeSave">
	    		MTN_CLM_EVENT_TYPE_PKG.save_clm_eventtype(
	    			#{eventTypeSave.eventTypeCd,jdbcType=VARCHAR},
			        #{eventTypeSave.eventTypeDesc,jdbcType=VARCHAR},
			        #{eventTypeSave.activeTag,jdbcType=VARCHAR},
			        #{eventTypeSave.remarks,jdbcType=VARCHAR},
			        #{eventTypeSave.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{eventTypeSave.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{eventTypeSave.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{eventTypeSave.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteEventType" item="eventTypeDelete">
    			MTN_CLM_EVENT_TYPE_PKG.del_clm_eventtype(#{eventTypeDelete.eventTypeCd,jdbcType=VARCHAR});
    		</foreach>
    	END;
    </update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.MtnClmEvent" id="mtnClmEventMap">
    	<result property="eventCd"		column="EVENT_CD"/>
		<result property="eventDesc"	column="EVENT_DESC"/>
		<result property="lossDateFrom"	column="LOSS_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="lossDateTo"	column="LOSS_DATE_TO" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="lineCd"		column="LINE_CD"/>
		<result property="eventTypeCd"	column="EVENT_TYPE_CD"/>
		<result property="activeTag"	column="ACTIVE_TAG"/>
		<result property="remarks"		column="REMARKS"/>
		<result property="createUser"	column="CREATE_USER"/>
		<result property="createDate"	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"	column="UPDATE_USER"/>
		<result property="updateDate"	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
    	<result property="okDelete"		column="OK_DELETE"/>
    </resultMap>
   
   <select id="retrieveMtnClmEvent" resultMap="mtnClmEventMap" parameterType="java.util.Map">
   		SELECT * FROM TABLE(MTN_CLM_EVENT_PKG.ret_mtn_clm_event(
   					#{eventCd, jdbcType=VARCHAR},
					#{position, jdbcType=VARCHAR},
					#{count, jdbcType=VARCHAR},
					#{sortKey, jdbcType=VARCHAR},
					#{order, jdbcType=VARCHAR}))
   </select>
   
   <update id="saveMtnClmEvent" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveEvent" item="eventSave">
	    		MTN_CLM_EVENT_PKG.save_mtn_clm_event(
	    			#{eventSave.eventCd,jdbcType=VARCHAR},
					#{eventSave.eventDesc,jdbcType=VARCHAR},
					CAST(to_timestamp(#{eventSave.lossDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					CAST(to_timestamp(#{eventSave.lossDateTo}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{eventSave.lineCd,jdbcType=VARCHAR},
					#{eventSave.eventTypeCd,jdbcType=VARCHAR},
					#{eventSave.activeTag,jdbcType=VARCHAR},
					#{eventSave.remarks,jdbcType=VARCHAR},
					#{eventSave.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{eventSave.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{eventSave.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{eventSave.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deleteEvent" item="eventDelete">
    			MTN_CLM_EVENT_PKG.del_mtn_clm_event(#{eventDelete.eventCd,jdbcType=VARCHAR});
    		</foreach>
    	END;
    </update>
    
	<update id="saveMtnClaimStatus" parameterType="java.util.Map" >
		BEGIN
			<foreach collection="delClaimStatus" item="del">
				MTN_CLAIM_STATUS_PKG.del_mtn_claim_status(
				#{del.statusCode}
			);
			</foreach>
			<foreach collection="saveClaimStatus" item="save">
				MTN_CLAIM_STATUS_PKG.save_mtn_claim_status(
				#{save.statusCode},
				#{save.description},
				#{save.openTag, jdbcType=VARCHAR},
				#{save.activeTag, jdbcType=VARCHAR},
				#{save.remarks, jdbcType=VARCHAR},
				#{save.createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{save.createDate, jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{save.updateUser},
				CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
			</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.SecIITreatyLimit" id="seciiTrtyLimitMap">
     	<result property="lineCd" 			column="LINE_CD"/>
	    <result property="lineClassCd" 		column="LINE_CLASS_CD"/>
	    <result property="currencyCd" 		column="CURRENCY_CD"/>
     	<result property="seciiTrtyLimId" 	column="SECII_TRTY_LIM_ID"/>
	    <result property="amount" 			column="AMOUNT"/>
	    <result property="effDateFrom" 		column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="activeTag" 		column="ACTIVE_TAG"/>
	    <result property="remarks" 			column="REMARKS"/>
	    <result property="createUser" 		column="CREATE_USER"/>
	    <result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="updateUser" 		column="UPDATE_USER"/>
	    <result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete" 		column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnSecIITrtyLimit" resultMap="seciiTrtyLimitMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_SECII_TRTY_LIMIT_PKG.ret_mtn_secii_trty_limit(#{lineCd, jdbcType=VARCHAR},
																	  			  #{lineClassCd, jdbcType=VARCHAR},
																	  			  #{currencyCd, jdbcType=VARCHAR},
																				  #{seciiTrtyLimId, jdbcType=INTEGER},
																				  '',
																				  '',
																				  '',
																				  ''))
	</select>
	
	<update id="saveMtnSecIITrtyLimit" parameterType="java.util.Map" statementType="CALLABLE">
    	BEGIN
    		<foreach collection="deleteSecIITrtyLimit" item="del">
	    		MTN_SECII_TRTY_LIMIT_PKG.del_secii_trty_limit(
			    	#{del.seciiTrtyLimId, jdbcType=INTEGER}
			    );
    		</foreach>
    		<foreach collection="saveSecIITrtyLimit" item="save">
    			MTN_SECII_TRTY_LIMIT_PKG.save_secii_trty_limit(
		    		#{save.lineCd, jdbcType=VARCHAR},
		    		#{save.lineClassCd, jdbcType=VARCHAR},
		    		#{save.currencyCd, jdbcType=VARCHAR},
		    		#{save.seciiTrtyLimId, jdbcType=INTEGER},
		    		#{save.amount, jdbcType=DECIMAL},
		    		CAST(to_timestamp(#{save.effDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		    		#{save.activeTag, jdbcType=VARCHAR},
		    		#{save.remarks, jdbcType=VARCHAR},
					#{save.createUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.updateUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{save.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
		    	);
    		</foreach>
    	END;
    </update>
    
    <update id="checkSecIITrtyLimit" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_SECII_TRTY_LIMIT_PKG.check_secii_trty_limit(
																				#{copyFromSeciiTrtyLimId, jdbcType=INTEGER},
																				#{copyFromLineCd, jdbcType=VARCHAR},
																				#{copyFromLineClassCd, jdbcType=VARCHAR},
																				#{copyFromCurrencyCd, jdbcType=VARCHAR},
																				#{copyToLineCd, jdbcType=VARCHAR},
																				#{copyToLineClassCd, jdbcType=VARCHAR},
																				#{copyToCurrencyCd, jdbcType=VARCHAR}
																			)
		}	
	</update>
	
	<update id="copySecIITrtyLimit" parameterType="java.util.Map">
		BEGIN
			MTN_SECII_TRTY_LIMIT_PKG.copy_secii_trty_limit(
				#{copyFromSeciiTrtyLimId, jdbcType=INTEGER},
				#{copyFromLineCd, jdbcType=VARCHAR},
				#{copyFromLineClassCd, jdbcType=VARCHAR},
				#{copyFromCurrencyCd, jdbcType=VARCHAR},
				#{copyToLineCd, jdbcType=VARCHAR},
				#{copyToLineClassCd, jdbcType=VARCHAR},
				#{copyToCurrencyCd, jdbcType=VARCHAR},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.ClaimReason" id="clmReasonMap">
     	<result property="reasonCd"			column="REASON_CD" />
		<result property="description"		column="DESCRIPTION" />
		<result property="clmStatCd"		column="CLM_STAT_CD" />
		<result property="clmStatDesc"		column="CLM_STAT_DESC" />
		<result property="activeTag"		column="ACTIVE_TAG" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete" 		column="OK_DELETE"/>
     </resultMap>
     
     <select id="retrieveMtnClmReason" resultMap="clmReasonMap" parameterType="java.util.Map">
     	SELECT * FROM TABLE(MTN_CLM_REASON_PKG.ret_mtn_clm_rsn(#{reasonCd, jdbcType=VARCHAR},
     														   #{clmStatCd, jdbcType=VARCHAR},
     														   #{activeTag, jdbcType=VARCHAR},
     														   NULL,NULL,NULL,NULL))
     </select>
     
     <update id="saveMtnClmReason" parameterType="java.util.Map">
		BEGIN
			<foreach collection="delClmReason" item="d">
			MTN_CLM_REASON_PKG.del_mtn_clm_rsn(
												#{d.reasonCd}
			);
			</foreach>
			<foreach collection="saveClmReason" item="s">
			MTN_CLM_REASON_PKG.save_mtn_clm_rsn(
													#{s.reasonCd},
													#{s.description},
													#{s.clmStatCd, jdbcType=VARCHAR},
													#{s.activeTag, jdbcType=VARCHAR},
													#{s.remarks, jdbcType=VARCHAR},
													#{s.createUser, jdbcType=VARCHAR},
													CAST(to_timestamp(#{s.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{s.updateUser, jdbcType=VARCHAR},
													CAST(to_timestamp(#{s.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
			</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.PoolRetHist" id="poolRetHistMap">
     	<result property="retHistId" 	column="RET_HIST_ID"/>
		<result property="retLine1" 	column="RET_LINE1"/>
		<result property="retLine2" 	column="RET_LINE2"/>
		<result property="totalRetLine" column="TOTAL_RET_LINE"/>
		<result property="effDateFrom" 	column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="activeTag" 	column="ACTIVE_TAG"/>
		<result property="remarks" 		column="REMARKS"/>
	    <result property="createUser" 	column="CREATE_USER"/>
	    <result property="createDate" 	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="updateUser" 	column="UPDATE_USER"/>
	    <result property="updateDate" 	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	    <result property="okDelete" 	column="OK_DELETE"/>
	    
	    <association property="poolMemberList" resultMap="poolMemberMap"/>
     </resultMap>
     
     <resultMap type="ph.cpi.rest.api.model.maintenance.PoolMember" id="poolMemberMap">
    	<result property="retHistId" 	column="RET_HIST_ID"/>
		<result property="cedingId" 	column="CEDING_ID"/>
		<result property="cedingName" 	column="CEDING_NAME"/>
		<result property="retLine1" 	column="PM_RET_LINE1"/>
		<result property="retLine2" 	column="PM_RET_LINE2"/>
		<result property="createUser" 	column="PM_CREATE_USER"/>
		<result property="createDate" 	column="PM_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 	column="PM_UPDATE_USER"/>
		<result property="updateDate" 	column="PM_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete" 	column="OK_DELETE"/>
	</resultMap>
     
     
     
     <select id="retrieveMtnPoolRetHist" resultMap="poolRetHistMap" parameterType="java.util.Map">
			SELECT * FROM TABLE(MTN_POOL_RET_HIST_PKG.ret_mtn_pool_ret_hist(#{retHistId, jdbcType=INTEGER},
																		    '',
																		    '',
																		    '',
																		    ''))
	</select>
    
    <update id="saveMtnPoolRetHist" parameterType="java.util.Map" statementType="CALLABLE">
    	DECLARE
    		v_ret_hist_id MTN_POOL_RET_HIST.RET_HIST_ID%TYPE;
    	BEGIN
    		<foreach collection="deletePoolRetHist" item="del">
    			MTN_POOL_RET_HIST_PKG.del_mtn_pool_ret_hist(
    				#{del.retHistId, jdbcType=INTEGER}
    			);
    		</foreach>
    		
    		<foreach collection="deletePoolMember" item="del">
    			MTN_POOL_RETENTION_PKG.del_mtn_pool_retention(
    				#{del.retHistId, jdbcType=INTEGER},
    				#{del.cedingId, jdbcType=VARCHAR}
    			);
    		</foreach>
    	
    		<foreach collection="savePoolRetHist" item="save">
    			IF #{save.retHistId, jdbcType=INTEGER} IS NULL
    			THEN
		            SELECT NVL(MAX(RET_HIST_ID), 0) + 1
		              INTO v_ret_hist_id
		            FROM MTN_POOL_RET_HIST;
    			ELSE
    				v_ret_hist_id := #{save.retHistId, jdbcType=INTEGER};
    			END IF;
    		
	    		MTN_POOL_RET_HIST_PKG.save_mtn_pool_ret_hist(
	    			v_ret_hist_id,
	    			#{save.retLine1, jdbcType=INTEGER},
	    			#{save.retLine2, jdbcType=INTEGER},
	    			#{save.totalRetLine, jdbcType=INTEGER},
	    			CAST(to_timestamp(#{save.effDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{save.activeTag, jdbcType=VARCHAR},
			        #{save.remarks, jdbcType=VARCHAR},
			        #{save.createUser, jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{save.updateUser, jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
	    		
	    		<foreach collection="save.poolMemberList" item="poolMember">
	    			MTN_POOL_RETENTION_PKG.save_mtn_pool_retention(
	    				v_ret_hist_id,
	    				#{poolMember.cedingId, jdbcType=VARCHAR},
	    				#{poolMember.retLine1, jdbcType=INTEGER},
	    				#{poolMember.retLine2, jdbcType=INTEGER},
	    				#{poolMember.createUser, jdbcType=VARCHAR},
				        CAST(to_timestamp(#{poolMember.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				        #{poolMember.updateUser, jdbcType=VARCHAR},
				        CAST(to_timestamp(#{poolMember.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    			);
	    		</foreach>
	    	</foreach>
    	END;
    </update>
    
    <update id="checkPoolRetHist" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_POOL_RET_HIST_PKG.check_pool_ret_hist(
																				CAST(to_timestamp(#{copyToEffDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
																			)
		}	
	</update>
	
	<update id="copyPoolRetHist" parameterType="java.util.Map">
		BEGIN
			MTN_POOL_RET_HIST_PKG.copy_pool_ret_hist(
				#{copyFromRetHistId, jdbcType=INTEGER},
				CAST(to_timestamp(#{copyToEffDateFrom}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<select id="retrieveMtnLossCdLov" resultMap="mtnLossCdMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_LOSS_CD_PKG.ret_mtn_loss_cd_lov(#{lossCdType, jdbcType=VARCHAR},
																#{searchStr, jdbcType=VARCHAR},
																null,
																null,
																null,
																null
																))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.MtnClmCashCall" id="mtnClaimmCashCallMap">
   		<result property="treatyId" 		column="TREATY_ID"/>
		<result property="treatyCedId"		column="TRTY_CED_ID"/>
		<result property="currCd"			column="CURRENCY_CD"/>
		<result property="histNo"			column="HIST_NO"/>
		<result property="amount"			column="AMOUNT"/>
		<result property="effDateFrom"		column="EFF_DATE_FROM" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="activeTag" 		column="ACTIVE_TAG"/>
		<result property="remarks" 			column="REMARKS"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="okDelete"			column="OK_DELETE"/>
    </resultMap>
    
    <select id="retrieveMtnClmCashCall" resultMap="mtnClaimmCashCallMap" parameterType="java.util.Map">
   		SELECT * FROM TABLE(MTN_CLM_CASHCALL_PKG.ret_mtn_clm_cashcall(
   					#{treatyId, jdbcType=VARCHAR},
   					#{treatyCedId, jdbcType=VARCHAR},
   				    #{currCd, jdbcType=VARCHAR},
					#{position, jdbcType=VARCHAR},
					#{count, jdbcType=VARCHAR},
					#{sortKey, jdbcType=VARCHAR},
					#{order, jdbcType=VARCHAR}))
   </select>
   
    <update id="saveMtnClmCashCall" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="saveCashCall" item="cashCall">
	    		MTN_CLM_CASHCALL_PKG.save_mtn_clm_cashcall(
	    			#{cashCall.treatyId,jdbcType=VARCHAR},
			        #{cashCall.treatyCedId,jdbcType=VARCHAR},
			        #{cashCall.currCd,jdbcType=VARCHAR},
			        #{cashCall.histNo,jdbcType=VARCHAR},
			        #{cashCall.amount,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{cashCall.effDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{cashCall.activeTag,jdbcType=VARCHAR},
			        #{cashCall.remarks,jdbcType=VARCHAR},
			        #{cashCall.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{cashCall.createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{cashCall.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{cashCall.updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="delCashCall" item="cashCall">
    			MTN_CLM_CASHCALL_PKG.del_mtn_clm_cashcall(
    				#{cashCall.treatyId,jdbcType=VARCHAR},
    				#{cashCall.treatyCedId,jdbcType=VARCHAR},
    				#{cashCall.currCd,jdbcType=VARCHAR},
    				#{cashCall.histNo,jdbcType=VARCHAR}
				);
    		</foreach>
    	END;
    </update>
    
    <select id="retrieveMtnClmEventTypeLov" resultMap="mtnClmEventTypeMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_CLM_EVENT_TYPE_PKG.ret_clm_eventtype_lov(#{searchStr, jdbcType=VARCHAR},
																		 null,
																		 null,
																		 null,
																		 null
																		))
	</select>
	
	<select id="retrieveMtnClmEventLov" resultMap="mtnClmEventMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_CLM_EVENT_PKG.ret_mtn_clm_event_lov(#{lineCd, jdbcType=VARCHAR},
																	#{eventTypeCd, jdbcType=VARCHAR},
																	#{searchStr, jdbcType=VARCHAR},
																	null,
																	null,
																	null,
																	null
																   ))
	</select>
	
	<update id="checkMtnClmCashCall" parameterType="java.util.Map" statementType="CALLABLE">
		{CALL
			#{checkResult, mode=OUT, javaType=Integer, jdbcType=INTEGER} := MTN_CLM_CASHCALL_PKG.check_mtn_clm_cashcall(
																				#{copyFromTreatyId, jdbcType=INTEGER},
																				#{copyFromTreatyCedId, jdbcType=INTEGER},
																				#{copyFromCurrCd, jdbcType=INTEGER},
																				#{copyToTreatyId, jdbcType=INTEGER},
																				#{copyToTreatyCedId, jdbcType=INTEGER},
																				#{copyToCurrCd, jdbcType=INTEGER},
																			    #{copyFromHistNo, jdbcType=INTEGER}
																			)
		}	
	</update>
	
	
	<update id="copyClmCashCall" parameterType="java.util.Map">
		BEGIN
			MTN_CLM_CASHCALL_PKG.copy_mtn_clm_cashcall(
				#{copyFromTreatyId, jdbcType=INTEGER},
				#{copyFromTreatyCedId, jdbcType=INTEGER},
				#{copyFromCurrCd, jdbcType=INTEGER},
				#{copyToTreatyId, jdbcType=INTEGER},
				#{copyToTreatyCedId, jdbcType=INTEGER},
				#{copyToCurrCd, jdbcType=INTEGER},
			    #{copyFromHistNo, jdbcType=INTEGER},
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
    
    <resultMap type="ph.cpi.rest.api.model.maintenance.MtnAcitTranType" id="mtnAcitTranTypeMap">
    	<result property="tranClass" 			column="TRAN_CLASS"/>
		<result property="tranTypeCd" 			column="TRAN_TYPE_CD"/>
		<result property="typePrefix" 			column="TYPE_PREFIX"/>
		<result property="tranTypeName" 		column="TRAN_TYPE_NAME"/>
		<result property="defaultParticulars" 	column="DEFAULT_PARTICULARS"/>
		<result property="masterTranType" 		column="MASTER_TRAN_TYPE"/>
		<result property="remarks" 				column="REMARKS"/>
		<result property="autoTag" 				column="AUTO_TAG"/>
		<result property="baeTag" 				column="BAE_TAG"/>
		<result property="activeTag" 			column="ACTIVE_TAG"/>
		<result property="createUser" 			column="CREATE_USER"/> 
		<result property="createDate" 			column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/> 
		<result property="updateUser" 			column="UPDATE_USER"/> 
		<result property="updateDate" 			column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="groupTag" 			column="GROUP_TAG" />
    </resultMap>
    
    <select id="retrieveMtnAcitTranType" resultMap="mtnAcitTranTypeMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_ACIT_TRAN_TYPE_PKG.ret_mtn_acit_tran_type(#{tranClass, jdbcType=VARCHAR},
				#{tranTypeCd, jdbcType=VARCHAR},
				#{typePrefix, jdbcType=VARCHAR},
				#{autoTag, jdbcType=VARCHAR},
				#{baeTag, jdbcType=VARCHAR},
				#{activeTag, jdbcType=VARCHAR},
				'','','',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Bank" id="bankMap">
    	<result property="bankCd"				column="BANK_CD" />
		<result property="shortName"			column="SHORT_NAME" />
		<result property="officialName"			column="OFFICIAL_NAME" />
		<result property="remarks"				column="REMARKS" />
		<result property="activeTag"			column="ACTIVE_TAG" />
		<result property="createUser"			column="CREATE_USER" />
		<result property="createDate"			column="CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"			column="UPDATE_USER" />
		<result property="updateDate"			column="UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
    </resultMap>
    
    <select id="retMtnBank" resultMap="bankMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_BANK_PKG.ret_mtn_bank(#{officialName, jdbcType=VARCHAR},
													  #{activeTag, jdbcType=VARCHAR},
													  '','','',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.BankAcct" id="bankAcctMap">
    	<result property="bankCd"			column="BANK_CD" />
		<result property="bankAcctCd"		column="BANK_ACCT_CD" />
		<result property="accountNo"		column="ACCOUNT_NO" />
		<result property="accountName"		column="ACCOUNT_NAME" />
		<result property="acctStatus"		column="ACCT_STATUS" />
		<result property="currCd"			column="CURR_CD" />
		<result property="bankBranch"		column="BANK_BRANCH" />
		<result property="accountType"		column="ACCOUNT_TYPE" />
		<result property="openDate"			column="OPEN_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="closeDate"		column="CLOSE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="defaultAcitGl"	column="DEFAULT_ACIT_GL" />
		<result property="defaultAcseGl"	column="DEFAULT_ACSE_GL" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
    </resultMap>
	
	<select id="retMtnBankAcct" resultMap="bankAcctMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(MTN_BANK_ACCT_PKG.ret_mtn_bank_acct(#{bankCd, jdbcType=VARCHAR},
													  			#{accountNo, jdbcType=VARCHAR},
													  			'','','',''))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Payee" id="payeeMap">
		<result property="payeeNo"	column="PAYEE_NO"/>
		<result property="payeeClassCd"	column="PAYEE_CLASS_CD"/>
		<result property="payeeClassName"	column="PAYEE_CLASS_NAME"/>
		<result property="payeeName"	column="PAYEE_NAME"/>
		<result property="refCd"	column="REF_CD"/>
		<result property="bussTypeCd"	column="BUSS_TYPE_CD"/>
		<result property="tin"	column="TIN"/>
		<result property="contactNo"	column="CONTACT_NO"/>
		<result property="mailAddress"	column="MAIL_ADDRESS"/>
		<result property="email"	column="EMAIL"/>
		<result property="remarks"	column="REMARKS"/>
		<result property="designation"	column="DESIGNATION"/>
		<result property="department"	column="DEPARTMENT"/>
		<result property="mailAddress2"	column="MAIL_ADDRESS2"/>
		<result property="permAddress"	column="PERM_ADDRESS"/>
		<result property="contactPerson1"	column="CONTACT_PERSON1"/>
		<result property="contactPerson2"	column="CONTACT_PERSON2"/>
		<result property="phoneNo"	column="PHONE_NO"/>
		<result property="mobileNo"	column="MOBILE_NO"/>
		<result property="faxNo"	column="FAX_NO"/>
		<result property="bankCd1"	column="BANK_CD1"/>
		<result property="bankBranch1"	column="BANK_BRANCH1"/>
		<result property="bankAcctType1"	column="BANK_ACCT_TYPE1"/>
		<result property="bankAcctName1"	column="BANK_ACCT_NAME1"/>
		<result property="bankAcctNo1"	column="BANK_ACCT_NO1"/>
		<result property="bankCd2"	column="BANK_CD2"/>
		<result property="bankBranch2"	column="BANK_BRANCH2"/>
		<result property="bankAcctType2"	column="BANK_ACCT_TYPE2"/>
		<result property="bankAcctName2"	column="BANK_ACCT_NAME2"/>
		<result property="bankAcctNo2"	column="BANK_ACCT_NO2"/>
	</resultMap>
	
	<select id="retrieveMtnPayee" resultMap="payeeMap">
		SELECT * FROM TABLE(MTN_PAYEE_PKG.RET_MTN_PAYEE(#{payeeNo, jdbcType=VARCHAR},#{payeeClassCd, jdbcType=VARCHAR}))
	</select>
</mapper>