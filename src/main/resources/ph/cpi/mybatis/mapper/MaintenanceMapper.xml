<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="ph.cpi.mybatis.mapper.MaintenanceMapper">
	
	<resultMap type="java.util.Map" id="sampleMap">
		<result property="insuredName" column="insured_name"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.AlopSample" id="alopMap">
	    <result property="alopId" 			column="ALOP_ID"/> 
		<result property="insuredId" 		column="INS_ID"/> 
		<result property="insuredName" 		column="INSURED_NAME"/> 
		<result property="insuredDesc" 		column="INSURED_DESC"/> 
		<result property="address" 			column="ADDRESS"/> 
		<result property="insuredBusiness" 	column="INS_BUSINESS"/> 
		<result property="annSi" 			column="ANN_SI"/> 
		<result property="maxIndemPdSi" 	column="MAX_INDEM_PD_SI"/> 
		<result property="issueDate" 		column="ISSUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="expiryDate" 		column="EXPIRY_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="maxIndemPd" 		column="MAX_INDEM_PD"/> 
		<result property="indemFromDate" 	column="INDEM_FROM_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="timeExc" 			column="TIME_EXC"/> 
		<result property="repInterval" 		column="REP_INTERVAL"/> 
		<result property="createUser" 		column="CREATE_USER"/> 
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 		column="UPDATE_USER"/> 
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	
	<select id="retrieveMaintenanceSample" resultMap="alopMap" parameterType="java.util.Map">
			SELECT * FROM CPI.ETS_QUOTE_PKG.retrieve_quote_alop(#{quoteId},#{quotationNo})
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Insured" id="insuredMap">
		<result property="insuredId" 	column="INSURED_ID"/>
		<result property="insuredName" 	column="INSURED_NAME"/>
		<result property="insuredAbbr" 	column="INSURED_ABBR"/>
		<result property="firstName" 	column="FIRST_NAME"/>
		<result property="middleInitial" 	column="MIDDLE_INITIAL"/>
		<result property="lastName" 	column="LAST_NAME"/>
		<result property="addrLine1" 	column="ADDR_LINE1"/>
		<result property="addrLine2" 	column="ADDR_LINE2"/>
		<result property="addrLine3" 	column="ADDR_LINE3"/>
		<result property="zipCd" 	column="ZIP_CD"/>
		<result property="address" 	column="ADDRESS"/>
		<result property="contactNo" 	column="CONTACT_NO"/>
		<result property="emailAdd" 	column="EMAIL_ADD"/>
		<result property="activeTag" 	column="ACTIVE_TAG"/>
		<result property="corpTag" 	column="CORP_TAG"/>
		<result property="vatTag" 	column="VAT_TAG"/>
		<result property="oldInsId" 	column="OLD_INS_ID"/>
		<result property="createUser" 	column="CREATE_USER"/>
		<result property="createDate" 	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
		<result property="updateUser" 	column="UPDATE_USER"/>
		<result property="updateDate" 	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/> 
	</resultMap>
	
	<select id="retrieveMtnInsured" resultMap="insuredMap" parameterType="java.util.Map">
			SELECT * FROM CPI.ETS_MAINTENANCE_PKG_PCPCR.retrieve_mtn_insured(#{insuredId, jdbcType=VARCHAR},'',1,'','')
	</select>
	
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.EndtCode" id="endtCode">
		<result property="lineCd" column="LINE_CD"/>
		<result property="lineDesc" column="LINE_DESCRIPTION"/>
		<result property="endtCd" column="ENDT_CD"/>
		<result property="endtTitle" column="ENDT_TITLE"/>
		<result property="description" column="ENDT_DESCRIPTION"/>
		<result property="defaultTag" column="DEFAULT_TAG"/>
		<result property="activeTag" column="ACTIVE_TAG"/>
		<result property="endtText01" column="ENDT_TEXT01"/>
		<result property="endtText02" column="ENDT_TEXT02"/>
		<result property="endtText03" column="ENDT_TEXT03"/>
		<result property="endtText04" column="ENDT_TEXT04"/>
		<result property="endtText05" column="ENDT_TEXT05"/>
		<result property="endtText06" column="ENDT_TEXT06"/>
		<result property="endtText07" column="ENDT_TEXT07"/>
		<result property="endtText08" column="ENDT_TEXT08"/>
		<result property="endtText09" column="ENDT_TEXT09"/>
		<result property="endtText10" column="ENDT_TEXT10"/>
		<result property="endtText11" column="ENDT_TEXT11"/>
		<result property="endtText12" column="ENDT_TEXT12"/>
		<result property="endtText13" column="ENDT_TEXT13"/>
		<result property="endtText14" column="ENDT_TEXT14"/>
		<result property="endtText15" column="ENDT_TEXT15"/>
		<result property="endtText16" column="ENDT_TEXT16"/>
		<result property="endtText17" column="ENDT_TEXT17"/>
		<result property="remarks" 	column="REMARKS"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<select id="retrieveEndtCode" resultMap="endtCode" parameterType="java.util.Map">
		SELECT * FROM CPI.ETS_MAINTENANCE_PKG_PCPCR.retrieve_endt_code(#{lineCd, jdbcType=VARCHAR},#{endtCd , jdbcType=VARCHAR},'',1,'','')
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.District" id="district">
		<result property="districtCd" column="DISTRICT_CD" />
		<result property="districtDesc" column="DISTRICT_DESC" />
		<result property="activeTag" column="ACTIVE_TAG" />
		<result property="remarks" column="REMARKS" />
		<result property="createUser" column="CREATE_USER" />
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER" />
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.City" id="city">
		<result property="cityCd" column="CITY_CD" />
		<result property="cityDesc" column="CITY_DESC" />
		<association property="districtList" resultMap="district"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Province" id="province">
		<result property="provinceCd" column="PROVINCE_CD" />
		<result property="provinceDesc" column="PROVINCE_DESC" />
		<association property="cityList" resultMap="city"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Region" id="region">
		<result property="regionCd" column="REGION_CD" />
		<result property="regionDesc" column="REGION_DESC" />
		<association property="provinceList" resultMap="province"></association>
	</resultMap>
	
	<select id="retrieveMtnDistrict" resultMap="region" parameterType="java.util.Map">
		SELECT * FROM CPI.ETS_MAINTENANCE_PKG_PCPCR.retrieve_mtn_district(#{regionCd, jdbcType=VARCHAR},#{provinceCd, jdbcType=VARCHAR},#{cityCd, jdbcType=VARCHAR},#{districtCd, jdbcType=VARCHAR},'',1,'','')
	</select>
	
	
	<resultMap type="ph.cpi.rest.api.model.maintenance.Deductibles" id="deductibles">
		<result property="lineCd" column="LINE_CD"/>
		<result property="lineDesc" column="DESCRIPTION"/>
		<result property="deductibleCd" column="DEDUCTIBLE_CD"/>
		<result property="deductibleTitle" column="DEDUCTIBLE_TITLE"/>
		<result property="deductibleType" column="DEDUCTIBLE_TYPE"/>
		<result property="deductibleRate" column="DEDUCTIBLE_RATE"/>
		<result property="deductibleAmt" column="DEDUCTIBLE_AMT"/>
		<result property="minAmt" column="MIN_AMT"/>
		<result property="maxAmt" column="MAX_AMT"/>
		<result property="deductibleText" column="DEDUCTIBLE_TEXT"/>
		<result property="activeTag" column="ACTIVE_TAG"/>
		<result property="remarks" column="REMARKS"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE"  typeHandler="ph.cpi.rest.api.typehandler.LocalDateTypeHandler"/>
	</resultMap>
	
	<select id="retrieveMtnDeductibles" resultMap="deductibles">
		SELECT * FROM CPI.ETS_MAINTENANCE_PKG_PCPCR.retrieve_mtn_deductibles(#{lineCd, jdbcType=VARCHAR},#{deductibleCd, jdbcType=VARCHAR},'',1,'','')
	</select>
	
</mapper>