<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="ph.cpi.mybatis.mapper.AccountingInTrustMapper">
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitCvPaytReq" id="acitCvPaytReqListMap">
		<result property="tranId" 		column="TRAN_ID"/>
		<result property="itemNo" 		column="ITEM_NO"/>
		<result property="reqId" 		column="REQ_ID"/>
		<result property="reqPrefix" 	column="REQ_PREFIX"/>
		<result property="reqYear" 		column="REQ_YEAR"/>
		<result property="reqMm" 		column="REQ_MM"/>
		<result property="reqSeqNo" 	column="REQ_SEQ_NO"/>
		<result property="tranTypeCd" 	column="TRAN_TYPE_CD"/>
		<result property="reqDate" 		column="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="requestedBy" 	column="REQUESTED_BY"/>
		<result property="particulars" 	column="PARTICULARS"/>
		<result property="currCd" 		column="CURR_CD"/>
		<result property="currRate" 	column="CURR_RATE"/>
		<result property="reqAmt" 		column="REQ_AMT"/>
		<result property="localAmt" 	column="LOCAL_AMT"/>
		<result property="createUser" 	column="CREATE_USER"/>
		<result property="createDate" 	column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 	column="UPDATE_USER"/>
		<result property="updateDate" 	column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitPaytReq" id="acitPaytReqMap">
		<result property="paytReqNo"		column="PAYT_REQ_NO"/>
		<result property="reqId"			column="REQ_ID"/>
		<result property="reqPrefix"		column="REQ_PREFIX"/>
		<result property="reqYear"			column="REQ_YEAR"/>
		<result property="reqMm"			column="REQ_MM"/>
		<result property="reqSeqNo"			column="REQ_SEQ_NO"/>
		<result property="tranTypeCd"		column="TRAN_TYPE_CD"/>
		<result property="tranTypeDesc"		column="TRAN_TYPE_DESC"/>
		<result property="reqDate"			column="REQ_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="reqStatus"		column="REQ_STATUS"/>
		<result property="reqStatusDesc"	column="REQ_STATUS_DESC"/>
		<result property="payeeNo"			column="PAYEE_NO"/>
		<result property="payee"			column="PAYEE"/>
		<result property="currCd"			column="CURR_CD"/>
		<result property="currRate"			column="CURR_RATE"/>
		<result property="reqAmt"			column="REQ_AMT"/>
		<result property="localAmt"			column="LOCAL_AMT"/>
		<result property="particulars"		column="PARTICULARS"/>
		<result property="preparedBy"		column="PREPARED_BY"/>
		<result property="preparedDate"		column="PREPARED_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="requestedBy"		column="REQUESTED_BY"/>
		<result property="approvedBy"		column="APPROVED_BY"/>
		<result property="approvedDate"		column="APPROVED_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitPrqTrans" id="acitPrqTransMap">
		<result property="reqId"				column="REQ_ID"/>
		<result property="itemNo"				column="ITEM_NO"/>
		<result property="claimId"				column="CLAIM_ID"/>
		<result property="projId"				column="PROJ_ID"/>
		<result property="histNo"				column="HIST_NO"/>
		<result property="policyId"				column="POLICY_ID"/>
		<result property="instNo"				column="INST_NO"/>
		<result property="quarterEnding"		column="QUARTER_ENDING" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="investmentId"			column="INVESTMENT_ID"/>
		<result property="refNo"				column="REF_NO"/>
		<result property="paymentFor"			column="PAYMENT_FOR"/>
		<result property="currCd"				column="CURR_CD"/>
		<result property="currRate"				column="CURR_RATE"/>
		<result property="currAmt"				column="CURR_AMT"/>
		<result property="localAmt"				column="LOCAL_AMT"/>
		<result property="remarks"				column="REMARKS"/>
		<result property="createUser" 			column="CREATE_USER"/>
		<result property="createDate" 			column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 			column="UPDATE_USER"/>
		<result property="updateDate" 			column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<select id="retrieveAcitCvPaytReqList" resultMap="acitCvPaytReqListMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_CV_PAYTREQLIST_PKG.ret_payt_req_list(
					#{tranId,jdbcType=INTEGER},
					#{itemNo,jdbcType=INTEGER},
					'', '', '',''))
	</select>
	<select id="retrieveAcitPaytReq" resultMap="acitPaytReqMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_PAYMENT_REQUEST_PKG.ret_payt_req(
					#{reqId,jdbcType=INTEGER},
					#{paytReqNo, jdbcType=VARCHAR},
					#{tranTypeDesc, jdbcType=VARCHAR},
					CAST(to_timestamp(#{reqDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					CAST(to_timestamp(#{reqDateTo,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{reqStatusDesc, jdbcType=VARCHAR},
					#{payee, jdbcType=VARCHAR},
					#{currCd, jdbcType=VARCHAR},
					#{reqAmt, jdbcType=INTEGER},
					#{particulars, jdbcType=VARCHAR},
					#{requestedBy, jdbcType=VARCHAR},
					'', '', '',''))
	</select>
	
	<select id="retrieveAcitPrqTrans" resultMap="acitPrqTransMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_PRQ_TRANS_PKG.ret_acit_prq_trans(
					#{reqId,jdbcType=INTEGER},
					#{itemNo, jdbcType=INTEGER},
					'', '', '',''))
	</select>
	
	<update id="saveAcitPaytReq" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
			ACIT_PAYMENT_REQUEST_PKG.save_payt_req(
				#{paytReqNo,mode=OUT,jdbcType=VARCHAR},
				#{reqId,mode=INOUT, jdbcType=INTEGER},
				#{reqPrefix, jdbcType=VARCHAR},
				#{reqYear, jdbcType=VARCHAR},
				#{reqMm, jdbcType=INTEGER},
				#{reqSeqNo, jdbcType=VARCHAR},
				#{tranTypeCd, jdbcType=VARCHAR},
				CAST(to_timestamp(#{reqDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{reqStatus, jdbcType=VARCHAR},
				#{payeeNo, jdbcType=VARCHAR},
				#{payee, jdbcType=VARCHAR},
				#{currCd, jdbcType=VARCHAR},
				#{currRate, jdbcType=VARCHAR},
				#{reqAmt, jdbcType=INTEGER},
				#{localAmt, jdbcType=INTEGER},
				#{particulars, jdbcType=VARCHAR},
				#{preparedBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{preparedDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{requestedBy, jdbcType=VARCHAR},
				#{approvedBy, jdbcType=VARCHAR},
				CAST(to_timestamp(#{approvedDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{createUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
				#{updateUser, jdbcType=VARCHAR},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
			);
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitProfCommSumm" id="acitProfCommSumm">
		<result property="profCommId" 					column="PROFCOMM_ID"/>
		<result property="cedingId" 					column="CEDING_ID"/>
		<result property="cedingName" 					column="CEDING_NAME"/>
		<result property="cedingAbbr" 					column="CEDING_ABBR"/>
		<result property="month" 						column="PROFCOMM_MM"/>
		<result property="year" 						column="PROFCOMM_YEAR"/>
		<result property="profitLossAmt" 				column="PROFIT_LOSS_AMT"/>
		<result property="totIncome" 					column="TOTAL_INCOME"/>
		<result property="totOutgo" 					column="TOTAL_OUTGO"/>
		<result property="lossCarry" 					column="LOSS_CARRY"/>
		<result property="createUser" 					column="CREATE_USER"/>
		<result property="createDate" 					column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 					column="UPDATE_USER"/>
		<result property="updateDate" 					column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitInvestments" id="acitInvestmentsList">
		<result property="invtId" 						column="INVT_ID"/>
		<result property="invtCd" 						column="INVT_CODE"/>
		<result property="bank" 						column="BANK"/>
		<result property="certNo" 						column="CERT_NO"/>
		<result property="invtType" 					column="INVT_TYPE"/>
		<result property="invtSecCd" 					column="INVT_SEC_CD"/>
		<result property="invtStatus" 					column="INVT_STATUS"/>
		<result property="matPeriod" 					column="MATURITY_PERIOD"/>
		<result property="durUnit" 						column="DURATION_UNIT"/>
		<result property="intRt" 						column="INTEREST_RATE"/>
		<result property="purDate" 						column="PURCHASED_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="matDate" 						column="MATURITY_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="currCd" 						column="CURR_CD"/>
		<result property="currRate" 					column="CURR_RATE"/>
		<result property="invtAmt" 						column="INVT_AMT"/>
		<result property="incomeAmt" 					column="INCOME_AMT"/>
		<result property="incomeAmt" 					column="INCOME_AMT"/>
		<result property="bankCharge" 					column="BANK_CHARGE"/>
		<result property="whtaxAmt" 					column="WHTAX_AMT"/>
		<result property="matVal" 						column="MATURITY_VALUE"/>
		<result property="createUser" 					column="CREATE_USER"/>
		<result property="createDate" 					column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 					column="UPDATE_USER"/>
		<result property="updateDate" 					column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="okDelete"						column="OK_DELETE" />
	</resultMap>
	
	<select id="retrieveInvestmentList" resultMap="acitInvestmentsList" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_INVESTMENTS_PKG.ret_invt_list(
					#{invtId,jdbcType=INTEGER},
					#{invtCd,jdbcType=VARCHAR},
					#{bank,jdbcType=VARCHAR},
					#{invtType,jdbcType=VARCHAR},
					#{invtSecCd,jdbcType=VARCHAR},
					#{invtStatus,jdbcType=VARCHAR},
					#{matPeriod,jdbcType=VARCHAR},
					#{durUnit,jdbcType=VARCHAR},
					CAST(to_timestamp(#{purDate, jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					CAST(to_timestamp(#{matDate, jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{currCd,jdbcType=VARCHAR},
					'', '', '',''))
	</select> 
	
	<update id="saveAcitInvestments" parameterType="java.util.Map" statementType="CALLABLE">
		BEGIN
		   <foreach collection="saveAcitInvestments" item="investments">
		   	   ACIT_INVESTMENTS_PKG.save_invt(	#{investments.invtId, jdbcType=VARCHAR},
		   	   									#{investments.invtCd, jdbcType=VARCHAR},
		   	   									#{investments.bank	, jdbcType=VARCHAR},
		   	   									#{investments.certNo, jdbcType=VARCHAR},
		   	   									#{investments.invtType, jdbcType=VARCHAR},
		   	   									#{investments.invtSecCd, jdbcType=VARCHAR},
		   	   									#{investments.invtStatus, jdbcType=VARCHAR},
		   	   									#{investments.matPeriod, jdbcType=VARCHAR},
		   	   									#{investments.durUnit, jdbcType=VARCHAR},
		   	   									#{investments.intRt, jdbcType=VARCHAR},
		   	   									CAST(to_timestamp(#{investments.purDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		   	   									CAST(to_timestamp(#{investments.matDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
		   	   									#{investments.currCd, jdbcType=VARCHAR},
		   	   									#{investments.currRate, jdbcType=VARCHAR},
		   	   									#{investments.invtAmt, jdbcType=VARCHAR},
		   	   									#{investments.incomeAmt, jdbcType=VARCHAR},
		   	   									#{investments.bankCharge, jdbcType=VARCHAR},
		   	   									#{investments.whtaxAmt, jdbcType=VARCHAR},
		   	   									#{investments.matVal, jdbcType=VARCHAR},
		   	   									#{investments.createUser},
			   									CAST(to_timestamp(#{investments.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			   									#{investments.updateUser},
			   									CAST(to_timestamp(#{investments.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
		   </foreach>
		   <foreach collection="delAcitInvestments" item="investments">
		   		ACIT_INVESTMENTS_PKG.del_invt(#{investments.invtId, jdbcType=VARCHAR});
		   </foreach>
		END;
	</update>
	
	<select id="retrieveAcitCMDMList" resultMap="CMDMMapper">
		SELECT * FROM TABLE(ACIT_CRDR_MEMO_PKG.ret_acit_crdr_memo_list(#{tranId, jdbcType=VARCHAR},NULL,NULL,NULL,NULL))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitCMDM" id="CMDMMapper">
		<result property="tranId" column="CMDM_TRAN_ID"/>
		<result property="memoType" column="MEMO_TYPE"/>
		<result property="memoTranType" column="MEMO_TRAN_TYPE"/>
		<result property="tranTypeName" column="TRAN_TYPE_NAME"/>
		<result property="memoYear" column="MEMO_YEAR"/>
		<result property="memoMm" column="MEMO_MM"/>
		<result property="memoSeqNo" column="MEMO_SEQ_NO"/>
		<result property="tranTypeCd" column="CMDM_TRAN_TYPE_CD"/>
		<result property="groupTag" column="GROUP_TAG"/>
		<result property="autoTag" column="AUTO_TAG"/>
		<result property="memoDate" column="MEMO_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="memoStatus" column="MEMO_STATUS"/>
		<result property="status" column="STATUS"/>
		<result property="refNo" column="REF_NO"/>
		<result property="refNoTranId" column="REF_NO_TRAN_ID"/>
		<result property="refNoDate" column="REF_NO_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="payeeNo" column="PAYEE_NO"/>
		<result property="payee" column="PAYEE"/>
		<result property="particulars" column="PARTICULARS"/>
		<result property="currCd" column="CURR_CD"/>
		<result property="currRate" column="CURR_RATE"/>
		<result property="cmdmAmt" column="CMDM_AMT"/>
		<result property="localAmt" column="LOCAL_AMT"/>
		<result property="createUser" column="CMDM_CREATE_USER"/>
		<result property="createDate" column="CMDM_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" column="CMDM_UPDATE_USER"/>
		<result property="updateDate" column="CMDM_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="unbalAcctEntryTag" column="UNBAL_ACCT_ENTRY_TAG" />
	</resultMap>
	
	<update id="saveAcitCMDM" parameterType="java.util.Map"  statementType="CALLABLE">
		BEGIN
			ACIT_CRDR_MEMO_PKG.save_acit_crdr_memo(#{tranId,  mode=INOUT, jdbcType=VARCHAR},#{memoType},#{memoTranType, jdbcType=VARCHAR},#{memoYear, jdbcType=VARCHAR},#{memoMm, jdbcType=VARCHAR},#{memoSeqNo, jdbcType=VARCHAR},#{tranTypeCd},#{autoTag},
				CAST(to_timestamp(#{memoDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				,#{memoStatus},#{refNoTranId},
				CAST(to_timestamp(#{refNoDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				,#{payeeNo, jdbcType=VARCHAR},#{payee},#{particulars},#{currCd},#{currRate},#{cmdmAmt},#{localAmt},#{createUser},
				CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				,
				#{updateUser},
				CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
		END;
	</update>
	
	<select id="retrieveAcitRefNoLOV" resultMap="refNoLovMap">
		SELECT * FROM TABLE(ACIT_CRDR_MEMO_PKG.get_ref_nos(#{arTag, jdbcType=VARCHAR},
			#{cvTag, jdbcType=VARCHAR},
			#{jvTag, jdbcType=VARCHAR},
			#{cmTag, jdbcType=VARCHAR},
			#{dmTag, jdbcType=VARCHAR},
			#{groupTag, jdbcType=VARCHAR},
			#{tranStat, jdbcType=VARCHAR},
			#{arStatus, jdbcType=VARCHAR},
			#{cvStatus, jdbcType=VARCHAR},
			#{jvStatus, jdbcType=VARCHAR},
			#{memoStatus, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.RefNoLov" id="refNoLovMap">
		<result property="tranId" column="TRAN_ID"/>
		<result property="tranClass" column="TRAN_CLASS"/>
		<result property="tranNo" column="TRAN_NO"/>
		<result property="tranTypeName" column="TRAN_TYPE_NAME"/>
		<result property="tranDate" column="TRAN_DATE"  typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="tranStat" column="TRAN_STAT"/>
		<result property="particulars" column="PARTICULARS"/>
		<result property="status" column="STATUS"/>
		<result property="amount" column="AMOUNT"/>
	</resultMap>

	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcknowledgementReceipt" id="arListMap">
		<result property="tranId"			column="TRAN_ID" />
		<result property="arNo"				column="AR_NO" />
		<result property="arDate"			column="AR_DATE"	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="arStatDesc"		column="AR_STATUS" />
		<result property="tranTypeName"		column="TRAN_TYPE_NAME" />
		<result property="payor"			column="PAYOR" />
		<result property="arAmt"			column="AR_AMT" />
		<result property="particulars"		column="PARTICULARS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE"	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE"	typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<select id="retArList" resultMap="arListMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_ACKGT_RECEIPT_PKG.ret_ar_list(
																#{arNo, jdbcType=VARCHAR},
																#{payor, jdbcType=VARCHAR},
																CAST(to_timestamp(#{arDateFrom,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
																CAST(to_timestamp(#{arDateTo,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
																#{tranTypeName, jdbcType=VARCHAR},
																#{arStatus, jdbcType=VARCHAR},
																#{particulars, jdbcType=VARCHAR},
																#{arAmtFrom, jdbcType=VARCHAR},
																#{arAmtTo, jdbcType=VARCHAR},
																NULL,
																NULL,
																NULL,
																NULL
															   )
						   )
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcknowledgementReceipt" id="arEntryMap">
		<result property="tranId"        column="TRAN_ID"           />
		<result property="arNo"          column="AR_NO"             />
		<result property="arDate"        column="AR_DATE"          typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="arStatus"      column="AR_STATUS"         />
		<result property="arStatDesc"    column="AR_STAT_DESC"      />
		<result property="dcbYear"       column="DCB_YEAR"          />
		<result property="dcbUserCd"     column="DCB_USER_CD"       />
		<result property="dcbNo"         column="DCB_NO"            />
		<result property="dcbBank"       column="DCB_BANK"          />
		<result property="dcbBankName"   column="DCB_BANK_NAME"     />
		<result property="dcbBankAcct"   column="DCB_BANK_ACCT"     />
		<result property="dcbBankAcctNo" column="DCB_BANK_ACCT_NO"  />
		<result property="refNo"         column="REF_NO"            />
		<result property="tranTypeCd"    column="TRAN_TYPE_CD"      />
		<result property="tranTypeName"  column="TRAN_TYPE_NAME"    />
		<result property="prNo"          column="PR_NO"             />
		<result property="prDate"        column="PR_DATE"          typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="prPreparedBy"  column="PR_PREPARED_BY"    />
		<result property="payeeNo"       column="PAYEE_NO"          />
		<result property="payor"         column="PAYOR"             />
		<result property="mailAddress"   column="MAIL_ADDRESS"      />
		<result property="bussTypeCd"    column="BUSS_TYPE_CD"      />
		<result property="tin"           column="TIN"               />
		<result property="currCd"        column="AAR_CURR_CD"       />
		<result property="arAmt"         column="AR_AMT"            />
		<result property="currRate"      column="AAR_CURR_RATE"     />
		<result property="particulars"   column="PARTICULARS"       />
		<result property="createUser"    column="CREATE_USER"       />
		<result property="createDate"    column="CREATE_DATE"      typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"    column="UPDATE_USER"       />
		<result property="updateDate"    column="UPDATE_DATE"      typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<association property="paytDtl"  resultMap="paytDtlAssoc"   />
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.ARPaymentDetails" id="paytDtlAssoc">
		<result property="paytId"          column="PAYT_ID" />
		<result property="paytMode"        column="PAYT_MODE" />
		<result property="currCd"          column="AAP_CURR_CD" />
		<result property="currRate"        column="AAP_CURR_RATE" />
		<result property="paytAmt"         column="PAYT_AMT" />
		<result property="bank"            column="BANK" />
		<result property="bankAcct"        column="BANK_ACCT" />
		<result property="checkNo"         column="CHECK_NO" />
		<result property="checkDate"       column="CHECK_DATE"          typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="checkClass"      column="CHECK_CLASS" />
	</resultMap>
	
	<select id="retArEntry" resultMap="arEntryMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_ACKGT_RECEIPT_PKG.ret_ar_entry(
																	#{tranId},
																	#{arNo}
															   )
						   )
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitTransactions" id="transactionMap">
		<result property="tranId" column="TRAN_ID"/>
		<result property="tranDate" column="TRAN_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="tranClass" column="TRAN_CLASS"/>
		<result property="tranTypeCd" column="TRAN_TYPE_CD"/>
		<result property="tranYear" column="TRAN_YEAR"/>
		<result property="tranClassNo" column="TRAN_CLASS_NO"/>
		<result property="tranStat" column="TRAN_STAT"/>
		<result property="closeDate" column="CLOSE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="deleteDate" column="DELETE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="postDate" column="POST_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property="jvListings" resultMap="jvMap"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitJVListing" id="jvMap">
		<result property="tranId" 			column="JV_TRAN_ID"/>
		<result property="jvYear" 			column="JV_YEAR"/>
		<result property="jvNo" 			column="JV_NO"/>
		<result property="jvDate" 			column="JV_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="jvStatus" 		column="JV_STATUS"/>
		<result property="jvStatusName" 	column="JV_STATUS_NAME"/>
		<result property="tranTypeCd" 		column="JV_TRAN_TYPE_CD"/>
		<result property="tranTypeName" 	column="TRAN_TYPE"/>
		<result property="autoTag" 			column="AUTO_TAG"/>
		<result property="refnoTranId" 		column="REFNO_TRAN_ID"/>
		<result property="refNo" 			column="REFNO"/>
		<result property="refnoDate" 		column="REFNO_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="particulars" 		column="PARTICULARS"/>
		<result property="currCd" 			column="CURR_CD"/>
		<result property="currRate" 		column="CURR_RATE"/>
		<result property="jvAmt" 			column="JV_AMT"/>
		<result property="localAmt" 		column="LOCAL_AMT"/>
		<result property="allocTag" 		column="ALLOC_TAG"/>
		<result property="allocTranId" 		column="ALLOC_TRAN_ID"/>
		<result property="preparedBy" 		column="PREPARED_BY"/>
		<result property="preparedName" 	column="PREPARED_NAME"/>
		<result property="preparedPosition" column="PREPARED_POS"/>
		<result property="preparedDate" 	column="PREPARED_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="approvedBy" 		column="APPROVED_BY"/>
		<result property="approvedName" 	column="APPROVED_NAME"/>
		<result property="approvedPosition" column="APPROVED_POS"/>
		<result property="approvedDate" 	column="APPROVED_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="createUser" 		column="JV_CREATE_USER"/>
		<result property="createDate" 		column="JV_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="JV_UPDATE_USER"/>
		<result property="updateDate" 		column="JV_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<association property="inwPolBal" resultMap="inwPolBalMap"></association>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitJVAdjstInwPolBal" id="inwPolBalMap">
		<result property="tranId" column="AIPB_TRAN_ID"/>
		<result property="itemNo" column="AIPB_ITEM_NO"/>
		<result property="policyId" column="AIPB_POLICY_ID"/>
		<result property="policyNo" column="AIPB_POLICY_NO"/>
		<result property="soaNo" column="AIPB_SOA_NO"/>
		<result property="coRefNo" column="AIPB_CO_REF_NO"/>
		<result property="effDate" column="AIPB_EFF_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="dueDate" column="AIPB_DUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="instNo" column="AIPB_INST_NO"/>
		<result property="currCd" column="AIPB_CURR_CD"/>
		<result property="currRate" column="AIPB_CURR_RATE"/>
		<result property="premAmt" column="AIPB_PREM_AMT"/>
		<result property="riComm" column="AIPB_RI_COMM"/>
		<result property="riCommVat" column="AIPB_RI_COMM_VAT"/>
		<result property="charges" column="AIPB_CHARGES"/>
		<result property="netDue" column="AIPB_NET_DUE"/>
		<result property="prevPaytAmt" column="AIPB_PREV_PAYT_AMT"/>
		<result property="adjBalAmt" column="AIPB_ADJ_BAL_AMT"/>
		<result property="overdueInt" column="AIPB_OVERDUE_INT"/>
		<result property="createUser" column="AIPB_CREATE_USER"/>
		<result property="createDate" column="AIPB_CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="AIPB_UPDATE_USER"/>
		<result property="updateDate" column="AIPB_UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitSOAAgingDetails" id="soaAgingMap">
		<result property="policyId" column="POLICY_ID"/>
		<result property="cedingId" column="CEDING_ID"/>
		<result property="refCd" column="REF_CD"/>
		<result property="payeeNo" column="PAYEE_NO"/>
		<result property="payeeName" column="PAYEE_NAME"/>
		<result property="policyNo" column="POLICY_NO"/>
		<result property="soaNo" column="SOA_NO"/>
		<result property="coRefNo" column="CO_REF_NO"/>
		<result property="instNo" column="INST_NO"/>
		<result property="currCd" column="CURR_CD"/>
		<result property="currRate" column="CURR_RATE"/>
		<result property="totalAmtDue" column="TOTAL_AMT_DUE"/>
		<result property="totalPayments" column="TOTAL_PAYMENTS"/>
		<result property="tempPayments" column="TEMP_PAYMENTS"/>
		<result property="balAmtDue" column="BAL_AMT_DUE"/>
		<result property="balPremDue" column="BAL_PREM_DUE"/>
		<result property="balChargesDue" column="BAL_CHARGES_DUE"/>
		<result property="balRiComm" column="BAL_RI_COMM"/>
		<result property="balRiCommVat" column="BAL_RI_COMM_VAT"/>
		<result property="balOverdueInt" column="BAL_OVERDUE_INT"/>
		<result property="effDate" column="EFF_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="dueDate" column="DUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="bookingDate" column="BOOKING_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="agingId" column="AGING_ID"/>
		<result property="netDue" column="NET_DUE"/>
		<result property="balance" column="BALANCE"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitJVIntOverdueAcctsMS" id="overDueMap">
		<result property="tranId" column="TRAN_ID"/>
		<result property="itemNo" column="ITEM_NO"/>
		<result property="cedingId" column="CEDING_ID"/>
		<result property="policyId" column="POLICY_ID"/>
		<result property="policyNo" column="POLICY_NO"/>
		<result property="soaNo" column="SOA_NO"/>
		<result property="coRefNo" column="CO_REF_NO"/>
		<result property="effDate" column="EFF_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="instNo" column="INST_NO"/>
		<result property="dueDate" column="DUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="daysOverdue" column="DAYS_OVERDUE"/>
		<result property="autoTag" column="AUTO_TAG"/>
		<result property="currCd" column="CURR_CD"/>
		<result property="currRate" column="CURR_RATE"/>
		<result property="premAmt" column="PREM_AMT"/>
		<result property="overdueInt" column="OVERDUE_INT"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveAcitJvList" resultMap="transactionMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv(
					#{tranId,jdbcType=INTEGER},
					'', '', '',''))
	</select>
	
	<select id="retrieveAcitJvEntry" resultMap="transactionMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv_ent(
					#{tranId,jdbcType=INTEGER},
					'', '', '',''))
	</select>
	
	<update id="saveAcitJVEntry" parameterType="java.util.Map" statementType="CALLABLE">
		DECLARE
			v_tran_id	ACIT_TRANSACTIONS.TRAN_ID%TYPE;
		BEGIN
			ACIT_JOURNAL_VOUCHER_PKG.save_acit_jv(v_tran_id,#{tranId, jdbcType=VARCHAR}, 
												  CAST(to_timestamp(#{tranDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),#{tranType,jdbcType=INTEGER},
												  #{tranYear,jdbcType=VARCHAR}, #{tranClassNo,jdbcType=VARCHAR}, 
												  #{tranStat}, CAST(to_timestamp(#{closeDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
												  CAST(to_timestamp(#{deleteDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
												  CAST(to_timestamp(#{postDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
												  #{createUser}, CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), #{updateUser},   
												  CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
												  #{tranIdJv,jdbcType=VARCHAR}, #{jvYear,jdbcType=VARCHAR},
												  #{jvNo,jdbcType=VARCHAR}, CAST(to_timestamp(#{jvDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), #{jvStatus}, #{jvTranTypeCd}, 
												  #{autoTag}, #{refnoTranId,jdbcType=INTEGER}, CAST(to_timestamp(#{refnoDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), 
												  #{particulars}, #{currCd}, #{currRate}, #{jvAmt}, #{localAmt}, #{allocTag,jdbcType=VARCHAR}, #{allocTranId,jdbcType=VARCHAR}, 
												  #{preparedBy,jdbcType=VARCHAR}, 
												  CAST(to_timestamp(#{preparedDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), #{approvedBy,jdbcType=VARCHAR}, 
												  CAST(to_timestamp(#{approvedDate,jdbcType=VARCHAR}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), 
												  #{createUserJv}, CAST(to_timestamp(#{createDateJv}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE), #{updateUserJv}, 
												  CAST(to_timestamp(#{updateDateJv}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			#{tranIdOut, mode=OUT, jdbcType=INTEGER} := v_tran_id;
		END;
		
	</update>
	
	<select id="retrieveAcitSOAAging" resultMap="soaAgingMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv_soa(
					#{tranId},
					#{policyId,jdbcType=INTEGER},
					#{instNo,jdbcType=INTEGER},
					#{cedingId},
					'', '', '',''))
	</select>
	
	<select id="retrieveAcitJvInwPolBal" resultMap="inwPolBalMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv_aipb(
					#{tranId},
					#{instNo,jdbcType=INTEGER},
					#{cedingCo},
					'', '', '',''))
	</select>

	<update id="saveAcitArTrans" parameterType="java.util.Map" statementType="CALLABLE">
		DECLARE
			v_tran_id        ACIT_TRANSACTIONS.TRAN_ID%TYPE;
		BEGIN
			ACIT_ACKGT_RECEIPT_PKG.save_acit_trans(
													v_tran_id,
													#{tranId},
													CAST(to_timestamp(#{tranDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{tranClass},
													#{tranTypeCd},
													#{tranYear},
													#{tranClassNo,jdbcType=VARCHAR},
													#{tranStat},
													CAST(to_timestamp(#{closeDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													CAST(to_timestamp(#{deleteDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													CAST(to_timestamp(#{postDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{createUser},
													CAST(to_timestamp(#{createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{updateUser},
													CAST(to_timestamp(#{updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
												  );
												  
			#{outTranId, mode=OUT, jdbcType=VARCHAR} := v_tran_id;
			
			IF v_tran_id <![CDATA[ <> ]]> 0 THEN
				ACIT_ACKGT_RECEIPT_PKG.save_ar_info(
														v_tran_id,
														#{tranClassNo, jdbcType=VARCHAR},
														CAST(to_timestamp(#{tranDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{arStatus},
														#{tranTypeCd},
														#{dcbYear},
														#{dcbNo},
														#{dcbUserCd},
														#{dcbBank, jdbcType=VARCHAR},
														#{dcbBankAcct, jdbcType=VARCHAR},
														#{refNo, jdbcType=VARCHAR},
														#{prNo, jdbcType=VARCHAR},
														CAST(to_timestamp(#{prDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{prPreparedBy, jdbcType=VARCHAR},
														#{payeeNo, jdbcType=VARCHAR},
														#{payor},
														#{particulars},
														#{currCd},
														#{currRate},
														#{arAmt},
														#{allocTag, jdbcType=VARCHAR},
														#{allocTranId, jdbcType=VARCHAR},
														#{createUser},
														CAST(to_timestamp(#{createDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{updateUser},
														CAST(to_timestamp(#{updateDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
													);
				<foreach collection="delPaytDtl" item="del">
					ACIT_AR_PAYTDTL_PKG.del_ar_paytdtl(
														v_tran_id,
														#{del.paytId}
													  );
				</foreach>
				<foreach collection="savePaytDtl" item="save">
					ACIT_AR_PAYTDTL_PKG.save_ar_paytdtl(
														v_tran_id,
														#{save.paytId, jdbcType=VARCHAR},
														#{save.paytMode},
														#{save.currCd},
														#{save.currRate},
														#{save.paytAmt},
														#{save.bank, jdbcType=VARCHAR},
														#{save.bankAcct, jdbcType=VARCHAR},
														#{save.checkNo, jdbcType=VARCHAR},
														CAST(to_timestamp(#{save.checkDate,jdbcType=DATE}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{save.checkClass, jdbcType=VARCHAR}
													  );
				</foreach>
			END IF;
		END;
	</update>

	<update id="updateAcitPaytReqStat" parameterType="java.util.Map">
		BEGIN
			ACIT_PAYMENT_REQUEST_PKG.up_acit_paytreqstat(
				#{reqId, jdbcType=INTEGER},
				#{reqStatus, jdbcType=VARCHAR},
				#{updateUser, jdbcType=VARCHAR}
			);
		END;
	</update>
	
	<select id="retrieveAcitJVIntOverdue" resultMap="overDueMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv_ioams(
					#{tranId},
					#{instNo,jdbcType=INTEGER},
					#{cedingId},
					'', '', '',''))
	</select>
	
	<update id="saveAcitJVInwPolBal" parameterType="java.util.Map">
		BEGIN
			<foreach collection="deleteInwPol" item="delete">
				ACIT_JOURNAL_VOUCHER_PKG.del_acit_aipb(#{delete.tranId}, #{delete.itemNo});
			</foreach>
			
			<foreach collection="saveInwPol" item="save">
				ACIT_JOURNAL_VOUCHER_PKG.save_acit_aipb(#{save.tranId}, #{save.itemNo,jdbcType=INTEGER}, #{save.policyId}, #{save.instNo}, #{save.currCd}, 
													#{save.currRate}, #{save.premAmt}, #{save.riComm}, #{save.riCommVat}, #{save.charges}, 
													#{save.netDue}, #{save.prevPaytAmt}, #{save.adjBalAmt}, #{save.overdueInt}, #{save.createUser}, 
													CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{save.updateUser}, 
													CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			
				ACIT_AGING_SOA_DETAILS_PKG.save_aging_soa_dtl(#{save.policyId},#{save.instNo}, #{save.premAmt}, #{save.riComm}, #{save.riCommVat}, 
															  #{save.charges}, #{save.netDue}, #{save.adjBalAmt}, #{save.createUser}, 
													CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{save.updateUser}, 
													CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
			
			
		END;
	</update>
	
	<update id="saveAcitJVOverdueAccts" parameterType="java.util.Map">
		BEGIN
			<foreach collection="deleteOverdueAccts" item="delete">
				ACIT_JOURNAL_VOUCHER_PKG.del_acit_ioams(#{delete.tranId}, #{delete.itemNo});
			</foreach>
			
			<foreach collection="saveOverdueAccts" item="save">
				ACIT_JOURNAL_VOUCHER_PKG.save_acit_ioams(#{save.tranId}, #{save.itemNo,jdbcType=INTEGER}, #{save.policyId},
														 #{save.instNo}, CAST(to_timestamp(#{save.dueDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														 #{save.daysOverdue}, #{save.autoTag}, #{save.currCd}, #{save.currRate}, 
														 #{save.premAmt}, #{save.overdueInt}, #{save.createUser},
													     CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														 #{save.updateUser},
														 CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
			</foreach>
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitJVPremResReleased" id="premResMap">
		<result property="tranId" column="TRAN_ID"/>
		<result property="itemNo" column="ITEM_NO"/>
		<result property="quarterEnding" column="QUARTER_ENDING" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="currCd" column="CURR_CD"/>
		<result property="currRate" column="CURR_RATE"/>
		<result property="interestAmt" column="INTEREST_AMT"/>
		<result property="whtaxAmt" column="WHTAX_AMT"/>
		<result property="releaseAmt" column="RELEASE_AMT"/>
		<result property="createUser" column="CREATE_USER"/>
		<result property="createDate" column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" column="UPDATE_USER"/>
		<result property="updateDate" column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveAcitJVPremResRel" resultMap="premResMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_JOURNAL_VOUCHER_PKG.ret_acit_jv_premrr(
					#{tranId},
					#{cedingId, jdbcType=VARCHAR},
					'', '', '',''))
	</select>

	 <update id="saveAcitPrqTrans" parameterType="java.util.Map">
    	BEGIN
    		<foreach collection="savePrqTrans" item="save">
	    		ACIT_PRQ_TRANS_PKG.save_acit_prq_trans(
	    			#{save.reqId, jdbcType=INTEGER},
					#{save.itemNo, jdbcType=INTEGER},
					#{save.claimId, jdbcType=INTEGER},
					#{save.projId, jdbcType=INTEGER},
					#{save.histNo, jdbcType=INTEGER},
					#{save.policyId, jdbcType=INTEGER},
					#{save.instNo, jdbcType=INTEGER},
					CAST(to_timestamp(#{save.quarterEnding}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.investmentId, jdbcType=INTEGER},
					#{save.refNo, jdbcType=VARCHAR},
					#{save.paymentFor, jdbcType=VARCHAR},
					#{save.currCd, jdbcType=VARCHAR},
					#{save.currRate, jdbcType=INTEGER},
					#{save.currAmt, jdbcType=INTEGER},
					#{save.localAmt, jdbcType=INTEGER},
					#{save.remarks, jdbcType=VARCHAR},
			        #{save.createUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
			        #{save.updateUser,jdbcType=VARCHAR},
			        CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
	    		);
    		</foreach>
    		<foreach collection="deletePrqTrans" item="del">
    			ACIT_PRQ_TRANS_PKG.del_acit_prq_trans(
    				#{del.reqId, jdbcType=INTEGER},
					#{del.itemNo, jdbcType=INTEGER});
    		</foreach>
    	END;
    </update>

	<update id="cancelCMDM" parameterType="java.util.Map">
		BEGIN
			ACIT_CRDR_MEMO_PKG.cancel_memo(#{tranId},#{updateUser},CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
		END;
	</update>
	
	<update id="printCMDM" parameterType="java.util.Map">
		BEGIN
			ACIT_CRDR_MEMO_PKG.print_memo(#{tranId},#{updateUser},CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
		END;
	</update>
	
	<update id="cancelAr" parameterType="java.util.Map">
		BEGIN
			ACIT_ACKGT_RECEIPT_PKG.cancel_ar(#{tranId},#{updateUser},CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE));
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitSOAAgingDetails" id="agingSoaDtlMap">
		<result property="policyId" 			column="POLICY_ID"/>
		<result property="cedingId" 			column="CEDING_ID"/>
		<result property="refCd" 				column="REF_CD"/>
		<result property="payeeNo" 				column="PAYEE_NO"/>
		<result property="payeeName" 			column="PAYEE_NAME"/>
		<result property="policyNo" 			column="POLICY_NO"/>
		<result property="soaNo" 				column="SOA_NO"/>
		<result property="coRefNo" 				column="CO_REF_NO"/>
		<result property="instNo" 				column="INST_NO"/>
		<result property="currCd" 				column="CURR_CD"/>
		<result property="currRate" 			column="CURR_RATE"/>
		<result property="totalAmtDue" 			column="TOTAL_AMT_DUE"/>
		<result property="totalPayments" 		column="TOTAL_PAYMENTS"/>
		<result property="tempPayments" 		column="TEMP_PAYMENTS"/>
		<result property="balAmtDue" 			column="BAL_AMT_DUE"/>
		<result property="balPremDue" 			column="BAL_PREM_DUE"/>
		<result property="balChargesDue" 		column="BAL_CHARGES_DUE"/>
		<result property="balRiComm" 			column="BAL_RI_COMM"/>
		<result property="balRiCommVat" 		column="BAL_RI_COMM_VAT"/>
		<result property="balOverdueInt" 		column="BAL_OVERDUE_INT"/>
		<result property="effDate" 				column="EFF_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="dueDate" 				column="DUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="bookingDate" 			column="BOOKING_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="agingId" 				column="AGING_ID"/>
		<result property="netDue" 				column="NET_DUE"/>
		<result property="balance" 				column="BALANCE"/>
		<result property="createUser" 			column="CREATE_USER"/>
		<result property="createDate" 			column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 			column="UPDATE_USER"/>
		<result property="updateDate" 			column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveAcitAgingSoaDtl" resultMap="agingSoaDtlMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_AGING_SOA_DETAILS_PKG.ret_soa_dtl(
																	#{policyId, jdbcType=VARCHAR},
																	#{instNo,jdbcType=VARCHAR},
																	#{cedingId,jdbcType=VARCHAR},
																	#{payeeNo, jdbcType=VARCHAR}))
	</select>
	
	<update id="saveArInwPolBal" parameterType="java.util.Map">
		BEGIN
			<!-- Save to ACIT_AR_TRANSUMM -->
			ACIT_AR_TRANSUMM_PKG.save_acit_transumm(#{tranId},
													#{billId},
													#{billType},
													#{totalLocalAmt},
													#{createUser},
													CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{updateUser},
													CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
													);
			<!-- Delete from ACIT_AR_INWPOLBAL -->
			<foreach collection="delInwPolBal" item="del">
				ACIT_AR_INWPOLBAL_PKG.del_ar_inwpolbal(
													#{del.tranId},
													#{del.billId},
													#{del.itemNo}				
				);
				<!-- DELETE FROM ACIT_INWPOL_PAYTS -->
				ACIT_INWPOL_PAYTS_PKG.del_inwpol_payts(
														#{save.tranId},
														#{save.policyId},
														#{save.instNo}
				);
				<!-- Insert something about resetting the SOA Details here -->
			</foreach>
			<!-- Save from ACIT_AR_INWPOLBAL -->
			<foreach collection="saveInwPolBal" item="save">
				ACIT_AR_INWPOLBAL_PKG.save_ar_inwpolbal(
													#{save.tranId},
													#{save.billId},
													#{save.itemNo},
													#{save.policyId},
													#{save.instNo},
													#{save.currCd},
													#{save.currRate},
													#{save.premAmt},
													#{save.riComm},
													#{save.riCommVat},
													#{save.charges},
													#{save.netDue},
													#{save.balPaytAmt},
													#{save.overdueInt},
													#{save.createUser},
													CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
													#{save.updateUser},
													CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)				
				);
				<!-- UPDATE AGING SOA DETAILS -->
				ACIT_AGING_SOA_DETAILS_PKG.save_aging_soa_dtl(#{save.policyId},
															  #{save.instNo},
															  #{save.premAmt},
															  #{save.riComm},
															  #{save.riCommVat},
															  #{save.charges},
															  #{save.netDue},
															  #{save.balPaytAmt},
															  #{save.updateUser},
															  CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
														      );
				<!-- INSERT OR UPDATE TO ACIT_INWPOL_PAYTS -->
				ACIT_INWPOL_PAYTS_PKG.save_inwpol_payts(
														#{save.tranId},
														#{save.policyId},
														#{save.instNo},
														1, <!-- PAYT TYPE 1 FOR AR. CHANGE AS NECESSARY -->
														1 <!-- AR -->
				);
			</foreach>
			
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitArInwPolBal" id="arInwPolBalMap">
		<result property="tranId"           column="TRAN_ID" />
		<result property="billId"           column="BILL_ID" />
		<result property="itemNo"           column="ITEM_NO" />
		<result property="policyId"         column="POLICY_ID" />
		<result property="policyNo"         column="POLICY_NO" />
		<result property="soaNo"            column="SOA_NO" />
		<result property="coRefNo"          column="CO_REF_NO" />
		<result property="instNo"           column="INST_NO" />
		<result property="currCd"           column="CURR_CD" />
		<result property="currRate"         column="CURR_RATE" />
		<result property="totalPayments"    column="TOTAL_PAYMENTS" />
		<result property="tempPayments"     column="TEMP_PAYMENTS" />
		<result property="premAmt"          column="PREM_AMT" />
		<result property="charges"          column="CHARGES" />
		<result property="riComm"           column="RI_COMM" />
		<result property="riCommVat"        column="RI_COMM_VAT" />
		<result property="overdueInt"       column="OVERDUE_INT" />
		<result property="effDate"          column="EFF_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="dueDate"          column="DUE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="bookingDate"      column="BOOKING_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="netDue"           column="NET_DUE" />
		<result property="balPaytAmt"       column="BAL_PAYT_AMT" />
		<result property="createUser"       column="CREATE_USER" />
		<result property="createDate"       column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"       column="UPDATE_USER" />
		<result property="updateDate"       column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<select id="retrieveArInwPolBal" resultMap="arInwPolBalMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_AR_INWPOLBAL_PKG.ret_ar_inwpolbal(
																	#{tranId},
																	#{billId}
																   ))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitArTransDtl" id="arTransDtlMap">
		<result property="tranId"			column="TRAN_ID" />
		<result property="billId"			column="BILL_ID" />
		<result property="itemNo"			column="ITEM_NO" />
		<result property="itemName"			column="ITEM_NAME" />
		<result property="currCd"			column="CURR_CD" />
		<result property="currRate"			column="CURR_RATE" />
		<result property="currAmt"			column="CURR_AMT" />
		<result property="localAmt"			column="LOCAL_AMT" />
		<result property="refNo"			column="REF_NO" />
		<result property="remarks"			column="REMARKS" />
		<result property="createUser"		column="CREATE_USER" />
		<result property="createDate"		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser"		column="UPDATE_USER" />
		<result property="updateDate"		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<select id="retrieveArTransDtl" resultMap="arTransDtlMap" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_AR_TRANSDTL_PKG.ret_ar_transdtl(
																	#{tranId},
																	#{billId}
																 ))
	</select>
	
	<update id="saveArTransDtl" parameterType="java.util.Map" statementType="CALLABLE">
		DECLARE
			v_total_payts	NUMBER(16,2);
			v_ar_amt		NUMBER(16,2);
		BEGIN
			SELECT SUM(TOTAL_LOCAL_AMT)
			  INTO v_total_payts
			  FROM ACIT_AR_TRANSUMM
			 WHERE TRAN_ID = #{tranId};
			
			SELECT AR_AMT
			  INTO v_ar_amt
			  FROM ACIT_ACKGT_RECEIPT
			 WHERE TRAN_ID = #{tranId};
			 
			 IF (v_total_payts + #{totalLocalAmt}) <![CDATA[ <= ]]> v_ar_amt THEN
				<!-- Save to ACIT_AR_TRANSUMM -->
				ACIT_AR_TRANSUMM_PKG.save_acit_transumm(#{tranId},
														#{billId},
														#{billType},
														#{totalLocalAmt},
														#{createUser},
														CAST(to_timestamp(#{createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{updateUser},
														CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
														);
				<!-- Delete from ACIT_AR_TRANSDTL -->
				<foreach collection="delTransDtl" item="del">
					ACIT_AR_TRANSDTL_PKG.del_ar_transdtl(
														#{del.tranId},
														#{del.billId},
														#{del.itemNo}				
					);
					
				</foreach>
				<!-- Save from ACIT_AR_TRANSDTL -->
				<foreach collection="saveTransDtl" item="save">
					ACIT_AR_TRANSDTL_PKG.save_ar_transdtl(
														#{save.tranId},
														#{save.billId},
														#{save.itemNo},
														#{save.itemName},
														#{save.currCd},
														#{save.currRate},
														#{save.currAmt},
														#{save.localAmt},
														#{save.refNo, jdbcType=VARCHAR},
														#{save.remarks, jdbcType=VARCHAR},
														#{save.createUser},
														CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
														#{save.updateUser},
														CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)				
					);
				</foreach>
				
			ELSE
				#{custReturnCode, mode=OUT, jdbcType=VARCHAR} := 2; <!-- if return code is 2, cannot save -->
			END IF;
		END;
	</update>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitAcctEntries" id="AcctEntriesMap">
		<result property="tranId"  column="TRAN_ID"/>
		<result property="entryId"  column="ENTRY_ID"/>
		<result property="glAcctId"  column="GL_ACCT_ID"/>
		<result property="glShortCd"  column="GL_SHORT_CD"/>
		<result property="glShortDesc"  column="GL_SHORT_DESC"/>
		<result property="slTypeCd"  column="SL_TYPE_CD"/>
		<result property="slTypeName"  column="SL_TYPE_NAME"/>
		<result property="slCd"  column="SL_CD"/>
		<result property="slName"  column="SL_NAME"/>
		<result property="creditAmt"  column="CREDIT_AMT"/>
		<result property="debitAmt"  column="DEBIT_AMT"/>
		<result property="autoTag"  column="AUTO_TAG"/>
		<result property="createUser"  column="CREATE_USER"/>
		<result property="createDate"  column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser"  column="UPDATE_USER"/>
		<result property="updateDate"  column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveAcitAcctEntries" resultMap="AcctEntriesMap">
		SELECT * FROM TABLE(ACIT_ACCT_ENTRIES_PKG.ret_acit_acc_entries(#{tranId, jdbcType=VARCHAR},#{entryId, jdbcType=VARCHAR},#{glAcctId, jdbcType=VARCHAR},#{slTypeCd, jdbcType=VARCHAR},#{slCd, jdbcType=VARCHAR}))
	</select>
	
	<resultMap type="ph.cpi.rest.api.model.accountingintrust.QSOA" id="qsoaMap">
		<result property="qsoaId" 			column="QSOA_ID"/>
		<result property="cedingId" 		column="CEDING_ID"/>
		<result property="cedingName" 		column="CEDING_NAME"/>
		<result property="quarterEnding" 	column="QUARTER_ENDING" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="qsoaStatus" 		column="QSOA_STATUS"/>
		<result property="qsoaStatusDesc" 	column="QSOA_STATUS_DESC"/>
		<result property="refNoTranId" 		column="REF_NO_TRAN_ID"/>
		<result property="refNoDate" 		column="REF_NO_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="totalDebitAmt" 	column="TOTAL_DEBIT_AMT"/>
		<result property="totalCreditAmt" 	column="TOTAL_CREDIT_AMT"/>
		<result property="createUser" 		column="CREATE_USER"/>
		<result property="createDate" 		column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
		<result property="updateUser" 		column="UPDATE_USER"/>
		<result property="updateDate" 		column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler"/>
	</resultMap>
	
	<select id="retrieveQSOAList" resultMap="qsoaMap">
		SELECT * FROM TABLE(ACIT_QSOA_PKG.ret_comp_qsoa_list(#{qsoaId, jdbcType=INTEGER},
															 #{cedingId, jdbcType=VARCHAR},
															 #{fromQtr, jdbcType=INTEGER},
															 #{fromYear, jdbcType=INTEGER},
															 #{toQtr, jdbcType=INTEGER},
															 #{toYear, jdbcType=INTEGER},
															 null,null,null,null))
	</select>
	
	<update id="saveAcitAcctEntries" parameterType="java.util.Map">
		BEGIN
			NULL;
			<foreach collection="delList" item="item">
				ACIT_ACCT_ENTRIES_PKG.del_acct_acc_entries(#{item.tranId, jdbcType=VARCHAR},
					#{item.entryId, jdbcType=VARCHAR});
			</foreach>
			<foreach collection="saveList" item="item">
				ACIT_ACCT_ENTRIES_PKG.save_acit_acc_entries(
					#{item.tranId, jdbcType=VARCHAR},
					#{item.entryId, jdbcType=VARCHAR},
					#{item.glAcctId, jdbcType=VARCHAR},
					#{item.slTypeCd, jdbcType=VARCHAR},
					#{item.slCd, jdbcType=VARCHAR},
					#{item.creditAmt, jdbcType=VARCHAR},
					#{item.debitAmt, jdbcType=VARCHAR},
					#{item.autoTag, jdbcType=VARCHAR},
					#{item.createUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{item.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{item.updateUser, jdbcType=VARCHAR},
					CAST(to_timestamp(#{item.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
			</foreach>
		END;
	</update>
	
	<update id="saveAcitJVPremResRel" parameterType="java.util.Map">
		BEGIN
			<foreach collection="deletePremResRel" item="del">
				ACIT_JOURNAL_VOUCHER_PKG.del_acit_prr(#{del.tranId},
					#{del.itemNo});
			</foreach>
			
			<foreach collection="savePremResRel" item="save">
				ACIT_JOURNAL_VOUCHER_PKG.save_acit_prr(
					#{save.tranId},
					#{save.cedingId},
					#{save.itemNo,jdbcType=INTEGER},
					CAST(to_timestamp(#{save.quarterEnding}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.currCd},
					#{save.currRate},
					#{save.interestAmt},
					#{save.whtaxAmt},
					#{save.releaseAmt},
					#{save.createUser},
					CAST(to_timestamp(#{save.createDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE),
					#{save.updateUser},
					CAST(to_timestamp(#{save.updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE)
				);
			</foreach>
		END;
	</update>
	
	<update id="cancelJV" parameterType="java.util.Map">
		BEGIN
			ACIT_JOURNAL_VOUCHER_PKG.cancel_jv(#{tranId},#{jvYear},#{jvNo},#{updateUser},
											   CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE) );
					
		END;
	</update>
	
	<update id="printJV" parameterType="java.util.Map">
		BEGIN
			ACIT_JOURNAL_VOUCHER_PKG.print_jv(#{tranId},#{jvYear},#{jvNo},#{updateUser},
											   CAST(to_timestamp(#{updateDate}, 'YYYY-MM-DD"T"HH24:MI:SS') AS DATE) );
					
		END;
	</update>

	<resultMap type="ph.cpi.rest.api.model.accountingintrust.AcitProfCommDtl" id="acitProfCommDtl">
		<result property="profCommId" 					column="PROFCOMM_ID"/>
		<result property="itemNo" 						column="ITEM_NO"/>
		<result property="particulars" 					column="PARTICULARS"/>
		<result property="actualAmt" 					column="ACTUAL_AMT"/>
		<result property="natcatAmt" 					column="NATCAT_AMT"/>
		<result property="income" 						column="INCOME"/>
		<result property="outgo" 						column="OUTGO"/>
		<result property="createUser" 					column="CREATE_USER"/>
		<result property="createDate" 					column="CREATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
		<result property="updateUser" 					column="UPDATE_USER"/>
		<result property="updateDate" 					column="UPDATE_DATE" typeHandler="ph.cpi.rest.api.typehandler.DateTimeTypeHandler" />
	</resultMap>
	
	<select id="retrieveProfCommSumm" resultMap="acitProfCommSumm" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_PROFCOMM_PKG.ret_profcomm_summ(
					#{profcommId,jdbcType=INTEGER},
					#{cedingId, jdbcType=VARCHAR},
					#{month, jdbcType=VARCHAR},
					#{year, jdbcType=VARCHAR},
					'', '', '',''))
	</select>
	
	<select id="retrieveProfCommDtl" resultMap="acitProfCommDtl" parameterType="java.util.Map">
		SELECT * FROM TABLE(ACIT_PROFCOMM_PKG.ret_profcomm_dtl(
					#{profcommId,jdbcType=INTEGER},
					'', '', '',''))
	</select>
</mapper>